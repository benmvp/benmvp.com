<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a21a73f781ee30f33316.css">.gatsby-code-button-container{touch-action:none;display:flex;justify-content:flex-end;position:relative;top:28px;z-index:100;pointer-events:none}.gatsby-code-button{cursor:pointer;pointer-events:auto}.gatsby-code-button:after{visibility:hidden;position:absolute;display:none;padding:5px;content:attr(data-tooltip);color:#fff;font-size:16px;background-color:#000;white-space:nowrap}.gatsby-code-button[data-tooltip]:after{top:26px;right:0}.gatsby-code-button[data-tooltip]:focus:after,.gatsby-code-button[data-tooltip]:hover:after{visibility:visible;display:block;z-index:200}.gatsby-code-button-toaster{z-index:500;position:fixed;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;pointer-events:none}.gatsby-code-button-toaster-text{width:100%;margin:0 15px;max-width:850px;padding:20px;font-size:24px;letter-spacing:-1px;font-family:monospace;color:#fff;background-color:#000;border-radius:2px;text-align:center;opacity:0;animation:animation 3s cubic-bezier(.98,.01,.53,.47)}.gatsby-code-button-buffer{position:fixed;top:-9999px;opacity:0}@keyframes animation{0%,50%{opacity:1}50%,to{opacity:0}}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.gatsby-highlight{background-color:#fdf6e3;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-]{background-color:transparent;margin:0;padding:0;overflow:initial;float:left;min-width:100%}.gatsby-highlight-code-line{background-color:#feb;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #f99}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}@media (max-width:767px){.gatsby-highlight pre[class*=language-].line-numbers{padding-left:0}.gatsby-highlight .line-numbers-rows{display:none}pre[class*=language-]{font-size:.75rem}}.gatsby-code-button{margin-right:1em}</style><meta name="generator" content="Gatsby 2.24.53"/><link rel="icon" href="/favicon-32x32.png?v=2b60dd7e58e084c6192b8f4d7c81d91d" type="image/png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#3f51b5"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><title data-react-helmet="true">8 helpful custom React Hooks | Ben Ilegbodu</title><link data-react-helmet="true" rel="canonical" href="https://www.benmvp.com/blog/8-helpful-custom-react-hooks/"/><meta data-react-helmet="true" name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" content="Implementations &amp; explanations for custom React Hooks like usePrevious, useMedia, useDeepCompareEffect &amp; more"/><meta data-react-helmet="true" name="keywords" content="Frontend Software Engineer React Training JavaScript Training TypeScript Training Minishops"/><meta data-react-helmet="true" name="image" content="https://res.cloudinary.com/benmvp/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_666,c_fit,co_rgb:ffffff,g_north_west,x_550,y_64,l_text:roboto_70_bold:8%2520helpful%2520custom%2520React%2520Hooks/w_666,c_fit,co_rgb:ffffff,g_south_west,x_550,y_64,l_text:roboto_40_light:Implementations%2520%2526%2520explanations%2520for%2520custom%2520React%2520Hooks%2520like%2520usePrevious%252C%2520useMedia%252C%2520useDeepCompareEffect%2520%2526%2520more/w_350,c_fit,co_rgb:ffffff,g_south_west,x_64,y_64,l_text:roboto_40:February%252007%252C%25202021/v1619329795/benmvp/blog-post-template_gkpzgc"/><meta data-react-helmet="true" property="og:site_name" content="Ben Ilegbodu"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:url" content="https://www.benmvp.com/blog/8-helpful-custom-react-hooks/"/><meta data-react-helmet="true" property="og:title" content="8 helpful custom React Hooks | Ben Ilegbodu"/><meta data-react-helmet="true" property="og:description" content="Implementations &amp; explanations for custom React Hooks like usePrevious, useMedia, useDeepCompareEffect &amp; more"/><meta data-react-helmet="true" property="og:image" content="https://res.cloudinary.com/benmvp/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_666,c_fit,co_rgb:ffffff,g_north_west,x_550,y_64,l_text:roboto_70_bold:8%2520helpful%2520custom%2520React%2520Hooks/w_666,c_fit,co_rgb:ffffff,g_south_west,x_550,y_64,l_text:roboto_40_light:Implementations%2520%2526%2520explanations%2520for%2520custom%2520React%2520Hooks%2520like%2520usePrevious%252C%2520useMedia%252C%2520useDeepCompareEffect%2520%2526%2520more/w_350,c_fit,co_rgb:ffffff,g_south_west,x_64,y_64,l_text:roboto_40:February%252007%252C%25202021/v1619329795/benmvp/blog-post-template_gkpzgc"/><meta data-react-helmet="true" property="og:image:alt" content="8 helpful custom React Hooks"/><meta data-react-helmet="true" property="og:locale" content="en_US"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site" content="@benmvp"/><meta data-react-helmet="true" name="twitter:creator" content="@benmvp"/><meta data-react-helmet="true" name="twitter:title" content="8 helpful custom React Hooks | Ben Ilegbodu"/><meta data-react-helmet="true" name="twitter:description" content="Implementations &amp; explanations for custom React Hooks like usePrevious, useMedia, useDeepCompareEffect &amp; more"/><meta data-react-helmet="true" name="twitter:image" content="https://res.cloudinary.com/benmvp/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_666,c_fit,co_rgb:ffffff,g_north_west,x_550,y_64,l_text:roboto_70_bold:8%2520helpful%2520custom%2520React%2520Hooks/w_666,c_fit,co_rgb:ffffff,g_south_west,x_550,y_64,l_text:roboto_40_light:Implementations%2520%2526%2520explanations%2520for%2520custom%2520React%2520Hooks%2520like%2520usePrevious%252C%2520useMedia%252C%2520useDeepCompareEffect%2520%2526%2520more/w_350,c_fit,co_rgb:ffffff,g_south_west,x_64,y_64,l_text:roboto_40:February%252007%252C%25202021/v1619329795/benmvp/blog-post-template_gkpzgc"/><meta data-react-helmet="true" name="twitter:image:alt" content="8 helpful custom React Hooks"/><meta data-react-helmet="true" property="og:article:published_time" content="2021-02-07"/><meta data-react-helmet="true" property="og:article:author" content="Ben Ilegbodu"/><meta data-react-helmet="true" property="og:article:section" content="Technology"/><meta data-react-helmet="true" property="og:article:tag" content="react"/><meta data-react-helmet="true" property="og:article:tag" content="hooks"/><script data-react-helmet="true" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script data-react-helmet="true">
  (adsbygoogle=window.adsbygoogle||[]).pauseAdRequests=0;

  if (!adsbygoogle.loaded) {
    adsbygoogle.push({
      google_ad_client: "ca-pub-8593460861818909",
      enable_page_level_ads: true
    });
  }
  </script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org/","@type":"BlogPosting","url":"https://www.benmvp.com/blog/8-helpful-custom-react-hooks/","name":"8 helpful custom React Hooks | Ben Ilegbodu","alternateName":"Ben Ilegbodu","copyrightHolder":"Ben Ilegbodu","copyrightYear":2015,"description":"Implementations & explanations for custom React Hooks like usePrevious, useMedia, useDeepCompareEffect & more","image":{"@type":"ImageObject","url":"https://res.cloudinary.com/benmvp/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_666,c_fit,co_rgb:ffffff,g_north_west,x_550,y_64,l_text:roboto_70_bold:8%2520helpful%2520custom%2520React%2520Hooks/w_666,c_fit,co_rgb:ffffff,g_south_west,x_550,y_64,l_text:roboto_40_light:Implementations%2520%2526%2520explanations%2520for%2520custom%2520React%2520Hooks%2520like%2520usePrevious%252C%2520useMedia%252C%2520useDeepCompareEffect%2520%2526%2520more/w_350,c_fit,co_rgb:ffffff,g_south_west,x_64,y_64,l_text:roboto_40:February%252007%252C%25202021/v1619329795/benmvp/blog-post-template_gkpzgc"},"keywords":"Frontend Software Engineer React Training JavaScript Training TypeScript Training Minishops","headline":"Implementations & explanations for custom React Hooks like usePrevious, useMedia, useDeepCompareEffect & more","articleBody":"<p>Custom React Hooks allow us to extract component logic into reusable functions. Custom Hooks look very much like normal helper functions, except they can maintain component state and perform effects. There are many common actions that we do in our React applications that can be wrapped up in a custom Hook.</p>\n<p>So letâ€™s take a look at the implementations of 8 different custom Hooks. Each implementation will include code comments as well as a potential use case. And since Iâ€™m a TypeScript fan, Iâ€™ll also provide a second implementation in TypeScript when there is any TypeScript uniqueness. ðŸ˜„</p>\n<p>Youâ€™ll find flavors of many of these custom Hooks in the <a href=\"https://github.com/streamich/react-use\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">react-use</code></a> package. So if you find yourself using a lot of these Hooks, you might as well import the package.</p>\n<p>Letâ€™s jump in!</p>\n<hr>\n<h2 id=\"code-classlanguage-textuseinitialmountcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textuseinitialmountcode\" aria-label=\"code classlanguage textuseinitialmountcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">useInitialMount</code></h2>\n<p>Sometimes we only want to run an effect the very first time the component mounts. In my experience, the majority of these times have been firing off a tracking event. Usually Iâ€™ll maintain a <code class=\"language-text\">hasSent</code> local variable that I flip from <code class=\"language-text\">false</code> to <code class=\"language-text\">true</code> after Iâ€™ve sent it the first time. But instead, we can use a <code class=\"language-text\">useInitialMount</code> custom Hook.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRef<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useInitialMount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// refs exist across component re-renders, so</span>\n  <span class=\"token comment\">// we can use it to store a value for the</span>\n  <span class=\"token comment\">// subsequent renders. We're tracking if it's</span>\n  <span class=\"token comment\">// the first render, which is initially `true`</span>\n  <span class=\"token keyword\">const</span> isFirst <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// the very first render, the ref will be</span>\n  <span class=\"token comment\">// `true`. but we immediately set it to `false`</span>\n  <span class=\"token comment\">// so that every render after will be `false`</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isFirst<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    isFirst<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n\n    <span class=\"token comment\">// return true the very first render</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// return false every following render</span>\n  <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Page</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> pageName<span class=\"token punctuation\">,</span> items <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isInitialMount <span class=\"token operator\">=</span> <span class=\"token function\">useInitialMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// only call `trackEvent` for initial mount.</span>\n    <span class=\"token comment\">// don't call it ever again, even if</span>\n    <span class=\"token comment\">// `pageName` or `items.length` change</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isInitialMount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">trackEvent</span><span class=\"token punctuation\">(</span>pageName<span class=\"token punctuation\">,</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>pageName<span class=\"token punctuation\">,</span> items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">,</span> isInitialMount<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// render UI</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<h2 id=\"code-classlanguage-textusepreviouscode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textusepreviouscode\" aria-label=\"code classlanguage textusepreviouscode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">usePrevious</code></h2>\n<p>Sometimes we need to know the previous value of props or state to compare it to a current value. The <code class=\"language-text\">usePrevious</code> Hook is so common that it shows up in the <a href=\"https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Hooks FAQ</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">usePrevious</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> ref <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    ref<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> value\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> ref<span class=\"token punctuation\">.</span>current\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>However, the FAQ code above has a potential gotcha in that if the component re-renders for another reason (for instance, a change in another state value), then our previous value gets overwritten even though it technically hasnâ€™t changed.</p>\n<p>We likely want a <code class=\"language-text\">usePrevious</code> that only updates the previous value if it differs from the new value.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRef<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">usePrevious</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// use refs to keep track of both the previous &amp;</span>\n  <span class=\"token comment\">// current values</span>\n  <span class=\"token keyword\">const</span> prevRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> curRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isInitialMount <span class=\"token operator\">=</span> <span class=\"token function\">useInitialMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token comment\">// after the initial render, if the value passed in</span>\n  <span class=\"token comment\">// differs from the `curRef`, then we know that the</span>\n  <span class=\"token comment\">// value we're tracking actually changed. we can</span>\n  <span class=\"token comment\">// update the refs. otherwise if the `curRef` &amp;</span>\n  <span class=\"token comment\">// value are the same, something else caused the</span>\n  <span class=\"token comment\">// re-render and we should *not* update `prevRef`.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isInitialMount <span class=\"token operator\">&amp;&amp;</span> curRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">!==</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    prevRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> curRef<span class=\"token punctuation\">.</span>current\n    curRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> value\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> prevRef<span class=\"token punctuation\">.</span>current\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Example</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>time<span class=\"token punctuation\">,</span> setTime<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// use `usePrevious` to keep track of the `count`</span>\n  <span class=\"token comment\">// from the last time it changed</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> prevCount <span class=\"token operator\">=</span> <span class=\"token function\">usePrevious</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span></span>\n  <span class=\"token comment\">// update `date` every 1 sec to have another state updating</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> intervalId <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTime</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>intervalId<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">curCount</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> curCount <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">+</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">curCount</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> curCount <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">-</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n        Count<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> Old Count<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>prevCount<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>The time is <span class=\"token punctuation\">{</span>time<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Did you catch how weâ€™re using the <code class=\"language-text\">useInitialMount</code> Hook here in <code class=\"language-text\">usePrevious</code>? I love when I can reuse Hooks within other Hooks.</p>\n<p>And in TypeScript, the code is more or less the same, except we use <a href=\"https://www.typescriptlang.org/docs/handbook/generics.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">generics</a> so that the type of <code class=\"language-text\">curValue</code> can be arbitrary, but enforce that the return value has to be the same type.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> usePrevious <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> prevRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>  <span class=\"token keyword\">const</span> curRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> isInitialMount <span class=\"token operator\">=</span> <span class=\"token function\">useInitialMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isInitialMount <span class=\"token operator\">&amp;&amp;</span> curRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">!==</span> value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    prevRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> curRef<span class=\"token punctuation\">.</span>current\n    curRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> value\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> prevRef<span class=\"token punctuation\">.</span>current\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">react-use</code> package has a similar Hook thatâ€™s called <a href=\"https://github.com/streamich/react-use/blob/master/docs/usePreviousDistinct.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">usePreviousDistinct</code></a> to distinguish itself from the basic <code class=\"language-text\">usePrevious</code> outlined in the React Hooks FAQ. It also provides a compare function which can be passed as the optional second parameter to control when the new value is different from the previous value. The default compare function is strict equality like we used above. But if the value being stored is an array or object, youâ€™ll likely want a deep-equals comparison instead.</p>\n<hr>\n<h2 id=\"code-classlanguage-textuseuniqueidcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textuseuniqueidcode\" aria-label=\"code classlanguage textuseuniqueidcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">useUniqueId</code></h2>\n<p>Sometimes in React we need to create a unique ID to use an <code class=\"language-text\">id</code> for DOM elements. The ID itself doesnâ€™t really matter, but is needed for associating two elements together for accessibility purposes using <a href=\"https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ARIA attributes</a> within a complex component.</p>\n<p>The trick is that we donâ€™t want to generate a new ID for every render. Once weâ€™ve generated an ID for the component, we want it to remain the same. Our good olâ€™ friend <a href=\"https://reactjs.org/docs/hooks-reference.html#useref\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">useRef</code></a> will come to the rescue again, and we can wrap up the logic into something easily reusable.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token constant\">GLOBAL_ID</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useUniqueId</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> idRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isInitialMount <span class=\"token operator\">=</span> <span class=\"token function\">useInitialMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token comment\">// generate the ID for the first render</span>\n  <span class=\"token comment\">// and store in the ref to remain for</span>\n  <span class=\"token comment\">// subsequent renders</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isInitialMount<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">GLOBAL_ID</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n    idRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">id</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">GLOBAL_ID</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> idRef<span class=\"token punctuation\">.</span>current\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">NavMenu</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> items <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">useUniqueId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>  <span class=\"token keyword\">const</span> buttonId <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-button</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token keyword\">const</span> menuId <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-menu</span><span class=\"token template-punctuation string\">`</span></span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>buttonId<span class=\"token punctuation\">}</span> aria<span class=\"token operator\">-</span>controls<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>menuId<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">+</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>ul id<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>menuId<span class=\"token punctuation\">}</span> aria<span class=\"token operator\">-</span>labelledby<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>buttonId<span class=\"token punctuation\">}</span> role<span class=\"token operator\">=</span><span class=\"token string\">\"menu\"</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>a role<span class=\"token operator\">=</span><span class=\"token string\">\"menuitem\"</span> href<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Once again we get to use a previously created custom Hook (<code class=\"language-text\">useInitialMount</code>) to help build a new Hook.</p>\n<p>React actually had a proposal for a built-in Hook to solve this exact problem and ensure the ID generated client-side matched the one generated server-side. It was called <code class=\"language-text\">useOpaqueIdentifier</code>. Not sure what exactly happened to it and why it hasnâ€™t been released, but I wrote about it last year in post entitled <a href=\"/blog/new-react-use-opaque-identifier-hook-coming-soon/\">New React useOpaqueIdentifier hook coming soon</a>. Lesson learned. ðŸ˜‚</p>\n<hr>\n<h2 id=\"code-classlanguage-textuseismountedcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textuseismountedcode\" aria-label=\"code classlanguage textuseismountedcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">useIsMounted</code></h2>\n<p>In my previous post on <a href=\"/blog/handling-async-react-component-effects-after-unmount/\">Handling async React component effects after unmount</a>, I outline 4 ways to solve the problem where we try to update the state of a component after it has already unmounted. We prevent updating the state with the result of a <code class=\"language-text\">fetch</code> call when the response returned after the component had already been unmounted.</p>\n<p>All the solutions resolve around keeping track of if the component is still mounted. So we created a custom Hook for it called <code class=\"language-text\">useIsMounted</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useRef<span class=\"token punctuation\">,</span> useCallback <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token comment\">// returns a function that when called will</span>\n<span class=\"token comment\">// return `true` if the component is mounted</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useIsMounted</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// the ref to keep track of mounted state across renders</span>\n  <span class=\"token keyword\">const</span> mountedRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// helper function that will return the mounted state.</span>\n  <span class=\"token comment\">// using `useCallback` because the function will likely</span>\n  <span class=\"token comment\">// be used in the deps array of a `useEffect` call</span>\n  <span class=\"token keyword\">const</span> isMounted <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> mountedRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// effect sets mounted ref to `true` when run</span>\n  <span class=\"token comment\">// and the sets to `false` during effect cleanup (i.e. unmount)</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    mountedRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      mountedRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> isMounted\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Results</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>items<span class=\"token punctuation\">,</span> setItems<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isMounted <span class=\"token operator\">=</span> <span class=\"token function\">useIsMounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchItems</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newItems</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// only set state if the component</span>\n      <span class=\"token comment\">// is still mounted after receiving</span>\n      <span class=\"token comment\">// the async data</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isMounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>        <span class=\"token function\">setItems</span><span class=\"token punctuation\">(</span>newItems<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>isMounted<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// render UI</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<h2 id=\"code-classlanguage-textusemediacode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textusemediacode\" aria-label=\"code classlanguage textusemediacode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">useMedia</code></h2>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Media queries</a> allow us to change our UI based upon a host of media features (most commonly the size of the window). Media queries are normally used in CSS, but the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">matchMedia()</code> API </a> allows us to execute media queries in JavaScript when necessary. Maybe we need to change props or render entirely different components depending on the results of a media query.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useMedia</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">query</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// initialize state to current match value</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>matches<span class=\"token punctuation\">,</span> setMatches<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> window<span class=\"token punctuation\">.</span><span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>matches<span class=\"token punctuation\">)</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isMounted <span class=\"token operator\">=</span> <span class=\"token function\">useIsMounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">isMounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>      <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> mediaQueryList <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">listener</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// update `matches` state whenever query match changes.</span>\n      <span class=\"token comment\">// `isMounted()` check is for extra protection in case</span>\n      <span class=\"token comment\">// listener somehow fires in between unmount and</span>\n      <span class=\"token comment\">// listener removal</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isMounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>        <span class=\"token function\">setMatches</span><span class=\"token punctuation\">(</span>mediaQueryList<span class=\"token punctuation\">.</span>matches<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    mediaQueryList<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>listener<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// sync initial matches again</span>\n    <span class=\"token function\">setMatches</span><span class=\"token punctuation\">(</span>mediaQueryList<span class=\"token punctuation\">.</span>matches<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      mediaQueryList<span class=\"token punctuation\">.</span><span class=\"token function\">removeListener</span><span class=\"token punctuation\">(</span>listener<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> isMounted<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> matches\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Example</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> isSmall <span class=\"token operator\">=</span> <span class=\"token function\">useMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">'(max-width: 480px)'</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Screen is <span class=\"token punctuation\">{</span>isSmall <span class=\"token operator\">?</span> <span class=\"token string\">'small'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'large'</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<h2 id=\"code-classlanguage-textuserafstatecode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textuserafstatecode\" aria-label=\"code classlanguage textuserafstatecode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">useRafState</code></h2>\n<p>There are some DOM events, like <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/resize_event\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">window <code class=\"language-text\">resize</code></a> or <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/scroll_event\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">document <code class=\"language-text\">scroll</code></a>, the fire a lot. They fire much faster than the DOM can update, so if we try to update the DOM for each event, our app feels sluggish.</p>\n<p>We can try to work around this problem by manually <a href=\"https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_debounce\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">debouncing</a> or <a href=\"https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_throttle\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">throttling</a> the events, but thereâ€™s an interesting alternative. We can make use of <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">requestAnimationFrame</code></a> to debounce in a different way by only setting the state on the next animation frame.</p>\n<p>I found this <code class=\"language-text\">useRafState</code> Hook on <a href=\"https://github.com/streamich/react-use/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">react-use</code></a> and had to share it because itâ€™ll making this debouncing much easier. Its interface is identical to <a href=\"https://reactjs.org/docs/hooks-reference.html#usestate\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">useState</code></a>. It wraps <code class=\"language-text\">useState</code>, only setting the state using <code class=\"language-text\">requestAnimationFrame</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useCallback<span class=\"token punctuation\">,</span> useRef<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useRafState</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">initialState</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// this is the actual state</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// keep track of the `requestAnimationFrame` request ID</span>\n  <span class=\"token comment\">// across renders and successive calls to `useRafState`</span>\n  <span class=\"token keyword\">const</span> requestId <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// the actual state setter we'll return.</span>\n  <span class=\"token comment\">// using `useCallback` so that it's memoized</span>\n  <span class=\"token comment\">// just like `setState`</span>\n  <span class=\"token keyword\">const</span> setRafState <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// cancel active request before making next one.</span>\n    <span class=\"token comment\">// this is debouncing.</span>\n    <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>requestId<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// create new request to set state on animation frame</span>\n    requestId<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// cancel any active request when component unmounts</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>requestId<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setRafState<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Example</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>width<span class=\"token punctuation\">,</span> setWidth<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRafState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleResize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setWidth</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>innerWidth<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> handleResize<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// set initial value</span>\n    <span class=\"token function\">setWidth</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>innerWidth<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> handleResize<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>setWidth<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Window width<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>width<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The TypeScript for <code class=\"language-text\">useRafState</code> is a bit involved because we need to mimic all that <code class=\"language-text\">useState</code> can do. Since the state can be anything, we leverage generics once again.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token comment\">// just like with `useState`, `initialState` is either a value</span>\n<span class=\"token comment\">// or a function that returns a value</span>\n<span class=\"token comment\">// the type of `initialState` is generic and depends on the value</span>\n<span class=\"token comment\">// being passed in</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> useRafState <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">S</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>initialState<span class=\"token operator\">:</span> <span class=\"token constant\">S</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">S</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialState<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> requestId <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// just like with `useState`, `setRafState` is a memoized function</span>\n  <span class=\"token comment\">// that either takes a value or a function that accepts</span>\n  <span class=\"token comment\">// the previous value and returns the next value</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> setRafState <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token constant\">S</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>prevState<span class=\"token operator\">:</span> <span class=\"token constant\">S</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">S</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>requestId<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n\n    requestId<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>requestId<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// using const assertion simplifies return value type definition</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setRafState<span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span></span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>For more on <code class=\"language-text\">as const</code>, read <a href=\"/blog/use-cases-typescript-const-assertions/\">Use cases for TypeScript const assertions</a>.</p>\n<hr>\n<h2 id=\"code-classlanguage-textusewindowscrollcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textusewindowscrollcode\" aria-label=\"code classlanguage textusewindowscrollcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">useWindowScroll</code></h2>\n<p>We may need to track the scroll position of the window in order to know when to pin or unpin some sticky content on the page. And since the document <code class=\"language-text\">scroll</code> event fires often, weâ€™ll likely want to debounce updating the state. We can build <code class=\"language-text\">useWindowScroll</code> using the <code class=\"language-text\">useRafState</code> custom Hook we just implemented.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getPos</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  x<span class=\"token operator\">:</span> window<span class=\"token punctuation\">.</span>scrollX<span class=\"token punctuation\">,</span>\n  y<span class=\"token operator\">:</span> window<span class=\"token punctuation\">.</span>scrollY<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useWindowScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>pos<span class=\"token punctuation\">,</span> setPos<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRafState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// `useRafState` will debounce on animation frame</span>\n      <span class=\"token function\">setPos</span><span class=\"token punctuation\">(</span><span class=\"token function\">getPos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// set initial value</span>\n    <span class=\"token function\">setPos</span><span class=\"token punctuation\">(</span><span class=\"token function\">getPos</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> pos\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Example</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> x<span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useWindowScroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n      Position<span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>y<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<h2 id=\"code-classlanguage-textusedeepcompareeffectcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textusedeepcompareeffectcode\" aria-label=\"code classlanguage textusedeepcompareeffectcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">useDeepCompareEffect</code></h2>\n<p>Last month I wrote a post entitled <a href=\"/blog/object-array-dependencies-react-useEffect-hook/\">Object &#x26; array dependencies in the React useEffect Hook</a>, which provided four strategies for optimizing <code class=\"language-text\">useEffect</code> with object or array dependencies. The basic problem is that <code class=\"language-text\">useEffect</code> uses <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Strict_equality\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">strict equality</a> when checking if individual dependencies have changed. So objects or arrays in <code class=\"language-text\">useEffect</code> dependencies can cause unnecessary effect runs even when the objects have the same contents.</p>\n<p>If we had a <code class=\"language-text\">useEffect</code> that instead performed a deep comparison of the objects or arrays, we wouldnâ€™t have to worry about having having them in our dependencies. So letâ€™s build one!</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRef<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> isDeepEqual <span class=\"token keyword\">from</span> <span class=\"token string\">'fast-deep-equal/react'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useDeepCompareEffect</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">effect<span class=\"token punctuation\">,</span> deps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// use a ref to keep track of deps across renders</span>\n  <span class=\"token keyword\">const</span> depsRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// if the new deps don't deep equal the prev ones</span>\n  <span class=\"token comment\">// stored in the ref, update the ref. If they *do*</span>\n  <span class=\"token comment\">// deep equal, the ref will remain unchanged and</span>\n  <span class=\"token comment\">// the array passed to `useEffect` will be the exact</span>\n  <span class=\"token comment\">// same array as before so the basic strict equality</span>\n  <span class=\"token comment\">// will work</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>depsRef <span class=\"token operator\">||</span> <span class=\"token operator\">!</span><span class=\"token function\">isDeepEqual</span><span class=\"token punctuation\">(</span>depsRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> deps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    depsRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> deps\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>effect<span class=\"token punctuation\">,</span> depsRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Team</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> team <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>players<span class=\"token punctuation\">,</span> setPlayers<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">useDeepCompareEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">getPlayers</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>setPlayers<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>team<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Players team<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>team<span class=\"token punctuation\">}</span> players<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>players<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Because the <code class=\"language-text\">useDeepCompareEffect</code> Hook is a wrapper around the basic <code class=\"language-text\">useEffect</code> Hook, it acts like a drop-in replacement for <code class=\"language-text\">useEffect</code>. Our code looks almost identical. However, we probably wouldnâ€™t want to use <code class=\"language-text\">useDeepCompareEffect</code> all the time because itâ€™s definitely slower than normal <code class=\"language-text\">useEffect</code> because of the deep comparison checks. But in spot cases, itâ€™ll definitely come in handy.</p>\n<p>Also, if you use <a href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">eslint-plugin-react-hooks</code></a> for linting your React Hooks code (which I hope you do), youâ€™ll have to update the <a href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks#advanced-configuration\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">react-hooks/exhaustive-deps</code></a> rule to include <code class=\"language-text\">useDeepCompareEffect</code> in the <code class=\"language-text\">additionalHooks</code> configuration. This way youâ€™ll still be warned if you forget to list a dependency.</p>\n<p>The implementation in TypeScript mirrors the type API of <code class=\"language-text\">useEffect</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRef<span class=\"token punctuation\">,</span> useEffect<span class=\"token punctuation\">,</span> DependencyList<span class=\"token punctuation\">,</span> EffectCallback <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> isDeepEqual <span class=\"token keyword\">from</span> <span class=\"token string\">'fast-deep-equal/react'</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> useDeepCompareEffect <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>TDeps <span class=\"token keyword\">extends</span> <span class=\"token class-name\">DependencyList</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">  effect<span class=\"token operator\">:</span> EffectCallback<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  deps<span class=\"token operator\">:</span> TDeps<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> depsRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>TDeps <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>depsRef <span class=\"token operator\">||</span> <span class=\"token operator\">!</span><span class=\"token function\">isDeepEqual</span><span class=\"token punctuation\">(</span>depsRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">,</span> deps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    depsRef<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> deps\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>effect<span class=\"token punctuation\">,</span> depsRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">react-use</code> package has a similar <a href=\"https://github.com/streamich/react-use/blob/master/docs/useDeepCompareEffect.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">useDeepCompareEffect</code></a> Hook. But its actually built on top of a <a href=\"https://github.com/streamich/react-use/blob/master/docs/useCustomCompareEffect.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">useCustomCompareEffect</code></a> Hook that accepts any compare function that is then used for comparing the dependencies. As a result, it enables supporting <a href=\"https://github.com/streamich/react-use/blob/master/docs/useShallowCompareEffect.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">useShallowCompareEffect</code></a> as well.</p>\n<hr>\n<p>So thatâ€™s it! ðŸ˜… There are literally an infinite number of custom Hooks that we can create. But these are 8 custom Hooks that I found especially helpful or particularly interesting.</p>\n<p>What custom Hooks do you find yourself using all the time? Iâ€™d love to know! Feel free to reach out to me on Twitter at <a href=\"https://twitter.com/benmvp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">@benmvp</a> to let me know!</p>\n<p>Keep learning my friends. ðŸ¤“</p>","author":{"@type":"Person","name":"Ben Ilegbodu"},"datePublished":"2021-02-07","publisher":{"@type":"Person","name":"Ben Ilegbodu"},"teaches":"React","timeRequired":"PT14M","wordCount":1200}</script><style id="jss-server-side">html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,::after,::before{box-sizing:inherit}b,strong{font-weight:700}body{color:rgba(0,0,0,.87);margin:0;font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;letter-spacing:.01071em;background-color:#fafafa}@media print{body{background-color:#fff}}body::backdrop{background-color:#fafafa}.MuiSvgIcon-root-135{fill:currentColor;width:1em;height:1em;display:inline-block;font-size:1.5rem;transition:fill .2s cubic-bezier(.4,0,.2,1) 0s;flex-shrink:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.MuiSvgIcon-colorPrimary-136{color:#3f51b5}.MuiSvgIcon-colorSecondary-137{color:#1de9b6}.MuiSvgIcon-colorAction-138{color:rgba(0,0,0,.54)}.MuiSvgIcon-colorError-139{color:#f44336}.MuiSvgIcon-colorDisabled-140{color:rgba(0,0,0,.26)}.MuiSvgIcon-fontSizeInherit-141{font-size:inherit}.MuiSvgIcon-fontSizeSmall-142{font-size:1.25rem}.MuiSvgIcon-fontSizeLarge-143{font-size:2.1875rem}.MuiCollapse-container-174{height:0;overflow:hidden;transition:height .3s cubic-bezier(.4,0,.2,1) 0s}.MuiCollapse-entered-175{height:auto;overflow:visible}.MuiCollapse-hidden-176{visibility:hidden}.MuiCollapse-wrapper-177{display:flex}.MuiCollapse-wrapperInner-178{width:100%}.MuiPaper-root-30{color:rgba(0,0,0,.87);transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0s;background-color:#fff}.MuiPaper-rounded-31{border-radius:4px}.MuiPaper-outlined-32{border:1px solid rgba(0,0,0,.12)}.MuiPaper-elevation0-33{box-shadow:none}.MuiPaper-elevation1-34{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.MuiPaper-elevation2-35{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.MuiPaper-elevation3-36{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.MuiPaper-elevation4-37{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.MuiPaper-elevation5-38{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.MuiPaper-elevation6-39{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiPaper-elevation7-40{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.MuiPaper-elevation8-41{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.MuiPaper-elevation9-42{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.MuiPaper-elevation10-43{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.MuiPaper-elevation11-44{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.MuiPaper-elevation12-45{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.MuiPaper-elevation13-46{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.MuiPaper-elevation14-47{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.MuiPaper-elevation15-48{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.MuiPaper-elevation16-49{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.MuiPaper-elevation17-50{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.MuiPaper-elevation18-51{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.MuiPaper-elevation19-52{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.MuiPaper-elevation20-53{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.MuiPaper-elevation21-54{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.MuiPaper-elevation22-55{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.MuiPaper-elevation23-56{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.MuiPaper-elevation24-57{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.MuiButtonBase-root-126{color:inherit;border:0;cursor:pointer;margin:0;display:inline-flex;outline:0;padding:0;position:relative;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;justify-content:center;text-decoration:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.MuiButtonBase-root-126::-moz-focus-inner{border-style:none}.MuiButtonBase-root-126.Mui-disabled{cursor:default;pointer-events:none}@media print{.MuiButtonBase-root-126{-webkit-print-color-adjust:exact;color-adjust:exact}}.MuiIconButton-root-127{flex:0 0 auto;color:rgba(0,0,0,.54);padding:12px;overflow:visible;font-size:1.5rem;text-align:center;transition:background-color 150ms cubic-bezier(.4,0,.2,1) 0s;border-radius:50%}.MuiIconButton-root-127:hover{background-color:rgba(0,0,0,.04)}.MuiIconButton-root-127.Mui-disabled{color:rgba(0,0,0,.26);background-color:transparent}@media (hover:none){.MuiIconButton-root-127:hover{background-color:transparent}}.MuiIconButton-edgeStart-128{margin-left:-12px}.MuiIconButton-sizeSmall-133.MuiIconButton-edgeStart-128{margin-left:-3px}.MuiIconButton-edgeEnd-129{margin-right:-12px}.MuiIconButton-sizeSmall-133.MuiIconButton-edgeEnd-129{margin-right:-3px}.MuiIconButton-colorInherit-130{color:inherit}.MuiIconButton-colorPrimary-131{color:#3f51b5}.MuiIconButton-colorPrimary-131:hover{background-color:rgba(63,81,181,.04)}@media (hover:none){.MuiIconButton-colorPrimary-131:hover{background-color:transparent}}.MuiIconButton-colorSecondary-132{color:#1de9b6}.MuiIconButton-colorSecondary-132:hover{background-color:rgba(29,233,182,.04)}@media (hover:none){.MuiIconButton-colorSecondary-132:hover{background-color:transparent}}.MuiIconButton-sizeSmall-133{padding:3px;font-size:1.125rem}.MuiIconButton-label-134{width:100%;display:flex;align-items:inherit;justify-content:inherit}.MuiAppBar-root-19{width:100%;display:flex;z-index:1100;box-sizing:border-box;flex-shrink:0;flex-direction:column}.MuiAppBar-positionFixed-20{top:0;left:auto;right:0;position:fixed}@media print{.MuiAppBar-positionFixed-20{position:absolute}}.MuiAppBar-positionAbsolute-21{top:0;left:auto;right:0;position:absolute}.MuiAppBar-positionSticky-22{top:0;left:auto;right:0;position:sticky}.MuiAppBar-positionStatic-23{position:static}.MuiAppBar-positionRelative-24{position:relative}.MuiAppBar-colorDefault-25{color:rgba(0,0,0,.87);background-color:#f5f5f5}.MuiAppBar-colorPrimary-26{color:#fff;background-color:#3f51b5}.MuiAppBar-colorSecondary-27{color:rgba(0,0,0,.87);background-color:#1de9b6}.MuiAppBar-colorInherit-28{color:inherit}.MuiAppBar-colorTransparent-29{color:inherit;background-color:transparent}.jss58{margin-top:8px;margin-bottom:8px}@media (min-width:0px){.jss58{margin-left:8px;margin-right:8px}}@media (min-width:600px){.jss58{margin-left:16px;margin-right:16px}}.jss171{max-width:500px;margin-top:16px;margin-left:auto;margin-right:auto;margin-bottom:32px}.jss179{margin-top:8px}.jss196{margin-top:8px}.jss378{color:#fff;margin-top:40px;padding-top:40px;padding-bottom:40px;background-color:#3f51b5}.jss382{padding:0;margin-top:0;margin-bottom:0}.MuiTypography-root-68{margin:0}.MuiTypography-body2-69{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;letter-spacing:.01071em}.MuiTypography-body1-70{font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.5;letter-spacing:.00938em}.MuiTypography-caption-71{font-size:.75rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.66;letter-spacing:.03333em}.MuiTypography-button-72{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.75;letter-spacing:.02857em;text-transform:uppercase}.MuiTypography-h1-73{font-size:6rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:300;line-height:1.167;letter-spacing:-.01562em}.MuiTypography-h2-74{font-size:3.75rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:300;line-height:1.2;letter-spacing:-.00833em}.MuiTypography-h3-75{font-size:3rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.167;letter-spacing:0}.MuiTypography-h4-76{font-size:2.125rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.235;letter-spacing:.00735em}.MuiTypography-h5-77{font-size:1.5rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.334;letter-spacing:0}.MuiTypography-h6-78{font-size:1.25rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}.MuiTypography-subtitle1-79{font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.75;letter-spacing:.00938em}.MuiTypography-subtitle2-80{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.57;letter-spacing:.00714em}.MuiTypography-overline-81{font-size:.75rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:2.66;letter-spacing:.08333em;text-transform:uppercase}.MuiTypography-srOnly-82{width:1px;height:1px;overflow:hidden;position:absolute}.MuiTypography-alignLeft-83{text-align:left}.MuiTypography-alignCenter-84{text-align:center}.MuiTypography-alignRight-85{text-align:right}.MuiTypography-alignJustify-86{text-align:justify}.MuiTypography-noWrap-87{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.MuiTypography-gutterBottom-88{margin-bottom:.35em}.MuiTypography-paragraph-89{margin-bottom:16px}.MuiTypography-colorInherit-90{color:inherit}.MuiTypography-colorPrimary-91{color:#3f51b5}.MuiTypography-colorSecondary-92{color:#1de9b6}.MuiTypography-colorTextPrimary-93{color:rgba(0,0,0,.87)}.MuiTypography-colorTextSecondary-94{color:rgba(0,0,0,.54)}.MuiTypography-colorError-95{color:#f44336}.MuiTypography-displayInline-96{display:inline}.MuiTypography-displayBlock-97{display:block}.MuiButton-root-99{color:rgba(0,0,0,.87);padding:6px 16px;font-size:.875rem;min-width:64px;box-sizing:border-box;transition:background-color 250ms cubic-bezier(.4,0,.2,1) 0s,box-shadow 250ms cubic-bezier(.4,0,.2,1) 0s,border 250ms cubic-bezier(.4,0,.2,1) 0s;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.75;border-radius:4px;letter-spacing:.02857em;text-transform:uppercase}.MuiButton-root-99:hover{text-decoration:none;background-color:rgba(0,0,0,.04)}.MuiButton-root-99.Mui-disabled{color:rgba(0,0,0,.26)}@media (hover:none){.MuiButton-root-99:hover{background-color:transparent}}.MuiButton-root-99:hover.Mui-disabled{background-color:transparent}.MuiButton-label-100{width:100%;display:inherit;align-items:inherit;justify-content:inherit}.MuiButton-text-101{padding:6px 8px}.MuiButton-textPrimary-102{color:#3f51b5}.MuiButton-textPrimary-102:hover{background-color:rgba(63,81,181,.04)}@media (hover:none){.MuiButton-textPrimary-102:hover{background-color:transparent}}.MuiButton-textSecondary-103{color:#1de9b6}.MuiButton-textSecondary-103:hover{background-color:rgba(29,233,182,.04)}@media (hover:none){.MuiButton-textSecondary-103:hover{background-color:transparent}}.MuiButton-outlined-104{border:1px solid rgba(0,0,0,.23);padding:5px 15px}.MuiButton-outlined-104.Mui-disabled{border:1px solid rgba(0,0,0,.12)}.MuiButton-outlinedPrimary-105{color:#3f51b5;border:1px solid rgba(63,81,181,.5)}.MuiButton-outlinedPrimary-105:hover{border:1px solid #3f51b5;background-color:rgba(63,81,181,.04)}@media (hover:none){.MuiButton-outlinedPrimary-105:hover{background-color:transparent}}.MuiButton-outlinedSecondary-106{color:#1de9b6;border:1px solid rgba(29,233,182,.5)}.MuiButton-outlinedSecondary-106:hover{border:1px solid #1de9b6;background-color:rgba(29,233,182,.04)}.MuiButton-outlinedSecondary-106.Mui-disabled{border:1px solid rgba(0,0,0,.26)}@media (hover:none){.MuiButton-outlinedSecondary-106:hover{background-color:transparent}}.MuiButton-contained-107{color:rgba(0,0,0,.87);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);background-color:#e0e0e0}.MuiButton-contained-107:hover{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);background-color:#d5d5d5}.MuiButton-contained-107.Mui-focusVisible{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiButton-contained-107:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.MuiButton-contained-107.Mui-disabled{color:rgba(0,0,0,.26);box-shadow:none;background-color:rgba(0,0,0,.12)}@media (hover:none){.MuiButton-contained-107:hover{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);background-color:#e0e0e0}}.MuiButton-contained-107:hover.Mui-disabled{background-color:rgba(0,0,0,.12)}.MuiButton-containedPrimary-108{color:#fff;background-color:#3f51b5}.MuiButton-containedPrimary-108:hover{background-color:#303f9f}@media (hover:none){.MuiButton-containedPrimary-108:hover{background-color:#3f51b5}}.MuiButton-containedSecondary-109{color:rgba(0,0,0,.87);background-color:#1de9b6}.MuiButton-containedSecondary-109:hover{background-color:#00bfa5}@media (hover:none){.MuiButton-containedSecondary-109:hover{background-color:#1de9b6}}.MuiButton-disableElevation-110{box-shadow:none}.MuiButton-disableElevation-110:hover{box-shadow:none}.MuiButton-disableElevation-110.Mui-focusVisible{box-shadow:none}.MuiButton-disableElevation-110:active{box-shadow:none}.MuiButton-disableElevation-110.Mui-disabled{box-shadow:none}.MuiButton-colorInherit-111{color:inherit;border-color:currentColor}.MuiButton-textSizeSmall-112{padding:4px 5px;font-size:.8125rem}.MuiButton-textSizeLarge-113{padding:8px 11px;font-size:.9375rem}.MuiButton-outlinedSizeSmall-114{padding:3px 9px;font-size:.8125rem}.MuiButton-outlinedSizeLarge-115{padding:7px 21px;font-size:.9375rem}.MuiButton-containedSizeSmall-116{padding:4px 10px;font-size:.8125rem}.MuiButton-containedSizeLarge-117{padding:8px 22px;font-size:.9375rem}.MuiButton-fullWidth-120{width:100%}.MuiButton-startIcon-121{display:inherit;margin-left:-4px;margin-right:8px}.MuiButton-startIcon-121.MuiButton-iconSizeSmall-123{margin-left:-2px}.MuiButton-endIcon-122{display:inherit;margin-left:8px;margin-right:-4px}.MuiButton-endIcon-122.MuiButton-iconSizeSmall-123{margin-right:-2px}.MuiButton-iconSizeSmall-123>:first-child{font-size:18px}.MuiButton-iconSizeMedium-124>:first-child{font-size:20px}.MuiButton-iconSizeLarge-125>:first-child{font-size:22px}.MuiCard-root-366{overflow:hidden}.MuiCardActionArea-root-367{width:100%;display:block;text-align:inherit}.MuiCardActionArea-root-367:hover .MuiCardActionArea-focusHighlight-368{opacity:.04}.MuiCardActionArea-root-367.Mui-focusVisible .MuiCardActionArea-focusHighlight-368{opacity:.12}.MuiCardActionArea-focusHighlight-368{top:0;left:0;right:0;bottom:0;opacity:0;overflow:hidden;position:absolute;transition:opacity 250ms cubic-bezier(.4,0,.2,1) 0s;border-radius:inherit;pointer-events:none;background-color:currentcolor}.MuiCardContent-root-372{padding:16px}.MuiCardContent-root-372:last-child{padding-bottom:24px}.MuiCardMedia-root-369{display:block;background-size:cover;background-repeat:no-repeat;background-position:center}.MuiCardMedia-media-370{width:100%}.MuiCardMedia-img-371{-o-object-fit:cover;object-fit:cover}.MuiContainer-root-156{width:100%;display:block;box-sizing:border-box;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px}@media (min-width:600px){.MuiContainer-root-156{padding-left:24px;padding-right:24px}}.MuiContainer-disableGutters-157{padding-left:0;padding-right:0}@media (min-width:600px){.MuiContainer-fixed-158{max-width:600px}}@media (min-width:960px){.MuiContainer-fixed-158{max-width:960px}}@media (min-width:1280px){.MuiContainer-fixed-158{max-width:1280px}}@media (min-width:1920px){.MuiContainer-fixed-158{max-width:1920px}}@media (min-width:0px){.MuiContainer-maxWidthXs-159{max-width:444px}}@media (min-width:600px){.MuiContainer-maxWidthSm-160{max-width:600px}}@media (min-width:960px){.MuiContainer-maxWidthMd-161{max-width:960px}}@media (min-width:1280px){.MuiContainer-maxWidthLg-162{max-width:1280px}}@media (min-width:1920px){.MuiContainer-maxWidthXl-163{max-width:1920px}}.MuiDivider-root-252{border:none;height:1px;margin:0;flex-shrink:0;background-color:rgba(0,0,0,.12)}.MuiDivider-absolute-253{left:0;width:100%;bottom:0;position:absolute}.MuiDivider-inset-254{margin-left:72px}.MuiDivider-light-255{background-color:rgba(0,0,0,.08)}.MuiDivider-middle-256{margin-left:16px;margin-right:16px}.MuiDivider-vertical-257{width:1px;height:100%}.MuiDivider-flexItem-258{height:auto;align-self:stretch}.MuiDrawer-docked-145{flex:0 0 auto}.MuiDrawer-paper-146{top:0;flex:1 0 auto;height:100%;display:flex;outline:0;z-index:1200;position:fixed;overflow-y:auto;flex-direction:column;-webkit-overflow-scrolling:touch}.MuiDrawer-paperAnchorLeft-147{left:0;right:auto}.MuiDrawer-paperAnchorRight-148{left:auto;right:0}.MuiDrawer-paperAnchorTop-149{top:0;left:0;right:0;bottom:auto;height:auto;max-height:100%}.MuiDrawer-paperAnchorBottom-150{top:auto;left:0;right:0;bottom:0;height:auto;max-height:100%}.MuiDrawer-paperAnchorDockedLeft-151{border-right:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedTop-152{border-bottom:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedRight-153{border-left:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedBottom-154{border-top:1px solid rgba(0,0,0,.12)}.MuiFab-root-385{color:rgba(0,0,0,.87);width:56px;height:56px;padding:0;font-size:.875rem;min-width:0;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);box-sizing:border-box;min-height:36px;transition:background-color 250ms cubic-bezier(.4,0,.2,1) 0s,box-shadow 250ms cubic-bezier(.4,0,.2,1) 0s,border 250ms cubic-bezier(.4,0,.2,1) 0s;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.75;border-radius:50%;letter-spacing:.02857em;text-transform:uppercase;background-color:#e0e0e0}.MuiFab-root-385:active{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.MuiFab-root-385:hover{text-decoration:none;background-color:#d5d5d5}.MuiFab-root-385.Mui-focusVisible{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiFab-root-385.Mui-disabled{color:rgba(0,0,0,.26);box-shadow:none;background-color:rgba(0,0,0,.12)}@media (hover:none){.MuiFab-root-385:hover{background-color:#e0e0e0}}.MuiFab-root-385:hover.Mui-disabled{background-color:rgba(0,0,0,.12)}.MuiFab-label-386{width:100%;display:inherit;align-items:inherit;justify-content:inherit}.MuiFab-primary-387{color:#fff;background-color:#3f51b5}.MuiFab-primary-387:hover{background-color:#303f9f}@media (hover:none){.MuiFab-primary-387:hover{background-color:#3f51b5}}.MuiFab-secondary-388{color:rgba(0,0,0,.87);background-color:#1de9b6}.MuiFab-secondary-388:hover{background-color:#00bfa5}@media (hover:none){.MuiFab-secondary-388:hover{background-color:#1de9b6}}.MuiFab-extended-389{width:auto;height:48px;padding:0 16px;min-width:48px;min-height:auto;border-radius:24px}.MuiFab-extended-389.MuiFab-sizeSmall-391{width:auto;height:34px;padding:0 8px;min-width:34px;border-radius:17px}.MuiFab-extended-389.MuiFab-sizeMedium-392{width:auto;height:40px;padding:0 16px;min-width:40px;border-radius:20px}.MuiFab-colorInherit-390{color:inherit}.MuiFab-sizeSmall-391{width:40px;height:40px}.MuiFab-sizeMedium-392{width:48px;height:48px}.MuiInputBase-root-226{color:rgba(0,0,0,.87);cursor:text;display:inline-flex;position:relative;font-size:1rem;box-sizing:border-box;align-items:center;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.1876em;letter-spacing:.00938em}.MuiInputBase-root-226.Mui-disabled{color:rgba(0,0,0,.38);cursor:default}.MuiInputBase-multiline-231{padding:6px 0 7px}.MuiInputBase-multiline-231.MuiInputBase-marginDense-230{padding-top:3px}.MuiInputBase-fullWidth-233{width:100%}.MuiInputBase-input-234{font:inherit;color:currentColor;width:100%;border:0;height:1.1876em;margin:0;display:block;padding:6px 0 7px;min-width:0;background:0 0;box-sizing:content-box;animation-name:mui-auto-fill-cancel;letter-spacing:inherit;animation-duration:10ms;-webkit-tap-highlight-color:transparent}.MuiInputBase-input-234::-webkit-input-placeholder{color:currentColor;opacity:.42;-webkit-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s}.MuiInputBase-input-234::-moz-placeholder{color:currentColor;opacity:.42;-moz-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s}.MuiInputBase-input-234:-ms-input-placeholder{color:currentColor;opacity:.42;-ms-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s}.MuiInputBase-input-234::-ms-input-placeholder{color:currentColor;opacity:.42;-ms-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s}.MuiInputBase-input-234:focus{outline:0}.MuiInputBase-input-234:invalid{box-shadow:none}.MuiInputBase-input-234::-webkit-search-decoration{-webkit-appearance:none}.MuiInputBase-input-234.Mui-disabled{opacity:1}.MuiInputBase-input-234:-webkit-autofill{animation-name:mui-auto-fill;animation-duration:5000s}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234::-webkit-input-placeholder{opacity:0!important}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234::-moz-placeholder{opacity:0!important}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:-ms-input-placeholder{opacity:0!important}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234::-ms-input-placeholder{opacity:0!important}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:focus::-webkit-input-placeholder{opacity:.42}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:focus::-moz-placeholder{opacity:.42}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:focus:-ms-input-placeholder{opacity:.42}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:focus::-ms-input-placeholder{opacity:.42}.MuiInputBase-inputMarginDense-235{padding-top:3px}.MuiInputBase-inputMultiline-236{height:auto;resize:none;padding:0}.MuiInputBase-inputTypeSearch-237{-moz-appearance:textfield;-webkit-appearance:textfield}.MuiFormControl-root-198{border:0;margin:0;display:inline-flex;padding:0;position:relative;min-width:0;flex-direction:column;vertical-align:top}.MuiFormControl-marginNormal-199{margin-top:16px;margin-bottom:8px}.MuiFormControl-marginDense-200{margin-top:8px;margin-bottom:4px}.MuiFormControl-fullWidth-201{width:100%}.MuiFormLabel-root-210{color:rgba(0,0,0,.54);padding:0;font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1;letter-spacing:.00938em}.MuiFormLabel-root-210.Mui-focused{color:#3f51b5}.MuiFormLabel-root-210.Mui-disabled{color:rgba(0,0,0,.38)}.MuiFormLabel-root-210.Mui-error{color:#f44336}.MuiFormLabel-colorSecondary-211.Mui-focused{color:#1de9b6}.MuiFormLabel-asterisk-213.Mui-error{color:#f44336}.MuiGrid-container-262{width:100%;display:flex;flex-wrap:wrap;box-sizing:border-box}.MuiGrid-item-263{margin:0;box-sizing:border-box}.MuiGrid-zeroMinWidth-264{min-width:0}.MuiGrid-direction-xs-column-265{flex-direction:column}.MuiGrid-direction-xs-column-reverse-266{flex-direction:column-reverse}.MuiGrid-direction-xs-row-reverse-267{flex-direction:row-reverse}.MuiGrid-wrap-xs-nowrap-268{flex-wrap:nowrap}.MuiGrid-wrap-xs-wrap-reverse-269{flex-wrap:wrap-reverse}.MuiGrid-align-items-xs-center-270{align-items:center}.MuiGrid-align-items-xs-flex-start-271{align-items:flex-start}.MuiGrid-align-items-xs-flex-end-272{align-items:flex-end}.MuiGrid-align-items-xs-baseline-273{align-items:baseline}.MuiGrid-align-content-xs-center-274{align-content:center}.MuiGrid-align-content-xs-flex-start-275{align-content:flex-start}.MuiGrid-align-content-xs-flex-end-276{align-content:flex-end}.MuiGrid-align-content-xs-space-between-277{align-content:space-between}.MuiGrid-align-content-xs-space-around-278{align-content:space-around}.MuiGrid-justify-xs-center-279{justify-content:center}.MuiGrid-justify-xs-flex-end-280{justify-content:flex-end}.MuiGrid-justify-xs-space-between-281{justify-content:space-between}.MuiGrid-justify-xs-space-around-282{justify-content:space-around}.MuiGrid-justify-xs-space-evenly-283{justify-content:space-evenly}.MuiGrid-spacing-xs-1-284{width:calc(100% + 8px);margin:-4px}.MuiGrid-spacing-xs-1-284>.MuiGrid-item-263{padding:4px}.MuiGrid-spacing-xs-2-285{width:calc(100% + 16px);margin:-8px}.MuiGrid-spacing-xs-2-285>.MuiGrid-item-263{padding:8px}.MuiGrid-spacing-xs-3-286{width:calc(100% + 24px);margin:-12px}.MuiGrid-spacing-xs-3-286>.MuiGrid-item-263{padding:12px}.MuiGrid-spacing-xs-4-287{width:calc(100% + 32px);margin:-16px}.MuiGrid-spacing-xs-4-287>.MuiGrid-item-263{padding:16px}.MuiGrid-spacing-xs-5-288{width:calc(100% + 40px);margin:-20px}.MuiGrid-spacing-xs-5-288>.MuiGrid-item-263{padding:20px}.MuiGrid-spacing-xs-6-289{width:calc(100% + 48px);margin:-24px}.MuiGrid-spacing-xs-6-289>.MuiGrid-item-263{padding:24px}.MuiGrid-spacing-xs-7-290{width:calc(100% + 56px);margin:-28px}.MuiGrid-spacing-xs-7-290>.MuiGrid-item-263{padding:28px}.MuiGrid-spacing-xs-8-291{width:calc(100% + 64px);margin:-32px}.MuiGrid-spacing-xs-8-291>.MuiGrid-item-263{padding:32px}.MuiGrid-spacing-xs-9-292{width:calc(100% + 72px);margin:-36px}.MuiGrid-spacing-xs-9-292>.MuiGrid-item-263{padding:36px}.MuiGrid-spacing-xs-10-293{width:calc(100% + 80px);margin:-40px}.MuiGrid-spacing-xs-10-293>.MuiGrid-item-263{padding:40px}.MuiGrid-grid-xs-auto-294{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-xs-true-295{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-xs-1-296{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-xs-2-297{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-xs-3-298{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-xs-4-299{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-xs-5-300{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-xs-6-301{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-xs-7-302{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-xs-8-303{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-xs-9-304{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-xs-10-305{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-xs-11-306{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-xs-12-307{flex-grow:0;max-width:100%;flex-basis:100%}@media (min-width:600px){.MuiGrid-grid-sm-auto-308{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-sm-true-309{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-sm-1-310{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-sm-2-311{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-sm-3-312{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-sm-4-313{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-sm-5-314{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-sm-6-315{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-sm-7-316{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-sm-8-317{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-sm-9-318{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-sm-10-319{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-sm-11-320{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-sm-12-321{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:960px){.MuiGrid-grid-md-auto-322{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-md-true-323{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-md-1-324{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-md-2-325{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-md-3-326{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-md-4-327{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-md-5-328{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-md-6-329{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-md-7-330{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-md-8-331{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-md-9-332{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-md-10-333{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-md-11-334{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-md-12-335{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:1280px){.MuiGrid-grid-lg-auto-336{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-lg-true-337{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-lg-1-338{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-lg-2-339{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-lg-3-340{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-lg-4-341{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-lg-5-342{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-lg-6-343{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-lg-7-344{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-lg-8-345{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-lg-9-346{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-lg-10-347{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-lg-11-348{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-lg-12-349{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:1920px){.MuiGrid-grid-xl-auto-350{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-xl-true-351{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-xl-1-352{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-xl-2-353{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-xl-3-354{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-xl-4-355{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-xl-5-356{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-xl-6-357{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-xl-7-358{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-xl-8-359{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-xl-9-360{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-xl-10-361{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-xl-11-362{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-xl-12-363{flex-grow:0;max-width:100%;flex-basis:100%}}.MuiInputAdornment-root-241{height:.01em;display:flex;max-height:2em;align-items:center;white-space:nowrap}.MuiInputAdornment-filled-242.MuiInputAdornment-positionStart-243:not(.MuiInputAdornment-hiddenLabel-246){margin-top:16px}.MuiInputAdornment-positionStart-243{margin-right:8px}.MuiInputAdornment-positionEnd-244{margin-left:8px}.MuiInputAdornment-disablePointerEvents-245{pointer-events:none}.MuiInputLabel-root-202{display:block;transform-origin:top left}.MuiInputLabel-formControl-204{top:0;left:0;position:absolute;transform:translate(0,24px) scale(1)}.MuiInputLabel-marginDense-205{transform:translate(0,21px) scale(1)}.MuiInputLabel-shrink-206{transform:translate(0,1.5px) scale(.75);transform-origin:top left}.MuiInputLabel-animated-207{transition:color .2s cubic-bezier(0,0,.2,1) 0s,transform .2s cubic-bezier(0,0,.2,1) 0s}.MuiInputLabel-filled-208{z-index:1;transform:translate(12px,20px) scale(1);pointer-events:none}.MuiInputLabel-filled-208.MuiInputLabel-marginDense-205{transform:translate(12px,17px) scale(1)}.MuiInputLabel-filled-208.MuiInputLabel-shrink-206{transform:translate(12px,10px) scale(.75)}.MuiInputLabel-filled-208.MuiInputLabel-shrink-206.MuiInputLabel-marginDense-205{transform:translate(12px,7px) scale(.75)}.MuiInputLabel-outlined-209{z-index:1;transform:translate(14px,20px) scale(1);pointer-events:none}.MuiInputLabel-outlined-209.MuiInputLabel-marginDense-205{transform:translate(14px,12px) scale(1)}.MuiInputLabel-outlined-209.MuiInputLabel-shrink-206{transform:translate(14px,-6px) scale(.75)}.MuiLink-underlineNone-64{text-decoration:none}.MuiLink-underlineHover-65{text-decoration:none}.MuiLink-underlineHover-65:hover{text-decoration:underline}.MuiLink-underlineAlways-66{text-decoration:underline}.MuiLink-button-67{border:0;cursor:pointer;margin:0;outline:0;padding:0;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.MuiLink-button-67::-moz-focus-inner{border-style:none}.MuiLink-button-67.Mui-focusVisible{outline:auto}.jss248{top:-5px;left:0;right:0;bottom:0;margin:0;padding:0 8px;overflow:hidden;position:absolute;border-style:solid;border-width:1px;border-radius:inherit;pointer-events:none}.jss249{padding:0;text-align:left;transition:width 150ms cubic-bezier(0,0,.2,1) 0s;line-height:11px}.jss250{width:auto;height:11px;display:block;padding:0;font-size:.75em;max-width:.01px;text-align:left;transition:max-width 50ms cubic-bezier(0,0,.2,1) 0s;visibility:hidden}.jss250>span{display:inline-block;padding-left:5px;padding-right:5px}.jss251{max-width:1000px;transition:max-width .1s cubic-bezier(0,0,.2,1) 50ms}.MuiOutlinedInput-root-214{position:relative;border-radius:4px}.MuiOutlinedInput-root-214:hover .MuiOutlinedInput-notchedOutline-220{border-color:rgba(0,0,0,.87)}@media (hover:none){.MuiOutlinedInput-root-214:hover .MuiOutlinedInput-notchedOutline-220{border-color:rgba(0,0,0,.23)}}.MuiOutlinedInput-root-214.Mui-focused .MuiOutlinedInput-notchedOutline-220{border-color:#3f51b5;border-width:2px}.MuiOutlinedInput-root-214.Mui-error .MuiOutlinedInput-notchedOutline-220{border-color:#f44336}.MuiOutlinedInput-root-214.Mui-disabled .MuiOutlinedInput-notchedOutline-220{border-color:rgba(0,0,0,.26)}.MuiOutlinedInput-colorSecondary-215.Mui-focused .MuiOutlinedInput-notchedOutline-220{border-color:#1de9b6}.MuiOutlinedInput-adornedStart-216{padding-left:14px}.MuiOutlinedInput-adornedEnd-217{padding-right:14px}.MuiOutlinedInput-multiline-219{padding:18.5px 14px}.MuiOutlinedInput-multiline-219.MuiOutlinedInput-marginDense-218{padding-top:10.5px;padding-bottom:10.5px}.MuiOutlinedInput-notchedOutline-220{border-color:rgba(0,0,0,.23)}.MuiOutlinedInput-input-221{padding:18.5px 14px}.MuiOutlinedInput-input-221:-webkit-autofill{border-radius:inherit}.MuiOutlinedInput-inputMarginDense-222{padding-top:10.5px;padding-bottom:10.5px}.MuiOutlinedInput-inputMultiline-223{padding:0}.MuiOutlinedInput-inputAdornedStart-224{padding-left:0}.MuiOutlinedInput-inputAdornedEnd-225{padding-right:0}.MuiToolbar-root-59{display:flex;position:relative;align-items:center}.MuiToolbar-gutters-60{padding-left:16px;padding-right:16px}@media (min-width:600px){.MuiToolbar-gutters-60{padding-left:24px;padding-right:24px}}.MuiToolbar-regular-61{min-height:56px}@media (min-width:0px) and (orientation:landscape){.MuiToolbar-regular-61{min-height:48px}}@media (min-width:600px){.MuiToolbar-regular-61{min-height:64px}}.MuiToolbar-dense-62{min-height:48px}.jss12{justify-content:space-between}@media (min-width:768px){.jss12{justify-content:flex-start}}.jss13{width:60px;height:60px;margin-right:8px;border-radius:50%}.jss14{flex:1}@media (min-width:768px){.jss14{flex:unset}}.jss15{flex:1;display:none}@media (min-width:768px){.jss15{display:flex;justify-content:flex-end}}.jss16{margin-left:8px}.jss17{border:1px solid currentcolor;padding:8px}@media (min-width:768px){.jss18{display:none}}.jss380{display:flex;justify-content:center}@media (min-width:960px){.jss380{justify-content:flex-end}}.jss381{list-style:none}.MuiAlert-root-180{display:flex;padding:6px 16px;font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;border-radius:4px;letter-spacing:.01071em;background-color:transparent}.MuiAlert-standardSuccess-181{color:#1e4620;background-color:#edf7ed}.MuiAlert-standardSuccess-181 .MuiAlert-icon-193{color:#4caf50}.MuiAlert-standardInfo-182{color:#0d3c61;background-color:#e8f4fd}.MuiAlert-standardInfo-182 .MuiAlert-icon-193{color:#2196f3}.MuiAlert-standardWarning-183{color:#663c00;background-color:#fff4e5}.MuiAlert-standardWarning-183 .MuiAlert-icon-193{color:#ff9800}.MuiAlert-standardError-184{color:#611a15;background-color:#fdecea}.MuiAlert-standardError-184 .MuiAlert-icon-193{color:#f44336}.MuiAlert-outlinedSuccess-185{color:#1e4620;border:1px solid #4caf50}.MuiAlert-outlinedSuccess-185 .MuiAlert-icon-193{color:#4caf50}.MuiAlert-outlinedInfo-186{color:#0d3c61;border:1px solid #2196f3}.MuiAlert-outlinedInfo-186 .MuiAlert-icon-193{color:#2196f3}.MuiAlert-outlinedWarning-187{color:#663c00;border:1px solid #ff9800}.MuiAlert-outlinedWarning-187 .MuiAlert-icon-193{color:#ff9800}.MuiAlert-outlinedError-188{color:#611a15;border:1px solid #f44336}.MuiAlert-outlinedError-188 .MuiAlert-icon-193{color:#f44336}.MuiAlert-filledSuccess-189{color:#fff;font-weight:500;background-color:#4caf50}.MuiAlert-filledInfo-190{color:#fff;font-weight:500;background-color:#2196f3}.MuiAlert-filledWarning-191{color:#fff;font-weight:500;background-color:#ff9800}.MuiAlert-filledError-192{color:#fff;font-weight:500;background-color:#f44336}.MuiAlert-icon-193{display:flex;opacity:.9;padding:7px 0;font-size:22px;margin-right:12px}.MuiAlert-message-194{padding:8px 0}.MuiAlert-action-195{display:flex;align-items:center;margin-left:auto;margin-right:-8px;padding-left:16px}.jss172{padding:16px;text-align:center}.jss173{margin-top:8px}.jss373{display:grid;grid-row-gap:24px;justify-items:center;grid-column-gap:16px;grid-template-rows:auto;grid-template-areas:"links" "info" "subscribe" "finePrint";grid-template-columns:auto}@media (min-width:600px){.jss373{grid-template-rows:1fr auto 1fr;grid-template-areas:"subscribe links" "subscribe info" "subscribe finePrint";grid-template-columns:auto 1fr}}.jss374{grid-area:links;align-self:flex-end}.jss375{grid-area:info}.jss376{grid-area:subscribe;max-width:350px}.jss377{grid-area:finePrint}.jss384{right:16px;bottom:16px;position:fixed}.jss4{background-color:#fafafa}.jss5{top:auto;left:-10000px;width:1px;height:1px;overflow:hidden;position:absolute}.jss7{right:16px;bottom:16px;position:fixed}.jss8{height:82px}.jss9{min-height:100vh;margin-top:16px}.jss169{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center}.jss170:not(:first-child){margin-left:8px}.jss364{height:266.66667px}.jss365{flex:1;margin-right:16px}.jss166 h2{font-size:1.5rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.334;letter-spacing:0}.jss166 h3{font-size:1.25rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}.jss166 h4{font-size:1.25rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}.jss166 h5{font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.75;letter-spacing:.00938em}.jss166 h6{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.57;letter-spacing:.00714em}.jss166 p{margin:0 0 16px 0;font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.5;letter-spacing:.00938em}.jss166 p>img{width:100%;margin:0 auto;display:block;max-width:800px}.jss166 p>.gatsby-resp-image-wrapper+em{margin:8px 16px;display:block;font-size:.75rem;max-width:800px;text-align:right;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.66;letter-spacing:.03333em}.jss166 ul{padding:0 0 0 24px;list-style:circle}.jss166 li{margin:0 0 8px 0}.jss166 a:not(.anchor){color:#3f51b5}.jss166 blockquote{margin:20px 0 20px 40px;padding:12px;font-style:italic;border-left:5px solid #1de9b6}.jss166 hr{width:50%;border:none;height:1px;margin:32px auto;background-color:rgba(0,0,0,.12)}.jss166 .gatsby-highlight{margin-bottom:24px}.jss166 .gatsby-resp-iframe-wrapper{margin:0 0 24px 16px}.jss166 .twitter-tweet{margin:0 auto 16px auto}.jss166 blockquote p{margin:0}@media (min-width:960px){.jss166 ul{padding:0 0 0 32px}}.jss259{text-align:center}.jss260{width:80px;height:80px;margin:0 auto;border-radius:50%}.jss167{margin-top:16px;margin-bottom:16px}.jss1{margin-bottom:24px}.jss2{margin-top:24px}.jss3{margin-top:16px;margin-bottom:16px}</style><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc4.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxK.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4.woff2"/><style>@font-face{font-family:Roboto;font-style:normal;font-weight:300;src:url(/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(/static/webfonts/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:500;src:url(/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:300;src:url(/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc-.woff) format("woff");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(/static/webfonts/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxM.woff) format("woff");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:500;src:url(/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc-.woff) format("woff");font-display:swap}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="Ben Ilegbodu Blog RSS Feed" href="/blog/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-6ce994167e49a78e1877.js"/><link as="script" rel="preload" href="/styles-2416da4fc4c075b56691.js"/><link as="script" rel="preload" href="/framework-4b86d917a023bb3f8d06.js"/><link as="script" rel="preload" href="/app-e24077c4e63092cb7e7a.js"/><link as="script" rel="preload" href="/commons-9c3f5f586f099fa6aeed.js"/><link as="script" rel="preload" href="/67b0b73ca5ef5a715ae49b4d20728b3d9c676d49-806d5139e281bb720cc6.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-0d9430f06be996e24ca9.js"/><link as="fetch" rel="preload" href="/page-data/blog/8-helpful-custom-react-hooks/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2495720375.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/307212292.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4260024542.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/520305385.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/58428228.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><section class="MuiBox-root-10 jss11 jss4"><a href="#skip-heading" class="jss5">Skip Main Navigation</a><header class="MuiPaper-root-30 MuiAppBar-root-19 MuiAppBar-positionFixed-20 MuiAppBar-colorPrimary-26 mui-fixed MuiPaper-elevation4-37"><section class="MuiBox-root-10 jss58"><div class="MuiToolbar-root-59 MuiToolbar-regular-61 jss12"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90" aria-label="Go to homepage" href="/"><div class="jss13 gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:60px;height:60px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAG66AABuugHW3rEXAAAE4ElEQVR42m2Ta0xTZxjHWyhbIs6gbm4WOxUVxNoCvdHa0tMLvRePRcqthdIqAi0INYWBMJmKF9RBh9xcRTZQcXiJJhuLmwn7sjg0WeZgbm5xblmyD1uWfViyD0D73zlHzWz0TZ6c2//5nef/vs/DYj1ZBEEwV3GulpW8JIn14/dgr0oT6DdvER8jFar+Gk3eMa9qG8lhs5MAsGxZAjatt2zcyHrhooGbt4oZkUSyjbcuXXhSksn/a49Oi66iwthItTfW73Gh2Wq66RBlv0rrPHlK9gthnZ2drE0ZAuY+Z6sgOVMg2a8RiaYCBh067Jb5ju22hQv1tQvXgg0LQ94KBPSam5SUQ+tJUfaLK1Qo1AkMUCy3q8RSXzmR93vAbER7gTUWpMBDVW5MtewDVeVCR4EV5Wp1A61vzCcSnoNlCx5XJ9y4PlkqzT1BynPbK3QaaISCKJ+3BlpRDvRiKXxaDTpIe7TJqEdhruwLOmfucMfztgmlinmpEGWvNxotk55i1/UMCpTO5UalG9JgMuSDn6VE8vK1WL40GatXpyF1TQaWvrIiQudpTXWsxMTEZ+zKpAzwzTdWbnWVVUa7eyIgjRbs1qphyRZCLpNCJFZiHW8TinIlSOVtWeRtkGL5ytTrdF46Xx9vW67MZ/AimdZhMFhx6Eg4uremAW6VAqfKi9G6owAkBarVERioLIcqkx/NTM/C+rTNRXTeFr4kHijLszFAqXqHS6Ozor4hNN/gD8aKFbk4UebE6UoXWqwmVFPAZrsFzeb8xXdra9F2qMdO5x093pcYB8yREozljCxinVqt/8PpKMRO0hErz1MiZDGiWqOGIJWLzNdXMWEX8hEqd89797YxPROoD8VXyOVyWUajjYGKskRCpUL5kU4m/dtLnXSb3RLzU5W5DXr0BBtxwOeNetQqePS6g7R+osrN3sDjxZ+y3Blkrlqjh/kTV1zGLVVrvqnSEnjLZo5S04GgzYLh1tbYjZMn4TcZf3FJsphpqZCJ2NPT0/HAppZBtr9tghOien/oK3AI8667u802VOsJCmaGV60EvZ8hk2ExaDTALhY10nm1rkCSydHEMJyTk49ho1d/TaSHvWTfx8xzScN4gaOyC+48OZrMBlRTVoVUTyZxOBCs5YG7IgXsl5bIae2S5GUJE5/8mdAbuZPYenDi/wavq+9KcdX1OUsD525VBC/Oe5qvwEn64CMUqDNoYcjJxmspKeAkvRzLEOpRseudB+Gzd0LNnRc2PWXcmJ5n90ZmElhdvZ/1hyMzv4VHv0XNgU9REhiNuYMT8DRfBUnWwKU3wU+NWhGhB6Hajp3ut9E9dBuUMwx8eO/fnjO3r1GMktpg37LHlq88QuTSTxg+/120d+TrxZbjt1Dqj6DQ14PtvjBKXe3U/olgM5RAZa4HWRzE0Pn70aHxucWBsTmMTP5MxUOEz959eOjUVAFrcHxuYXBsNkYFJZzD2UsP4G+/DJm6GI6qbpSUNaNEngM72QC7+zCO9H6O90bv4cTwHXRTMTA2u0gxFs9dfoQzF3/4hwLO4mkM0NDxOYTP3cOe0AcgK4+BLN2PInMRjFYfnBUd6OqfoSzPoI+C0lo6mPyx2ejwhfvROOAg/fEJ9P2JB+g6/SU8jSMw2XdBb65E+/Ep2i61PU9AY8/mMhH7DwkiXhzU3azSAAAAAElFTkSuQmCC" alt="Ben Ilegbodu" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/2b60dd7e58e084c6192b8f4d7c81d91d/183c2/benmvp-logo.png 1x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/847e4/benmvp-logo.png 1.5x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/e94d6/benmvp-logo.png 2x" /><img loading="lazy" width="60" height="60" srcset="/static/2b60dd7e58e084c6192b8f4d7c81d91d/183c2/benmvp-logo.png 1x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/847e4/benmvp-logo.png 1.5x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/e94d6/benmvp-logo.png 2x" src="/static/2b60dd7e58e084c6192b8f4d7c81d91d/183c2/benmvp-logo.png" alt="Ben Ilegbodu" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 jss14 MuiTypography-h5-77 MuiTypography-colorInherit-90" aria-label="Go to homepage" href="/">Ben Ilegbodu</a><nav class="MuiBox-root-10 jss98 jss15" aria-label="main site navigation links"><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111 jss17" tabindex="0" role="button" aria-disabled="false" aria-label="Read Ben&#x27;s blog posts" href="/blog/"><span class="MuiButton-label-100">Blog</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Watch Ben&#x27;s past tech talks" href="/videos/"><span class="MuiButton-label-100">Videos</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Attend one of Ben&#x27;s speaking engagements" href="/speak/"><span class="MuiButton-label-100">Speak</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Develop from one of Ben&#x27;s remote minishop" href="/minishops/"><span class="MuiButton-label-100">Minishops</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Check out some of Ben&#x27;s dev projects" href="/projects/"><span class="MuiButton-label-100">Projects</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Learn more about Ben" href="/about/"><span class="MuiButton-label-100">About</span></a></nav><button class="MuiButtonBase-root-126 MuiIconButton-root-127 jss18 MuiIconButton-colorInherit-130 MuiIconButton-edgeStart-128" tabindex="0" type="button" aria-label="open navigation menu"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button></div></section></header><div class="MuiToolbar-root-59 MuiToolbar-regular-61 jss8 MuiToolbar-gutters-60" id="back-to-top-anchor"></div><div class="MuiContainer-root-156 jss6 jss9 MuiContainer-maxWidthMd-161" id="skip-heading"><main class="MuiBox-root-10 jss164"><header class="MuiBox-root-10 jss165 jss1"><h1 class="MuiTypography-root-68 MuiTypography-h4-76 MuiTypography-gutterBottom-88">8 helpful custom React Hooks</h1><h2 class="MuiTypography-root-68 MuiTypography-h6-78 MuiTypography-gutterBottom-88">Implementations &amp; explanations for custom React Hooks like usePrevious, useMedia, useDeepCompareEffect &amp; more</h2><p class="MuiTypography-root-68 MuiTypography-subtitle2-80 MuiTypography-gutterBottom-88">February 07, 2021<!-- --> Â· <!-- -->14<!-- --> min read</p></header><article class="MuiTypography-root-68 jss166 MuiTypography-body1-70"><p>Custom React Hooks allow us to extract component logic into reusable functions. Custom Hooks look very much like normal helper functions, except they can maintain component state and perform effects. There are many common actions that we do in our React applications that can be wrapped up in a custom Hook.</p>
<p>So letâ€™s take a look at the implementations of 8 different custom Hooks. Each implementation will include code comments as well as a potential use case. And since Iâ€™m a TypeScript fan, Iâ€™ll also provide a second implementation in TypeScript when there is any TypeScript uniqueness. ðŸ˜„</p>
<p>Youâ€™ll find flavors of many of these custom Hooks in the <a href="https://github.com/streamich/react-use" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">react-use</code></a> package. So if you find yourself using a lot of these Hooks, you might as well import the package.</p>
<p>Letâ€™s jump in!</p>
<hr>
<h2 id="code-classlanguage-textuseinitialmountcode" style="position:relative;"><a href="#code-classlanguage-textuseinitialmountcode" aria-label="code classlanguage textuseinitialmountcode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">useInitialMount</code></h2>
<p>Sometimes we only want to run an effect the very first time the component mounts. In my experience, the majority of these times have been firing off a tracking event. Usually Iâ€™ll maintain a <code class="language-text">hasSent</code> local variable that I flip from <code class="language-text">false</code> to <code class="language-text">true</code> after Iâ€™ve sent it the first time. But instead, we can use a <code class="language-text">useInitialMount</code> custom Hook.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">useInitialMount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// refs exist across component re-renders, so</span>
  <span class="token comment">// we can use it to store a value for the</span>
  <span class="token comment">// subsequent renders. We're tracking if it's</span>
  <span class="token comment">// the first render, which is initially `true`</span>
  <span class="token keyword">const</span> isFirst <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token comment">// the very first render, the ref will be</span>
  <span class="token comment">// `true`. but we immediately set it to `false`</span>
  <span class="token comment">// so that every render after will be `false`</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isFirst<span class="token punctuation">.</span>current<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isFirst<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span>

    <span class="token comment">// return true the very first render</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// return false every following render</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Page</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> pageName<span class="token punctuation">,</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> isInitialMount <span class="token operator">=</span> <span class="token function">useInitialMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// only call `trackEvent` for initial mount.</span>
    <span class="token comment">// don't call it ever again, even if</span>
    <span class="token comment">// `pageName` or `items.length` change</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isInitialMount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">trackEvent</span><span class="token punctuation">(</span>pageName<span class="token punctuation">,</span> items<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>pageName<span class="token punctuation">,</span> items<span class="token punctuation">.</span>length<span class="token punctuation">,</span> isInitialMount<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// render UI</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<hr>
<h2 id="code-classlanguage-textusepreviouscode" style="position:relative;"><a href="#code-classlanguage-textusepreviouscode" aria-label="code classlanguage textusepreviouscode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">usePrevious</code></h2>
<p>Sometimes we need to know the previous value of props or state to compare it to a current value. The <code class="language-text">usePrevious</code> Hook is so common that it shows up in the <a href="https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state" target="_blank" rel="nofollow noopener noreferrer">React Hooks FAQ</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">usePrevious</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    ref<span class="token punctuation">.</span>current <span class="token operator">=</span> value
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> ref<span class="token punctuation">.</span>current
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>However, the FAQ code above has a potential gotcha in that if the component re-renders for another reason (for instance, a change in another state value), then our previous value gets overwritten even though it technically hasnâ€™t changed.</p>
<p>We likely want a <code class="language-text">usePrevious</code> that only updates the previous value if it differs from the new value.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">usePrevious</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// use refs to keep track of both the previous &amp;</span>
  <span class="token comment">// current values</span>
  <span class="token keyword">const</span> prevRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> curRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> isInitialMount <span class="token operator">=</span> <span class="token function">useInitialMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token comment">// after the initial render, if the value passed in</span>
  <span class="token comment">// differs from the `curRef`, then we know that the</span>
  <span class="token comment">// value we're tracking actually changed. we can</span>
  <span class="token comment">// update the refs. otherwise if the `curRef` &amp;</span>
  <span class="token comment">// value are the same, something else caused the</span>
  <span class="token comment">// re-render and we should *not* update `prevRef`.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isInitialMount <span class="token operator">&amp;&amp;</span> curRef<span class="token punctuation">.</span>current <span class="token operator">!==</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    prevRef<span class="token punctuation">.</span>current <span class="token operator">=</span> curRef<span class="token punctuation">.</span>current
    curRef<span class="token punctuation">.</span>current <span class="token operator">=</span> value
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> prevRef<span class="token punctuation">.</span>current
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Example</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>time<span class="token punctuation">,</span> setTime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token comment">// use `usePrevious` to keep track of the `count`</span>
  <span class="token comment">// from the last time it changed</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> prevCount <span class="token operator">=</span> <span class="token function">usePrevious</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span></span>
  <span class="token comment">// update `date` every 1 sec to have another state updating</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> intervalId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>intervalId<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">curCount</span><span class="token punctuation">)</span> <span class="token operator">=></span> curCount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">curCount</span><span class="token punctuation">)</span> <span class="token operator">=></span> curCount <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&lt;</span>p<span class="token operator">></span>
        Count<span class="token operator">:</span> <span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">,</span> Old Count<span class="token operator">:</span> <span class="token punctuation">{</span>prevCount<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
      <span class="token operator">&lt;</span>p<span class="token operator">></span>The time is <span class="token punctuation">{</span>time<span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Did you catch how weâ€™re using the <code class="language-text">useInitialMount</code> Hook here in <code class="language-text">usePrevious</code>? I love when I can reuse Hooks within other Hooks.</p>
<p>And in TypeScript, the code is more or less the same, except we use <a href="https://www.typescriptlang.org/docs/handbook/generics.html" target="_blank" rel="nofollow noopener noreferrer">generics</a> so that the type of <code class="language-text">curValue</code> can be arbitrary, but enforce that the return value has to be the same type.</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> usePrevious <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> prevRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>  <span class="token keyword">const</span> curRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token keyword">const</span> isInitialMount <span class="token operator">=</span> <span class="token function">useInitialMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isInitialMount <span class="token operator">&amp;&amp;</span> curRef<span class="token punctuation">.</span>current <span class="token operator">!==</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    prevRef<span class="token punctuation">.</span>current <span class="token operator">=</span> curRef<span class="token punctuation">.</span>current
    curRef<span class="token punctuation">.</span>current <span class="token operator">=</span> value
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> prevRef<span class="token punctuation">.</span>current
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The <code class="language-text">react-use</code> package has a similar Hook thatâ€™s called <a href="https://github.com/streamich/react-use/blob/master/docs/usePreviousDistinct.md" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">usePreviousDistinct</code></a> to distinguish itself from the basic <code class="language-text">usePrevious</code> outlined in the React Hooks FAQ. It also provides a compare function which can be passed as the optional second parameter to control when the new value is different from the previous value. The default compare function is strict equality like we used above. But if the value being stored is an array or object, youâ€™ll likely want a deep-equals comparison instead.</p>
<hr>
<h2 id="code-classlanguage-textuseuniqueidcode" style="position:relative;"><a href="#code-classlanguage-textuseuniqueidcode" aria-label="code classlanguage textuseuniqueidcode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">useUniqueId</code></h2>
<p>Sometimes in React we need to create a unique ID to use an <code class="language-text">id</code> for DOM elements. The ID itself doesnâ€™t really matter, but is needed for associating two elements together for accessibility purposes using <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA" target="_blank" rel="nofollow noopener noreferrer">ARIA attributes</a> within a complex component.</p>
<p>The trick is that we donâ€™t want to generate a new ID for every render. Once weâ€™ve generated an ID for the component, we want it to remain the same. Our good olâ€™ friend <a href="https://reactjs.org/docs/hooks-reference.html#useref" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useRef</code></a> will come to the rescue again, and we can wrap up the logic into something easily reusable.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">let</span> <span class="token constant">GLOBAL_ID</span> <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">const</span> <span class="token function-variable function">useUniqueId</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> idRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> isInitialMount <span class="token operator">=</span> <span class="token function">useInitialMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token comment">// generate the ID for the first render</span>
  <span class="token comment">// and store in the ref to remain for</span>
  <span class="token comment">// subsequent renders</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isInitialMount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">GLOBAL_ID</span> <span class="token operator">+=</span> <span class="token number">1</span>
    idRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">id</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">GLOBAL_ID</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> idRef<span class="token punctuation">.</span>current
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">NavMenu</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token function">useUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>  <span class="token keyword">const</span> buttonId <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-button</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">const</span> menuId <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-menu</span><span class="token template-punctuation string">`</span></span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token punctuation">{</span>buttonId<span class="token punctuation">}</span> aria<span class="token operator">-</span>controls<span class="token operator">=</span><span class="token punctuation">{</span>menuId<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">+</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token punctuation">{</span>menuId<span class="token punctuation">}</span> aria<span class="token operator">-</span>labelledby<span class="token operator">=</span><span class="token punctuation">{</span>buttonId<span class="token punctuation">}</span> role<span class="token operator">=</span><span class="token string">"menu"</span><span class="token operator">></span>
        <span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>a role<span class="token operator">=</span><span class="token string">"menuitem"</span> href<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>url<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Once again we get to use a previously created custom Hook (<code class="language-text">useInitialMount</code>) to help build a new Hook.</p>
<p>React actually had a proposal for a built-in Hook to solve this exact problem and ensure the ID generated client-side matched the one generated server-side. It was called <code class="language-text">useOpaqueIdentifier</code>. Not sure what exactly happened to it and why it hasnâ€™t been released, but I wrote about it last year in post entitled <a href="/blog/new-react-use-opaque-identifier-hook-coming-soon/">New React useOpaqueIdentifier hook coming soon</a>. Lesson learned. ðŸ˜‚</p>
<hr>
<h2 id="code-classlanguage-textuseismountedcode" style="position:relative;"><a href="#code-classlanguage-textuseismountedcode" aria-label="code classlanguage textuseismountedcode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">useIsMounted</code></h2>
<p>In my previous post on <a href="/blog/handling-async-react-component-effects-after-unmount/">Handling async React component effects after unmount</a>, I outline 4 ways to solve the problem where we try to update the state of a component after it has already unmounted. We prevent updating the state with the result of a <code class="language-text">fetch</code> call when the response returned after the component had already been unmounted.</p>
<p>All the solutions resolve around keeping track of if the component is still mounted. So we created a custom Hook for it called <code class="language-text">useIsMounted</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token comment">// returns a function that when called will</span>
<span class="token comment">// return `true` if the component is mounted</span>
<span class="token keyword">const</span> <span class="token function-variable function">useIsMounted</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// the ref to keep track of mounted state across renders</span>
  <span class="token keyword">const</span> mountedRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token comment">// helper function that will return the mounted state.</span>
  <span class="token comment">// using `useCallback` because the function will likely</span>
  <span class="token comment">// be used in the deps array of a `useEffect` call</span>
  <span class="token keyword">const</span> isMounted <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> mountedRef<span class="token punctuation">.</span>current<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// effect sets mounted ref to `true` when run</span>
  <span class="token comment">// and the sets to `false` during effect cleanup (i.e. unmount)</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    mountedRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">true</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      mountedRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> isMounted
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Results</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>items<span class="token punctuation">,</span> setItems<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> isMounted <span class="token operator">=</span> <span class="token function">useIsMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">fetchItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">newItems</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// only set state if the component</span>
      <span class="token comment">// is still mounted after receiving</span>
      <span class="token comment">// the async data</span>
<span class="gatsby-highlight-code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>        <span class="token function">setItems</span><span class="token punctuation">(</span>newItems<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>isMounted<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// render UI</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<hr>
<h2 id="code-classlanguage-textusemediacode" style="position:relative;"><a href="#code-classlanguage-textusemediacode" aria-label="code classlanguage textusemediacode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">useMedia</code></h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries" target="_blank" rel="nofollow noopener noreferrer">Media queries</a> allow us to change our UI based upon a host of media features (most commonly the size of the window). Media queries are normally used in CSS, but the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">matchMedia()</code> API </a> allows us to execute media queries in JavaScript when necessary. Maybe we need to change props or render entirely different components depending on the results of a media query.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">useMedia</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// initialize state to current match value</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>matches<span class="token punctuation">,</span> setMatches<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">.</span>matches<span class="token punctuation">)</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> isMounted <span class="token operator">=</span> <span class="token function">useIsMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> mediaQueryList <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">listener</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// update `matches` state whenever query match changes.</span>
      <span class="token comment">// `isMounted()` check is for extra protection in case</span>
      <span class="token comment">// listener somehow fires in between unmount and</span>
      <span class="token comment">// listener removal</span>
<span class="gatsby-highlight-code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>        <span class="token function">setMatches</span><span class="token punctuation">(</span>mediaQueryList<span class="token punctuation">.</span>matches<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    mediaQueryList<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>

    <span class="token comment">// sync initial matches again</span>
    <span class="token function">setMatches</span><span class="token punctuation">(</span>mediaQueryList<span class="token punctuation">.</span>matches<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      mediaQueryList<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> isMounted<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> matches
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Example</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> isSmall <span class="token operator">=</span> <span class="token function">useMedia</span><span class="token punctuation">(</span><span class="token string">'(max-width: 480px)'</span><span class="token punctuation">)</span></span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>Screen is <span class="token punctuation">{</span>isSmall <span class="token operator">?</span> <span class="token string">'small'</span> <span class="token operator">:</span> <span class="token string">'large'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<hr>
<h2 id="code-classlanguage-textuserafstatecode" style="position:relative;"><a href="#code-classlanguage-textuserafstatecode" aria-label="code classlanguage textuserafstatecode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">useRafState</code></h2>
<p>There are some DOM events, like <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/resize_event" target="_blank" rel="nofollow noopener noreferrer">window <code class="language-text">resize</code></a> or <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/scroll_event" target="_blank" rel="nofollow noopener noreferrer">document <code class="language-text">scroll</code></a>, the fire a lot. They fire much faster than the DOM can update, so if we try to update the DOM for each event, our app feels sluggish.</p>
<p>We can try to work around this problem by manually <a href="https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_debounce" target="_blank" rel="nofollow noopener noreferrer">debouncing</a> or <a href="https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore#_throttle" target="_blank" rel="nofollow noopener noreferrer">throttling</a> the events, but thereâ€™s an interesting alternative. We can make use of <a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">requestAnimationFrame</code></a> to debounce in a different way by only setting the state on the next animation frame.</p>
<p>I found this <code class="language-text">useRafState</code> Hook on <a href="https://github.com/streamich/react-use/" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">react-use</code></a> and had to share it because itâ€™ll making this debouncing much easier. Its interface is identical to <a href="https://reactjs.org/docs/hooks-reference.html#usestate" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useState</code></a>. It wraps <code class="language-text">useState</code>, only setting the state using <code class="language-text">requestAnimationFrame</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useCallback<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">useRafState</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">initialState</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// this is the actual state</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span>

  <span class="token comment">// keep track of the `requestAnimationFrame` request ID</span>
  <span class="token comment">// across renders and successive calls to `useRafState`</span>
  <span class="token keyword">const</span> requestId <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token comment">// the actual state setter we'll return.</span>
  <span class="token comment">// using `useCallback` so that it's memoized</span>
  <span class="token comment">// just like `setState`</span>
  <span class="token keyword">const</span> setRafState <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// cancel active request before making next one.</span>
    <span class="token comment">// this is debouncing.</span>
    <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>requestId<span class="token punctuation">.</span>current<span class="token punctuation">)</span>

    <span class="token comment">// create new request to set state on animation frame</span>
    requestId<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setState</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// cancel any active request when component unmounts</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>requestId<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setRafState<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Example</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>width<span class="token punctuation">,</span> setWidth<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useRafState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setWidth</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span>

    <span class="token comment">// set initial value</span>
    <span class="token function">setWidth</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>setWidth<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>Window width<span class="token operator">:</span> <span class="token punctuation">{</span>width<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The TypeScript for <code class="language-text">useRafState</code> is a bit involved because we need to mimic all that <code class="language-text">useState</code> can do. Since the state can be anything, we leverage generics once again.</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token comment">// just like with `useState`, `initialState` is either a value</span>
<span class="token comment">// or a function that returns a value</span>
<span class="token comment">// the type of `initialState` is generic and depends on the value</span>
<span class="token comment">// being passed in</span>
<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> useRafState <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">S</span><span class="token operator">></span><span class="token punctuation">(</span>initialState<span class="token operator">:</span> <span class="token constant">S</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">S</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setState<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialState<span class="token punctuation">)</span>

  <span class="token keyword">const</span> requestId <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token comment">// just like with `useState`, `setRafState` is a memoized function</span>
  <span class="token comment">// that either takes a value or a function that accepts</span>
  <span class="token comment">// the previous value and returns the next value</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> setRafState <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">S</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>prevState<span class="token operator">:</span> <span class="token constant">S</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">S</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span>    <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>requestId<span class="token punctuation">.</span>current<span class="token punctuation">)</span>

    requestId<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setState</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>requestId<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// using const assertion simplifies return value type definition</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">return</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> setRafState<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>For more on <code class="language-text">as const</code>, read <a href="/blog/use-cases-typescript-const-assertions/">Use cases for TypeScript const assertions</a>.</p>
<hr>
<h2 id="code-classlanguage-textusewindowscrollcode" style="position:relative;"><a href="#code-classlanguage-textusewindowscrollcode" aria-label="code classlanguage textusewindowscrollcode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">useWindowScroll</code></h2>
<p>We may need to track the scroll position of the window in order to know when to pin or unpin some sticky content on the page. And since the document <code class="language-text">scroll</code> event fires often, weâ€™ll likely want to debounce updating the state. We can build <code class="language-text">useWindowScroll</code> using the <code class="language-text">useRafState</code> custom Hook we just implemented.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">getPos</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  x<span class="token operator">:</span> window<span class="token punctuation">.</span>scrollX<span class="token punctuation">,</span>
  y<span class="token operator">:</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">useWindowScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>pos<span class="token punctuation">,</span> setPos<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useRafState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// `useRafState` will debounce on animation frame</span>
      <span class="token function">setPos</span><span class="token punctuation">(</span><span class="token function">getPos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> handleScroll<span class="token punctuation">)</span>

    <span class="token comment">// set initial value</span>
    <span class="token function">setPos</span><span class="token punctuation">(</span><span class="token function">getPos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> handleScroll<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> pos
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Example</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useWindowScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>p<span class="token operator">></span>
      Position<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>y<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<hr>
<h2 id="code-classlanguage-textusedeepcompareeffectcode" style="position:relative;"><a href="#code-classlanguage-textusedeepcompareeffectcode" aria-label="code classlanguage textusedeepcompareeffectcode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">useDeepCompareEffect</code></h2>
<p>Last month I wrote a post entitled <a href="/blog/object-array-dependencies-react-useEffect-hook/">Object &#x26; array dependencies in the React useEffect Hook</a>, which provided four strategies for optimizing <code class="language-text">useEffect</code> with object or array dependencies. The basic problem is that <code class="language-text">useEffect</code> uses <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Strict_equality" target="_blank" rel="nofollow noopener noreferrer">strict equality</a> when checking if individual dependencies have changed. So objects or arrays in <code class="language-text">useEffect</code> dependencies can cause unnecessary effect runs even when the objects have the same contents.</p>
<p>If we had a <code class="language-text">useEffect</code> that instead performed a deep comparison of the objects or arrays, we wouldnâ€™t have to worry about having having them in our dependencies. So letâ€™s build one!</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> isDeepEqual <span class="token keyword">from</span> <span class="token string">'fast-deep-equal/react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">useDeepCompareEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">effect<span class="token punctuation">,</span> deps</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// use a ref to keep track of deps across renders</span>
  <span class="token keyword">const</span> depsRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// if the new deps don't deep equal the prev ones</span>
  <span class="token comment">// stored in the ref, update the ref. If they *do*</span>
  <span class="token comment">// deep equal, the ref will remain unchanged and</span>
  <span class="token comment">// the array passed to `useEffect` will be the exact</span>
  <span class="token comment">// same array as before so the basic strict equality</span>
  <span class="token comment">// will work</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsRef <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">isDeepEqual</span><span class="token punctuation">(</span>depsRef<span class="token punctuation">.</span>current<span class="token punctuation">,</span> deps<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    depsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> deps
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span>effect<span class="token punctuation">,</span> depsRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">Team</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> team <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>players<span class="token punctuation">,</span> setPlayers<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="gatsby-highlight-code-line">  <span class="token function">useDeepCompareEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>team<span class="token punctuation">.</span>active<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">getPlayers</span><span class="token punctuation">(</span>team<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>setPlayers<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>team<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Players team<span class="token operator">=</span><span class="token punctuation">{</span>team<span class="token punctuation">}</span> players<span class="token operator">=</span><span class="token punctuation">{</span>players<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Because the <code class="language-text">useDeepCompareEffect</code> Hook is a wrapper around the basic <code class="language-text">useEffect</code> Hook, it acts like a drop-in replacement for <code class="language-text">useEffect</code>. Our code looks almost identical. However, we probably wouldnâ€™t want to use <code class="language-text">useDeepCompareEffect</code> all the time because itâ€™s definitely slower than normal <code class="language-text">useEffect</code> because of the deep comparison checks. But in spot cases, itâ€™ll definitely come in handy.</p>
<p>Also, if you use <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">eslint-plugin-react-hooks</code></a> for linting your React Hooks code (which I hope you do), youâ€™ll have to update the <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks#advanced-configuration" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">react-hooks/exhaustive-deps</code></a> rule to include <code class="language-text">useDeepCompareEffect</code> in the <code class="language-text">additionalHooks</code> configuration. This way youâ€™ll still be warned if you forget to list a dependency.</p>
<p>The implementation in TypeScript mirrors the type API of <code class="language-text">useEffect</code>:</p>
<div class="gatsby-highlight" data-language="typescript"><pre style="counter-reset: linenumber NaN" class="language-typescript line-numbers"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> DependencyList<span class="token punctuation">,</span> EffectCallback <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> isDeepEqual <span class="token keyword">from</span> <span class="token string">'fast-deep-equal/react'</span>

<span class="gatsby-highlight-code-line"><span class="token keyword">const</span> useDeepCompareEffect <span class="token operator">=</span> <span class="token operator">&lt;</span>TDeps <span class="token keyword">extends</span> <span class="token class-name">DependencyList</span><span class="token operator">></span><span class="token punctuation">(</span></span><span class="gatsby-highlight-code-line">  effect<span class="token operator">:</span> EffectCallback<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">  deps<span class="token operator">:</span> TDeps<span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line"><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">  <span class="token keyword">const</span> depsRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>TDeps <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsRef <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">isDeepEqual</span><span class="token punctuation">(</span>depsRef<span class="token punctuation">.</span>current<span class="token punctuation">,</span> deps<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    depsRef<span class="token punctuation">.</span>current <span class="token operator">=</span> deps
  <span class="token punctuation">}</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span>effect<span class="token punctuation">,</span> depsRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The <code class="language-text">react-use</code> package has a similar <a href="https://github.com/streamich/react-use/blob/master/docs/useDeepCompareEffect.md" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useDeepCompareEffect</code></a> Hook. But its actually built on top of a <a href="https://github.com/streamich/react-use/blob/master/docs/useCustomCompareEffect.md" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useCustomCompareEffect</code></a> Hook that accepts any compare function that is then used for comparing the dependencies. As a result, it enables supporting <a href="https://github.com/streamich/react-use/blob/master/docs/useShallowCompareEffect.md" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">useShallowCompareEffect</code></a> as well.</p>
<hr>
<p>So thatâ€™s it! ðŸ˜… There are literally an infinite number of custom Hooks that we can create. But these are 8 custom Hooks that I found especially helpful or particularly interesting.</p>
<p>What custom Hooks do you find yourself using all the time? Iâ€™d love to know! Feel free to reach out to me on Twitter at <a href="https://twitter.com/benmvp" target="_blank" rel="nofollow noopener noreferrer">@benmvp</a> to let me know!</p>
<p>Keep learning my friends. ðŸ¤“</p></article><footer class="MuiBox-root-10 jss168 jss2"><div><div class="jss169"><button aria-label="Share on Twitter" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="Share on Facebook" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg><span class="react-share__ShareCount" url="https://www.benmvp.com/blog/8-helpful-custom-react-hooks/">0</span></button><button aria-label="Save to Pocket" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#EF3F56"></circle><path d="M41.084 29.065l-7.528 7.882a2.104 2.104 0 0 1-1.521.666 2.106 2.106 0 0 1-1.522-.666l-7.528-7.882c-.876-.914-.902-2.43-.065-3.384.84-.955 2.228-.987 3.1-.072l6.015 6.286 6.022-6.286c.88-.918 2.263-.883 3.102.071.841.938.82 2.465-.06 3.383l-.015.002zm6.777-10.976C47.463 16.84 46.361 16 45.14 16H18.905c-1.2 0-2.289.82-2.716 2.044-.125.363-.189.743-.189 1.125v10.539l.112 2.096c.464 4.766 2.73 8.933 6.243 11.838.06.053.125.102.19.153l.04.033c1.882 1.499 3.986 2.514 6.259 3.014a14.662 14.662 0 0 0 6.13.052c.118-.042.235-.065.353-.087.03 0 .065-.022.098-.042a15.395 15.395 0 0 0 6.011-2.945l.039-.045.18-.153c3.502-2.902 5.765-7.072 6.248-11.852L48 29.674v-10.52c0-.366-.041-.728-.161-1.08l.022.015z" fill="white"></path></svg></button><button aria-label="Share on LinkedIn" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="Share by email" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#7f7f7f"></circle><path d="M17,22v20h30V22H17z M41.1,25L32,32.1L22.9,25H41.1z M20,39V26.6l12,9.3l12-9.3V39H20z" fill="white"></path></svg></button></div></div><div class="MuiBox-root-10 jss171"><section class="MuiPaper-root-30 jss172 MuiPaper-elevation3-36 MuiPaper-rounded-31"><h1 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-gutterBottom-88">Subscribe to the Newsletter</h1><p class="MuiTypography-root-68 MuiTypography-body1-70 MuiTypography-gutterBottom-88">Get notified about new blog posts, minishops &amp; other goodies</p><div class="MuiCollapse-container-174 MuiCollapse-hidden-176" style="min-height:0px"><div class="MuiCollapse-wrapper-177"><div class="MuiCollapse-wrapperInner-178"><div class="MuiBox-root-10 jss179"><div class="MuiPaper-root-30 MuiAlert-root-180 MuiAlert-standardError-184 MuiPaper-elevation0-33" role="alert"><div class="MuiAlert-icon-193"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeInherit-141" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg></div><div class="MuiAlert-message-194"></div><div class="MuiAlert-action-195"><button class="MuiButtonBase-root-126 MuiIconButton-root-127 MuiIconButton-colorInherit-130 MuiIconButton-sizeSmall-133" tabindex="0" type="button" aria-label="Close" title="Close"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeSmall-142" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></span></button></div></div></div></div></div></div><form class="MuiBox-root-10 jss196" method="post" name="subscribe"><div class="MuiFormControl-root-198 MuiTextField-root-197 MuiFormControl-marginNormal-199 MuiFormControl-fullWidth-201"><label class="MuiFormLabel-root-210 MuiInputLabel-root-202 MuiInputLabel-formControl-204 MuiInputLabel-animated-207 MuiInputLabel-shrink-206 MuiInputLabel-outlined-209 Mui-required Mui-required" data-shrink="true">Email<span aria-hidden="true" class="MuiFormLabel-asterisk-213 MuiInputLabel-asterisk-203">â€‰<!-- -->*</span></label><div class="MuiInputBase-root-226 MuiOutlinedInput-root-214 MuiInputBase-fullWidth-233 MuiInputBase-formControl-227 MuiInputBase-adornedStart-228 MuiOutlinedInput-adornedStart-216"><div class="MuiInputAdornment-root-241 MuiInputAdornment-positionStart-243"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></svg></div><input type="email" aria-invalid="false" required="" value="" class="MuiInputBase-input-234 MuiOutlinedInput-input-221 MuiInputBase-inputAdornedStart-238 MuiOutlinedInput-inputAdornedStart-224"/><fieldset aria-hidden="true" class="jss248 MuiOutlinedInput-notchedOutline-220"><legend class="jss250 jss251"><span>Email<!-- -->Â *</span></legend></fieldset></div></div><div class="MuiFormControl-root-198 MuiTextField-root-197 MuiFormControl-marginNormal-199 MuiFormControl-fullWidth-201"><label class="MuiFormLabel-root-210 MuiInputLabel-root-202 MuiInputLabel-formControl-204 MuiInputLabel-animated-207 MuiInputLabel-shrink-206 MuiInputLabel-outlined-209 Mui-required Mui-required" data-shrink="true">First Name<span aria-hidden="true" class="MuiFormLabel-asterisk-213 MuiInputLabel-asterisk-203">â€‰<!-- -->*</span></label><div class="MuiInputBase-root-226 MuiOutlinedInput-root-214 MuiInputBase-fullWidth-233 MuiInputBase-formControl-227 MuiInputBase-adornedStart-228 MuiOutlinedInput-adornedStart-216"><div class="MuiInputAdornment-root-241 MuiInputAdornment-positionStart-243"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg></div><input type="text" aria-invalid="false" required="" value="" class="MuiInputBase-input-234 MuiOutlinedInput-input-221 MuiInputBase-inputAdornedStart-238 MuiOutlinedInput-inputAdornedStart-224"/><fieldset aria-hidden="true" class="jss248 MuiOutlinedInput-notchedOutline-220"><legend class="jss250 jss251"><span>First Name<!-- -->Â *</span></legend></fieldset></div></div><button class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-contained-107 jss173 MuiButton-containedPrimary-108" tabindex="0" type="submit"><span class="MuiButton-label-100">Subscribe<span class="MuiButton-endIcon-122 MuiButton-iconSizeMedium-124"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg></span></span></button></form></section></div><hr class="MuiDivider-root-252 jss167 MuiDivider-middle-256"/><section class="MuiGrid-root-261 MuiGrid-container-262 MuiGrid-spacing-xs-2-285 MuiGrid-align-items-xs-center-270"><aside class="MuiGrid-root-261 jss259 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-2-311"><a href="https://twitter.com/benmvp" rel="noopener noreferrer" target="_blank"><div class="jss260 gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:80px;height:80px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAG66AABuugHW3rEXAAAE4ElEQVR42m2Ta0xTZxjHWyhbIs6gbm4WOxUVxNoCvdHa0tMLvRePRcqthdIqAi0INYWBMJmKF9RBh9xcRTZQcXiJJhuLmwn7sjg0WeZgbm5xblmyD1uWfViyD0D73zlHzWz0TZ6c2//5nef/vs/DYj1ZBEEwV3GulpW8JIn14/dgr0oT6DdvER8jFar+Gk3eMa9qG8lhs5MAsGxZAjatt2zcyHrhooGbt4oZkUSyjbcuXXhSksn/a49Oi66iwthItTfW73Gh2Wq66RBlv0rrPHlK9gthnZ2drE0ZAuY+Z6sgOVMg2a8RiaYCBh067Jb5ju22hQv1tQvXgg0LQ94KBPSam5SUQ+tJUfaLK1Qo1AkMUCy3q8RSXzmR93vAbER7gTUWpMBDVW5MtewDVeVCR4EV5Wp1A61vzCcSnoNlCx5XJ9y4PlkqzT1BynPbK3QaaISCKJ+3BlpRDvRiKXxaDTpIe7TJqEdhruwLOmfucMfztgmlinmpEGWvNxotk55i1/UMCpTO5UalG9JgMuSDn6VE8vK1WL40GatXpyF1TQaWvrIiQudpTXWsxMTEZ+zKpAzwzTdWbnWVVUa7eyIgjRbs1qphyRZCLpNCJFZiHW8TinIlSOVtWeRtkGL5ytTrdF46Xx9vW67MZ/AimdZhMFhx6Eg4uremAW6VAqfKi9G6owAkBarVERioLIcqkx/NTM/C+rTNRXTeFr4kHijLszFAqXqHS6Ozor4hNN/gD8aKFbk4UebE6UoXWqwmVFPAZrsFzeb8xXdra9F2qMdO5x093pcYB8yREozljCxinVqt/8PpKMRO0hErz1MiZDGiWqOGIJWLzNdXMWEX8hEqd89797YxPROoD8VXyOVyWUajjYGKskRCpUL5kU4m/dtLnXSb3RLzU5W5DXr0BBtxwOeNetQqePS6g7R+osrN3sDjxZ+y3Blkrlqjh/kTV1zGLVVrvqnSEnjLZo5S04GgzYLh1tbYjZMn4TcZf3FJsphpqZCJ2NPT0/HAppZBtr9tghOien/oK3AI8667u802VOsJCmaGV60EvZ8hk2ExaDTALhY10nm1rkCSydHEMJyTk49ho1d/TaSHvWTfx8xzScN4gaOyC+48OZrMBlRTVoVUTyZxOBCs5YG7IgXsl5bIae2S5GUJE5/8mdAbuZPYenDi/wavq+9KcdX1OUsD525VBC/Oe5qvwEn64CMUqDNoYcjJxmspKeAkvRzLEOpRseudB+Gzd0LNnRc2PWXcmJ5n90ZmElhdvZ/1hyMzv4VHv0XNgU9REhiNuYMT8DRfBUnWwKU3wU+NWhGhB6Hajp3ut9E9dBuUMwx8eO/fnjO3r1GMktpg37LHlq88QuTSTxg+/120d+TrxZbjt1Dqj6DQ14PtvjBKXe3U/olgM5RAZa4HWRzE0Pn70aHxucWBsTmMTP5MxUOEz959eOjUVAFrcHxuYXBsNkYFJZzD2UsP4G+/DJm6GI6qbpSUNaNEngM72QC7+zCO9H6O90bv4cTwHXRTMTA2u0gxFs9dfoQzF3/4hwLO4mkM0NDxOYTP3cOe0AcgK4+BLN2PInMRjFYfnBUd6OqfoSzPoI+C0lo6mPyx2ejwhfvROOAg/fEJ9P2JB+g6/SU8jSMw2XdBb65E+/Ep2i61PU9AY8/mMhH7DwkiXhzU3azSAAAAAElFTkSuQmCC" alt="Ben Ilegbodu" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/2b60dd7e58e084c6192b8f4d7c81d91d/829e2/benmvp-logo.png 1x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/e94d6/benmvp-logo.png 1.5x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/af1a8/benmvp-logo.png 2x" /><img loading="lazy" width="80" height="80" srcset="/static/2b60dd7e58e084c6192b8f4d7c81d91d/829e2/benmvp-logo.png 1x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/e94d6/benmvp-logo.png 1.5x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/af1a8/benmvp-logo.png 2x" src="/static/2b60dd7e58e084c6192b8f4d7c81d91d/829e2/benmvp-logo.png" alt="Ben Ilegbodu" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></aside><article class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-10-319">Hi, I'm <strong>Ben Ilegbodu</strong>. ðŸ‘‹ðŸ¾<br /><br />I'm a Christian, husband, and father of 3, with 15+ years of professional experience developing user interfaces for the Web. I'm a Frontend Architect at Stitch Fix, frontend development teacher, Google Developer Expert, and Microsoft MVP. I love helping developers level up their frontend skills.</article></section><hr class="MuiDivider-root-252 jss167 MuiDivider-middle-256"/><p class="MuiTypography-root-68 MuiTypography-h6-78 MuiTypography-alignCenter-84"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorPrimary-91" href="https://twitter.com/search?q=https://www.benmvp.com/blog/8-helpful-custom-react-hooks/" target="_blank" rel="noopener noreferrer">Discuss on Twitter</a> // <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorPrimary-91" href="https://github.com/benmvp/benmvp.com/edit/main/content/posts/8-helpful-custom-react-hooks/index.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a></p></footer><hr class="MuiDivider-root-252 jss3 MuiDivider-middle-256"/><div class="MuiGrid-root-261 MuiGrid-container-262 MuiGrid-spacing-xs-2-285"><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307"><h3 class="MuiTypography-root-68 MuiTypography-h5-77">More from Ben Ilegbodu on <strong>React</strong>...</h3></div><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-6-315"><div class="MuiPaper-root-30 MuiCard-root-366 MuiPaper-elevation1-34 MuiPaper-rounded-31" id="post-putting-test-files-in-the-pages-folder-in-a-nextjs-app"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 MuiButtonBase-root-126 MuiCardActionArea-root-367 MuiTypography-colorPrimary-91" tabindex="0" role="button" aria-disabled="false" href="/blog/putting-test-files-pages-folder-nextjs-app/"><img class="MuiCardMedia-root-369 jss364 MuiCardMedia-media-370 MuiCardMedia-img-371" src="/static/799c4e43ef75b13ab7e3f1e526ca9c25/dee3b/owls-zdenek-machacek-FvTn9Dlv39A-unsplash.jpg" title="Putting test files in the pages folder in a Next.js app"/><div class="MuiCardContent-root-372"><h3 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-colorTextPrimary-93 MuiTypography-gutterBottom-88" title="Putting test files in the pages folder in a Next.js app">Putting test files in the pages folder in a Next.js app</h3><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-colorTextSecondary-94">How to include test and other non-page files next to page components and API routes within the pages directory in a Next.js application</p></div><span class="MuiCardActionArea-focusHighlight-368"></span></a></div></div><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-6-315"><div class="MuiPaper-root-30 MuiCard-root-366 MuiPaper-elevation1-34 MuiPaper-rounded-31" id="post-creating-a-react-controlled-components-pattern-custom-hook"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 MuiButtonBase-root-126 MuiCardActionArea-root-367 MuiTypography-colorPrimary-91" tabindex="0" role="button" aria-disabled="false" href="/blog/create-react-controlled-components-pattern-custom-hook/"><img class="MuiCardMedia-root-369 jss364 MuiCardMedia-media-370 MuiCardMedia-img-371" src="/static/0550abd9854fd967f5b3fa4727dfbe63/dee3b/cockpit-controls-mael-balland-V5hAryReZzo-unsplash.jpg" title="Creating a React controlled components pattern custom Hook"/><div class="MuiCardContent-root-372"><h3 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-colorTextPrimary-93 MuiTypography-gutterBottom-88" title="Creating a React controlled components pattern custom Hook">Creating a React controlled components pattern custom Hook</h3><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-colorTextSecondary-94">How to create a custom React Hook that allows components to be both controlled and uncontrolled just like form elements</p></div><span class="MuiCardActionArea-focusHighlight-368"></span></a></div></div><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-6-315"><div class="MuiPaper-root-30 MuiCard-root-366 MuiPaper-elevation1-34 MuiPaper-rounded-31" id="post-conditional-rendering-in-react"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 MuiButtonBase-root-126 MuiCardActionArea-root-367 MuiTypography-colorPrimary-91" tabindex="0" role="button" aria-disabled="false" href="/blog/conditional-rendering-react/"><img class="MuiCardMedia-root-369 jss364 MuiCardMedia-media-370 MuiCardMedia-img-371" src="/static/db4ac35c43c12d6365046281269bd8ae/dee3b/fork-in-the-road-jens-lelie-u0vgcIOQG08-unsplash.jpg" title="Conditional rendering in React"/><div class="MuiCardContent-root-372"><h3 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-colorTextPrimary-93 MuiTypography-gutterBottom-88" title="Conditional rendering in React">Conditional rendering in React</h3><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-colorTextSecondary-94">6 approaches for conditionally rendering JSX markup within a React component</p></div><span class="MuiCardActionArea-focusHighlight-368"></span></a></div></div><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-6-315"><div class="MuiPaper-root-30 MuiCard-root-366 MuiPaper-elevation1-34 MuiPaper-rounded-31" id="post-four-characters-can-optimize-your-react-component"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 MuiButtonBase-root-126 MuiCardActionArea-root-367 MuiTypography-colorPrimary-91" tabindex="0" role="button" aria-disabled="false" href="/blog/four-characters-optimize-react-component/"><img class="MuiCardMedia-root-369 jss364 MuiCardMedia-media-370 MuiCardMedia-img-371" src="/static/448eda964ec564200197237fa5c4028f/dee3b/light-speed-marc-sendra-martorell--Vqn2WrfxTQ-unsplash.jpg" title="Four characters can optimize your React component"/><div class="MuiCardContent-root-372"><h3 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-colorTextPrimary-93 MuiTypography-gutterBottom-88" title="Four characters can optimize your React component">Four characters can optimize your React component</h3><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-colorTextSecondary-94">How making use of useState lazy initialization can speed up your React function component</p></div><span class="MuiCardActionArea-focusHighlight-368"></span></a></div></div></div></main></div><footer class="MuiBox-root-10 jss378"><div class="MuiContainer-root-156 jss373 MuiContainer-maxWidthMd-161"><p class="MuiTypography-root-68 jss374 MuiTypography-body1-70 MuiTypography-alignCenter-84"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90" href="/learning-es6-series/">Learning ES6</a> | <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90" href="/ama/">AMA</a> | <a href="/blog/rss.xml" class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90">RSS</a></p><div class="MuiBox-root-10 jss379 jss375"><h4 class="MuiTypography-root-68 MuiTypography-h4-76">Ben Ilegbodu</h4><ul class="MuiBox-root-10 jss382 jss380"><li class="jss381"><a href="https://twitter.com/benmvp" target="_blank" rel="noopener noreferrer" title="Follow Ben on Twitter"><button class="MuiButtonBase-root-126 MuiIconButton-root-127 MuiIconButton-colorSecondary-132" tabindex="0" type="button" aria-label="Ben&#x27;s Twitter profile"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeLarge-143" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg></span></button></a></li><li class="jss381"><a href="https://github.com/benmvp" target="_blank" rel="noopener noreferrer" title="Visit Ben&#x27;s Github profile"><button class="MuiButtonBase-root-126 MuiIconButton-root-127 MuiIconButton-colorSecondary-132" tabindex="0" type="button" aria-label="Ben&#x27;s Github profile"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeLarge-143" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"></path></svg></span></button></a></li><li class="jss381"><a href="https://linkedin.com/in/benmvp" target="_blank" rel="noopener noreferrer" title="Visit Ben&#x27;s LinkedIn resume"><button class="MuiButtonBase-root-126 MuiIconButton-root-127 MuiIconButton-colorSecondary-132" tabindex="0" type="button" aria-label="Ben&#x27;s LinkedIn profile"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeLarge-143" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path></svg></span></button></a></li></ul></div><div class="MuiBox-root-10 jss383 jss377"><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-gutterBottom-88 MuiTypography-alignCenter-84">Â© 2015 â€” <!-- -->2023<!-- -->, Ben Ilegbodu. All rights reserved.<!-- --> <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90" href="https://www.biblegateway.com/passage/?search=2%20cor%205%3A17&amp;version=NLT;NTV" target="_blank" rel="noopener noreferrer">2 Cor 5:17</a></p><p class="MuiTypography-root-68 MuiTypography-caption-71 MuiTypography-alignCenter-84">Built using<!-- --> <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineAlways-66 MuiTypography-colorInherit-90" href="https://www.gatsbyjs.org" target="_blank" rel="noopener noreferrer">Gatsby</a> <!-- -->and deployed to<!-- --> <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineAlways-66 MuiTypography-colorInherit-90" href="https://vercel.com/" target="_blank" rel="noopener noreferrer">Vercel</a>. The source code is hosted on<!-- --> <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineAlways-66 MuiTypography-colorInherit-90" href="https://github.com/benmvp/benmvp.com" target="_blank" rel="noopener noreferrer">Github</a>.</p></div></div></footer><div role="presentation" class="jss384" style="transform:scale(0);visibility:hidden"><button class="MuiButtonBase-root-126 MuiFab-root-385 MuiFab-sizeSmall-391 MuiFab-secondary-388" tabindex="0" type="button" aria-label="scroll back to top"><span class="MuiFab-label-386"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg></span></button></div></section></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-65375615-1"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'UA-65375615-1'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'UA-65375615-1', options);
  </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/8-helpful-custom-react-hooks/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-fb52633655618c0bf540.js"],"app":["/app-e24077c4e63092cb7e7a.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-becfe473c82be5d1c6a7.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-0f7796a8b5ba6cee03f6.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-29ec3728c308750a9bce.js"],"component---src-pages-minishops-tsx":["/component---src-pages-minishops-tsx-df52f9bee604be925646.js"],"component---src-pages-projects-tsx":["/component---src-pages-projects-tsx-02ee2353c396083db7f2.js"],"component---src-pages-speak-tsx":["/component---src-pages-speak-tsx-40de7c3260dadc1e5d8f.js"],"component---src-pages-subscribe-tsx":["/component---src-pages-subscribe-tsx-4f25b1aff3f33083bdb7.js"],"component---src-pages-videos-tsx":["/component---src-pages-videos-tsx-2fab118aeaa5363826cc.js"],"component---src-templates-minishop-tsx":["/component---src-templates-minishop-tsx-463c3a03e5b835a50b90.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-8f5dab85dd598f7e2a44.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-0d9430f06be996e24ca9.js"]};/*]]>*/</script><script src="/polyfill-fb52633655618c0bf540.js" nomodule=""></script><script src="/component---src-templates-post-tsx-0d9430f06be996e24ca9.js" async=""></script><script src="/67b0b73ca5ef5a715ae49b4d20728b3d9c676d49-806d5139e281bb720cc6.js" async=""></script><script src="/commons-9c3f5f586f099fa6aeed.js" async=""></script><script src="/app-e24077c4e63092cb7e7a.js" async=""></script><script src="/framework-4b86d917a023bb3f8d06.js" async=""></script><script src="/styles-2416da4fc4c075b56691.js" async=""></script><script src="/webpack-runtime-6ce994167e49a78e1877.js" async=""></script></body></html>