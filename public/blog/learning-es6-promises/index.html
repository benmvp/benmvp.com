<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a21a73f781ee30f33316.css">.gatsby-code-button-container{touch-action:none;display:flex;justify-content:flex-end;position:relative;top:28px;z-index:100;pointer-events:none}.gatsby-code-button{cursor:pointer;pointer-events:auto}.gatsby-code-button:after{visibility:hidden;position:absolute;display:none;padding:5px;content:attr(data-tooltip);color:#fff;font-size:16px;background-color:#000;white-space:nowrap}.gatsby-code-button[data-tooltip]:after{top:26px;right:0}.gatsby-code-button[data-tooltip]:focus:after,.gatsby-code-button[data-tooltip]:hover:after{visibility:visible;display:block;z-index:200}.gatsby-code-button-toaster{z-index:500;position:fixed;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;pointer-events:none}.gatsby-code-button-toaster-text{width:100%;margin:0 15px;max-width:850px;padding:20px;font-size:24px;letter-spacing:-1px;font-family:monospace;color:#fff;background-color:#000;border-radius:2px;text-align:center;opacity:0;animation:animation 3s cubic-bezier(.98,.01,.53,.47)}.gatsby-code-button-buffer{position:fixed;top:-9999px;opacity:0}@keyframes animation{0%,50%{opacity:1}50%,to{opacity:0}}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;user-select:none}.line-numbers-rows>span{display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.gatsby-highlight{background-color:#fdf6e3;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-]{background-color:transparent;margin:0;padding:0;overflow:initial;float:left;min-width:100%}.gatsby-highlight-code-line{background-color:#feb;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #f99}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}@media (max-width:767px){.gatsby-highlight pre[class*=language-].line-numbers{padding-left:0}.gatsby-highlight .line-numbers-rows{display:none}pre[class*=language-]{font-size:.75rem}}.gatsby-code-button{margin-right:1em}</style><meta name="generator" content="Gatsby 2.24.53"/><link rel="icon" href="/favicon-32x32.png?v=2b60dd7e58e084c6192b8f4d7c81d91d" type="image/png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#3f51b5"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=2b60dd7e58e084c6192b8f4d7c81d91d"/><title data-react-helmet="true">Promises | Ben Ilegbodu</title><link data-react-helmet="true" rel="canonical" href="https://www.benmvp.com/blog/learning-es6-promises/"/><meta data-react-helmet="true" name="viewport" content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"/><meta data-react-helmet="true" name="description" content="Like clockwork the Learning ES6 series continues on, looking at promises. It will be the first feature we’ve looked at in this series that…"/><meta data-react-helmet="true" name="keywords" content="Frontend Software Engineer React Training JavaScript Training TypeScript Training Minishops"/><meta data-react-helmet="true" name="image" content="https://res.cloudinary.com/benmvp/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_666,c_fit,co_rgb:ffffff,g_north_west,x_550,y_64,l_text:roboto_70_bold:Promises/w_350,c_fit,co_rgb:ffffff,g_south_west,x_64,y_64,l_text:roboto_40:September%252027%252C%25202015/v1619329795/benmvp/blog-post-template_gkpzgc"/><meta data-react-helmet="true" property="og:site_name" content="Ben Ilegbodu"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:url" content="https://www.benmvp.com/blog/learning-es6-promises/"/><meta data-react-helmet="true" property="og:title" content="Promises | Ben Ilegbodu"/><meta data-react-helmet="true" property="og:description" content="Like clockwork the Learning ES6 series continues on, looking at promises. It will be the first feature we’ve looked at in this series that…"/><meta data-react-helmet="true" property="og:image" content="https://res.cloudinary.com/benmvp/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_666,c_fit,co_rgb:ffffff,g_north_west,x_550,y_64,l_text:roboto_70_bold:Promises/w_350,c_fit,co_rgb:ffffff,g_south_west,x_64,y_64,l_text:roboto_40:September%252027%252C%25202015/v1619329795/benmvp/blog-post-template_gkpzgc"/><meta data-react-helmet="true" property="og:image:alt" content="Promises"/><meta data-react-helmet="true" property="og:locale" content="en_US"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:site" content="@benmvp"/><meta data-react-helmet="true" name="twitter:creator" content="@benmvp"/><meta data-react-helmet="true" name="twitter:title" content="Promises | Ben Ilegbodu"/><meta data-react-helmet="true" name="twitter:description" content="Like clockwork the Learning ES6 series continues on, looking at promises. It will be the first feature we’ve looked at in this series that…"/><meta data-react-helmet="true" name="twitter:image" content="https://res.cloudinary.com/benmvp/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_666,c_fit,co_rgb:ffffff,g_north_west,x_550,y_64,l_text:roboto_70_bold:Promises/w_350,c_fit,co_rgb:ffffff,g_south_west,x_64,y_64,l_text:roboto_40:September%252027%252C%25202015/v1619329795/benmvp/blog-post-template_gkpzgc"/><meta data-react-helmet="true" name="twitter:image:alt" content="Promises"/><meta data-react-helmet="true" property="og:article:published_time" content="2015-09-27"/><meta data-react-helmet="true" property="og:article:author" content="Ben Ilegbodu"/><meta data-react-helmet="true" property="og:article:section" content="Technology"/><meta data-react-helmet="true" property="og:article:tag" content="ecmascript-6"/><meta data-react-helmet="true" property="og:article:tag" content="es6"/><meta data-react-helmet="true" property="og:article:tag" content="javascript"/><meta data-react-helmet="true" property="og:article:tag" content="learning-es6"/><meta data-react-helmet="true" property="og:article:tag" content="promises"/><meta data-react-helmet="true" property="og:article:tag" content="deferreds"/><script data-react-helmet="true" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script data-react-helmet="true">
  (adsbygoogle=window.adsbygoogle||[]).pauseAdRequests=0;

  if (!adsbygoogle.loaded) {
    adsbygoogle.push({
      google_ad_client: "ca-pub-8593460861818909",
      enable_page_level_ads: true
    });
  }
  </script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org/","@type":"BlogPosting","url":"https://www.benmvp.com/blog/learning-es6-promises/","name":"Promises | Ben Ilegbodu","alternateName":"Ben Ilegbodu","copyrightHolder":"Ben Ilegbodu","copyrightYear":2015,"description":"Like clockwork the Learning ES6 series continues on, looking at promises. It will be the first feature we’ve looked at in this series that…","image":{"@type":"ImageObject","url":"https://res.cloudinary.com/benmvp/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_666,c_fit,co_rgb:ffffff,g_north_west,x_550,y_64,l_text:roboto_70_bold:Promises/w_350,c_fit,co_rgb:ffffff,g_south_west,x_64,y_64,l_text:roboto_40:September%252027%252C%25202015/v1619329795/benmvp/blog-post-template_gkpzgc"},"keywords":"Frontend Software Engineer React Training JavaScript Training TypeScript Training Minishops","headline":null,"articleBody":"<p>Like clockwork the <a href=\"/learning-es6-series/\"><em>Learning ES6</em> series</a> continues on, looking at <em>promises</em>. It will be the first feature we’ve looked at in this series that is more than syntactic sugar. But promises aren’t new to JavaScript. They’ve existed for quite some time in helper libraries. ECMAScript 6 now brings native promise support to JavaScript via the <code class=\"language-text\">Promise</code> API. Let’s jump right in!</p>\n<h2 id=\"tldr\" style=\"position:relative;\"><a href=\"#tldr\" aria-label=\"tldr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TL;DR</h2>\n<p>A promise represents the eventual result of an asynchronous operation. Instead of registering a callback in the call to an async function, the function returns a promise. The caller registers callbacks with the promise to receive either a promise’s eventual value from the async operation or the reason why the promise cannot be fulfilled.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Creating a promise wrapper for setTimeout</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">delay <span class=\"token operator\">=</span> <span class=\"token number\">0</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> delay<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Using a promise</span>\n<span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'3 seconds have passed!'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'5 seconds have passed!'</span><span class=\"token punctuation\">)</span>\n    x<span class=\"token operator\">++</span> <span class=\"token comment\">// ReferenceError triggers `catch`</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// output: ReferenceError</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// simulate `finally` clause</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'clean up'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Did you notice the use of <a href=\"/blog/learning-es6-parameter-handling/\">default parameters</a> and <a href=\"/blog/learning-es6-arrow-functions/\">arrow functions</a> too? If you’re unfamiliar with those ES6 features, you should check out the articles detailing how they work. Interested in learning more about ES6 promises? Clone the <a href=\"https://github.com/benmvp/learning-es6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>Learning ES6</em> Github repo</a> and take a look at the <a href=\"https://learning-es6.benmvp.com/#promises\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">promises code examples</a> page showing off the features in greater detail.</p>\n<p>Well you’ve come this far. You might as well keep going!</p>\n<h2 id=\"asynchronous-programming-background\" style=\"position:relative;\"><a href=\"#asynchronous-programming-background\" aria-label=\"asynchronous programming background permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronous programming background</h2>\n<p>Because JavaScript originated as a programming language for the web, asynchronous programming has existed in it since its inception. Program execution couldn’t wait for user interactions (such as clicks and key presses) before continuing like you would see in console applications. Asynchronous programming in JavaScript provides mechanisms for an application to be notified when events it cares about have just happened.</p>\n<h3 id=\"event-handlers\" style=\"position:relative;\"><a href=\"#event-handlers\" aria-label=\"event handlers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event handlers</h3>\n<p>Event handlers are what I call the first generation of asynchronous programming in JavaScript. You simply assigned a function to an event property and it was called whenever that event happened. Here’s the event handler way of making an XHR request.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">,</span>\n  request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nrequest<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n\nrequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> responseJson <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// do something with daa</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'request failed!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nrequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  request<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This style is so old that it may actually be unfamiliar for some JavaScript developers. Most developers nowadays are used to callbacks.</p>\n<h3 id=\"callbacks\" style=\"position:relative;\"><a href=\"#callbacks\" aria-label=\"callbacks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Callbacks</h3>\n<p>JavaScript libraries, like jQuery, aimed to ease development pains by hiding event handlers behind functions that called a specified <em>callback</em> function when the event was trigged. This programming style of using callbacks is also called <em>continuation-passing style</em> (CPS) because the next step (the continuation) is explicitly passed in as a parameter:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  request<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n\n  request<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> data<span class=\"token punctuation\">,</span> error\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>reques<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      data <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>responseText\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      error <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'request failed!'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> data<span class=\"token punctuation\">,</span> error<span class=\"token operator\">:</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  request<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token operator\">:</span> e <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    request<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token operator\">:</span> e <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">responseObj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>responseObj<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data!'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>responseObj<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>responseObj<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The callback pattern, while more convenient to use than event handlers, still had several drawbacks. The first is apparent in the example. The callback function has two ways of handling errors: <code class=\"language-text\">if-else</code> on the returned data and <code class=\"language-text\">try-catch</code> around any operations within the function.</p>\n<p>Secondly, callback functions proved to be untenable when developers had callbacks within callback within callbacks. This affectionately became known as <em>callback hell</em>. Let’s say for example after you retrieved <code class=\"language-text\">/json/data.json</code> you needed to make another <code class=\"language-text\">fetch</code> request <em>based</em> on the returned data from the first request:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">responseObj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>responseObj<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>responseObj<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main data'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// now call `fetch` again to retrieve new data</span>\n      <span class=\"token comment\">// based on the response data</span>\n      <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">responseObjInner</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>responseObjInner<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'inner data'</span><span class=\"token punctuation\">,</span> responseObjInner<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>responseObjInner<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>responseObj<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>It’s already a mess and we’re only two levels deep without any real implementation!</p>\n<p>Attempting to manage multiple active callbacks is also pretty complicated. Imagine you wanted to fire off multiple <code class=\"language-text\">fetch</code> requests simultaneously and then you wanted to process the results when they are <em>all</em> done? Or what if you wanted to time out a <code class=\"language-text\">fetch</code> request after it had run for more than 10 seconds? It’s doable, but challenging with callbacks.</p>\n<p>Enter promises.</p>\n<h3 id=\"promises\" style=\"position:relative;\"><a href=\"#promises\" aria-label=\"promises permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Promises</h3>\n<p>Promises ushered in the 3rd generation of asynchronous programming. A promise represents the eventual result of an asynchronous operation. Instead of registering a callback in the call to an async function (such as <code class=\"language-text\">fetch</code>), the function returns a promise. The caller then registers callbacks with the <em>promise</em> (not the function) to receive either the promise’s eventual value from the async operation or the reason why the promise could not be fulfilled.</p>\n<p>ECMAScript 6 brings native promise support to JavaScript following the <a href=\"https://github.com/promises-aplus/promises-spec\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Promise/A+</a> standard. Promises have actually existed for quite some time in JavaScript as external libraries. The following libraries also follow the Promise/A+ standard:</p>\n<ul>\n<li><a href=\"https://github.com/tildeio/rsvp.js/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RSVP.js</a> by <a href=\"https://twitter.com/stefanpenner\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Stefan Penner</a></li>\n<li><a href=\"https://github.com/jakearchibald/es6-promise\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ES6 Promise Polyfill</a> by <a href=\"https://twitter.com/jaffathecake\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jake Archibald</a></li>\n<li><a href=\"https://github.com/getify/native-promise-only\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Native Promise Only</a> by <a href=\"https://twitter.com/getify\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Kyle Simpson</a></li>\n<li><a href=\"https://github.com/kriskowal/q#using-qpromise\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Q.Promise</a> by <a href=\"https://twitter.com/kriskowal\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Kris Kowal</a></li>\n<li><a href=\"https://github.com/calvinmetcalf/lie\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Lie</a> by <a href=\"https://twitter.com/CWMma\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Calvin Metcalf</a></li>\n<li><a href=\"https://github.com/paulmillr/es6-shim\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ES6 Shim</a> by <a href=\"https://twitter.com/paulmillr\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Paul Miller</a></li>\n<li><a href=\"https://github.com/cujojs/when\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">when</a> by <a href=\"http://cujojs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cujoJS</a></li>\n</ul>\n<p>The new <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Fetch API</a> provides a <code class=\"language-text\">fetch</code> method that is an updated and promise-backed version of <code class=\"language-text\">XMLHttpRequest</code>. In fact, moving forward, all asynchronous APIs will be promise-backed. If we wanted to turn our callback-style <code class=\"language-text\">fetch</code> function from before to be promised-backed, we could create a poor man’s version of the new Fetch API:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// return a Promise object</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    request<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n\n    request<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// fulfill the promise</span>\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// reject the promise</span>\n        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'request failed!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    request<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main data'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// now call `fetch` again to retrieve new data</span>\n    <span class=\"token comment\">// based on the response data</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'inner data'</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// catching all failures!</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Much nicer to use, eh? Don’t worry if you don’t understand everything going on. We’re going to spend the rest of our time breaking apart this example. You’ll notice that callbacks still exist, but they are attached to the promise and not the function itself. A different promise callback is called depending on the outcome.</p>\n<p>The error callback (<code class=\"language-text\">catch()</code>) is particularly convenient for two reasons:</p>\n<ol>\n<li>It’s a single style of handling errors. Remember the the <code class=\"language-text\">if-else</code> and all the <code class=\"language-text\">try-catch</code> blocks in the callback-style approach? <code class=\"language-text\">try-catch</code> isn’t needed in creating a <code class=\"language-text\">Promise</code> nor in handling one.</li>\n<li>You can handle the errors from executing the async request (XHR in this case) or errors introduced by handling the async request (in <code class=\"language-text\">then()</code> callbacks) from a single location (<code class=\"language-text\">catch()</code> callback).</li>\n</ol>\n<p>Point #2 is one of the big reasons why jQuery’s <a href=\"http://api.jquery.com/category/deferred-object/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">Deferred</code> object</a> is not Promise/A+. Instead, errors in handling the async request that are uncaught are bubbled up to <code class=\"language-text\">window.error</code>. However, jQuery 3’s <code class=\"language-text\">Deferred</code> object will be Promise/A+.</p>\n<p>By the way, if you’re interested in a polyfill for Fetch API, check out Github’s <a href=\"https://github.com/github/fetch\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">whatwg-fetch</code></a> library.</p>\n<h3 id=\"reactive-programming\" style=\"position:relative;\"><a href=\"#reactive-programming\" aria-label=\"reactive programming permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reactive programming</h3>\n<p>Reactive programming (built on top of functional programming) is positioning itself as the next generation of asynchronous programming. <a href=\"https://github.com/Reactive-Extensions/RxJS\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Reactive extensions</a> implements reactive programming in JavaScript. From the <code class=\"language-text\">README</code>:</p>\n<blockquote>\n<p>One question you may ask yourself, is why RxJS? What about Promises? Promises are good for solving asynchronous operations such as querying a service with an XMLHttpRequest, where the expected behavior is one value and then completion. The Reactive Extensions for JavaScript unifies both the world of Promises, callbacks as well as evented data such as DOM Input, Web Workers, Web Sockets. Once we have unified these concepts, this enables rich composition.</p>\n</blockquote>\n<p>But let’s not get ahead of ourselves here. Let’s stick to learning about promises.</p>\n<h2 id=\"making-a-promise\" style=\"position:relative;\"><a href=\"#making-a-promise\" aria-label=\"making a promise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Making a promise</h2>\n<p>A promise can be in one of the following three states:</p>\n<ul>\n<li><strong>Unsettled/pending</strong> - the promise’s async operation has yet to compute its result</li>\n<li><strong>Settled: fulfilled</strong> - the promise’s async operation has completed successfully and computed a result to return</li>\n<li><strong>Settled: rejected</strong> - the promise’s async operation did not complete successfully, most likely due to an error</li>\n</ul>\n<p>A promise is settled (the async operation has completed) if it is either fulfilled or rejected. A promise can only transition from unsettled to settled <strong>one</strong> time and it remains settled. Attempting to settle an already settled promise does nothing. Here’s a visualization of the (short) lifecycle of a promise from <a href=\"http://exploringjs.com/es6/ch_promises.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Axel Rauschmayer</a>:</p>\n<p><img src=\"https://exploringjs.com/es6/images/promises----promise_states_simple.jpg\" alt=\"lifecyle of a promise\"></p>\n<p>Let’s take a look again at the <code class=\"language-text\">Promise</code> constructor in our promised-back <code class=\"language-text\">fetch</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// return a Promise object</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    request<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n\n    request<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// fulfill the promise</span>\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// reject the promise</span>\n        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'request failed!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    request<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The function passed to the <code class=\"language-text\">Promise</code> constructor is called the <em>executor</em>. If the async function’s computation went well, the executor sends the result via <code class=\"language-text\">resolve()</code>. This typically will fulfill the promise. However, if you resolve the promise with another <code class=\"language-text\">Promise</code> (more on this later), the promise may not be fulfilled.</p>\n<p>If an error happened or the async operation failed, the executor informs the user of the promise via <code class=\"language-text\">reject()</code>. This always rejects the promise. Like <code class=\"language-text\">throw</code> in plain old JavaScript, it’s suggested that you call <code class=\"language-text\">reject()</code> with an <code class=\"language-text\">Error</code> object. On of the benefits of passing along an <code class=\"language-text\">Error</code> object is that it will capture a stack trace, which makes debugging much easier.</p>\n<p>If an error is thrown <em>within</em> the executor, the promise’s <code class=\"language-text\">reject()</code> handler is automatically called.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error!'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>So we’re intentionally throwing an error within the executor, but lets pretend that this error happened while performing the async operation (like making an XHR request). There is an implicit <code class=\"language-text\">try-catch</code> inside of every executor. This means that any errors are caught and passed along to the <code class=\"language-text\">reject()</code> handler. Basically, the example would be equivalent to:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"claiming-a-promise\" style=\"position:relative;\"><a href=\"#claiming-a-promise\" aria-label=\"claiming a promise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Claiming a promise</h2>\n<p>Consumers of promises are notified of either fulfillment or rejection by what are called <em>reactions</em>. These are callbacks registered with the <code class=\"language-text\">then()</code> method on a <code class=\"language-text\">Promise</code>. From our promised-backed <code class=\"language-text\">fetch</code> earlier:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// handle response data</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// handle errors</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">then()</code> method accepts two arguments:</p>\n<ol>\n<li>The first argument is the function to call when the promise is fulfilled. Any additional data related to the async operation (such as the response from the XHR request) is passed into this fulfillment reaction</li>\n<li>The second argument is the function to call when the promise is rejected. The rejection reaction can also be passed additional data. As mentioned, this usually is an <code class=\"language-text\">Error</code> object.</li>\n</ol>\n<p>If you are only interested in a fulfillment, you can omit the second parameter to <code class=\"language-text\">then()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// handle response data</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>If you’re only interested in a rejection, you can skip the first parameter to <code class=\"language-text\">then()</code> by passing <code class=\"language-text\">null</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// handle errors</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Alternatively, you can use the <code class=\"language-text\">catch()</code> method which is more succinct:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// handle errors</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>The convention is to use <code class=\"language-text\">then()</code> exclusively for fulfillments and <code class=\"language-text\">catch()</code> exclusively for errors. This nicely labels the reactions. The advantage of using <code class=\"language-text\">then()</code> and <code class=\"language-text\">catch()</code> over the old-generation event handlers and callbacks is that it’s completely clear whether the code is handling success or failure. Many times with callbacks there is a single callback and within it you have to do an <code class=\"language-text\">if</code> check against any errors.</p>\n<p>By the way, if you fail to attach a rejection reaction to a promise and an error does occur, the promise will fail gracefully. The failure will happen silently. The convention is to always attach a rejection reaction to a promise even if all it ends up doing is logging the failure.</p>\n<p>One super convenient feature of promises is that there are never any race conditions. It doesn’t matter when you call the <code class=\"language-text\">then()</code> method of a promise. If you’re passed a <code class=\"language-text\">Promise</code> that is already settled and then call <code class=\"language-text\">then()</code>, you will receive the cached settled value immediately. Pretty nice! Speaking of settled promises…</p>\n<h2 id=\"creating-settled-promises\" style=\"position:relative;\"><a href=\"#creating-settled-promises\" aria-label=\"creating settled promises permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating settled promises</h2>\n<p>Normally you would create an unsettled promise via the <code class=\"language-text\">Promise</code> constructor. The promise would get settled once the async operation has been successful (fulfilled) or unsuccessful (rejected). These are the examples we’ve just covered. However, you can create “immediately” settled promises in either the fulfilled or rejected state.</p>\n<p>Let’s say we wanted to create an “immediately” fulfilled promise:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Promise.resolve() creates a promise</span>\n<span class=\"token comment\">// that is \"immediately\" settled &amp; fulfilled.</span>\n<span class=\"token comment\">// You can optionally pass a value</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ben'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// output: Ben</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">Promise.resolve()</code> factory method returns an “immediately” fulfilled promise on which we call its <code class=\"language-text\">then()</code> method to get the passed value. If a rejection reaction were added to this promise, it would never get called because the promise will never be in a rejected state.</p>\n<p>One interesting feature with promises is that they are required to <em>always</em> be asynchronous. That’s why I’ve been saying “immediately” fulfilled. Even though there’s no async operation when using <code class=\"language-text\">Promise.resolve</code> the fulfillment reaction is still handled asynchronously because it is added to the execution queue. Any code after the promise will be executed before the <code class=\"language-text\">console.log</code> output. For instance:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Promise.resolve() creates a promise</span>\n<span class=\"token comment\">// that is \"immediately\" settled &amp; fulfilled.</span>\n<span class=\"token comment\">// You can optionally pass a value.</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sin'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">problem</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// output: sin</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>problem<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Even though the promise is \"immediately\"</span>\n<span class=\"token comment\">// fulfilled, all promises are required to</span>\n<span class=\"token comment\">// be asynchronous. Therefore the fulfillment</span>\n<span class=\"token comment\">// reaction is added to the execution queue</span>\n<span class=\"token comment\">// and the following line executes first.</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this executes before the fulfillment'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>You can also “immediately” reject promises using the <code class=\"language-text\">Promise.reject()</code> factory method. This works exactly like <code class=\"language-text\">Promise.resolve()</code> except that the promise is created in the rejected state.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Promise.reject() creates a promise that</span>\n<span class=\"token comment\">// is \"immediately\" settled &amp; rejected. You</span>\n<span class=\"token comment\">// should pass an `Error` object.</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Pride!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Similarly, because promises *must* be</span>\n<span class=\"token comment\">// asynchronous, this line will execute first</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this executes before the rejection'</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>And just like with <code class=\"language-text\">Promise.resolve()</code>, if a fulfillment reaction (<code class=\"language-text\">then()</code>) were added to this “immediately” rejected promise, that handler would never be called.</p>\n<p>What happens when you pass a <code class=\"language-text\">Promise</code> to <code class=\"language-text\">Promise.resolve()</code> or <code class=\"language-text\">Promise.reject()</code>? Nothing. The promise is just returned:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> fetchPromise <span class=\"token operator\">=</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Fulfilling or rejecting an already existing</span>\n<span class=\"token comment\">// promise does nothing. It's just returned</span>\n<span class=\"token comment\">// output: true</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>fetchPromise<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> fetchPromise<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>fetchPromise<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> fetchPromise<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Why in the world would you pass a <code class=\"language-text\">Promise</code> object to <code class=\"language-text\">Promise.resolve()</code> or <code class=\"language-text\">Promise.reject()</code>? Well it’ll make sense after your learn about <em>thenables</em>.</p>\n<h3 id=\"thenables\" style=\"position:relative;\"><a href=\"#thenables\" aria-label=\"thenables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Thenables</h3>\n<p>A <code class=\"language-text\">thenable</code> as defined by the Promise API spec is any object that has a <code class=\"language-text\">Promise</code>-style <code class=\"language-text\">then()</code> method. This means that the method accepts two arguments that are functions (<code class=\"language-text\">resolve()</code> and <code class=\"language-text\">reject()</code>). Therefore, a <code class=\"language-text\">Promise</code> is also a <code class=\"language-text\">thenable</code>.</p>\n<p>If this were C# or Java, there would be an <code class=\"language-text\">IThenable</code> interface that defined one method called <code class=\"language-text\">then</code> which accepted two lambda functions. The <code class=\"language-text\">Promise</code> class would implement the <code class=\"language-text\">IThenable</code> interface. But because <code class=\"language-text\">IThenable</code> is an interface, any class could implement it. Although JavaScript doesn’t have interfaces, the concept is still the same:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Resolving a `thenable` returns a `Promise`</span>\n<span class=\"token comment\">// on which you can add `then()` or `catch()`</span>\n<span class=\"token comment\">// reactions</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// A `thenable` is an object that</span>\n  <span class=\"token comment\">// has a Promise-style `then` method.</span>\n  <span class=\"token comment\">// Using method definition shorthand!</span>\n  <span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ben'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// using property value shorthand!</span>\n  <span class=\"token comment\">// output: {name: 'Ben'}</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The <code class=\"language-text\">thenable</code> object in this example is just a simple object literal (using <a href=\"/blog/learning-es6-enhanced-object-literals/#method-definition-shorthand\">object method shorthand</a>). It’s not at all like a full-fledged <code class=\"language-text\">Promise</code> object except for the fact that it has a <code class=\"language-text\">then()</code> method. It implements the ”<code class=\"language-text\">IThenable</code>” interface.</p>\n<p>And thenables are not limited to object literals. <em>Any</em> object that has a Promise-style <code class=\"language-text\">then()</code> method is a <code class=\"language-text\">thenable</code>, including the jQuery <a href=\"http://api.jquery.com/deferred.then/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Deferred object</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">$fetch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>$<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">$fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'response'</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The return value from <code class=\"language-text\">$.get(url)</code> is a <code class=\"language-text\">thenable</code> (a jQuery-style promise). The example calls <code class=\"language-text\">Promise.resolve()</code> on that return value to create an ES6-style <code class=\"language-text\">Promise</code>. That’s some pretty nice interoperability.</p>\n<p>As you might’ve guessed, any <code class=\"language-text\">thenable</code> can also be converted into a rejected <code class=\"language-text\">Promise</code> using <code class=\"language-text\">Promise.reject()</code>. When in doubt about whether or not the object you have is an ES6-style <code class=\"language-text\">Promise</code>, just go ahead and call <code class=\"language-text\">Promise.resolve()</code> or <code class=\"language-text\">Promise.reject()</code> on the object. If the object is already a <code class=\"language-text\">Promise</code>, nothing will happen to it. Otherwise, you’ll be able to convert a <code class=\"language-text\">thenable</code> into a <code class=\"language-text\">Promise</code>.</p>\n<p>This allows for chaining of promises to accomplish more complex asynchronous behavior that you could never easily accomplish with callbacks.</p>\n<h2 id=\"chaining-promises\" style=\"position:relative;\"><a href=\"#chaining-promises\" aria-label=\"chaining promises permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chaining promises</h2>\n<p>The <code class=\"language-text\">Promise</code> API functionality we’ve leveraged so far has been great. I would definitely use it over callbacks or event handlers, even if it is only a minor improvement. But promises demonstrate their real power when you leverage their ability to be chained together.</p>\n<p>You see, each call to <code class=\"language-text\">then()</code> or <code class=\"language-text\">catch()</code> under the hood actually creates and returns another promise. Remember our example from above?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main data'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// now call `fetch` again to retrieve new data</span>\n    <span class=\"token comment\">// based on the response data, which returns</span>\n    <span class=\"token comment\">// a promise</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'inner data'</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// an empty fulfilled promise is returned</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Without chaining, the code would look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">let</span> fetchPromise <span class=\"token operator\">=</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> innerFetchPromise <span class=\"token operator\">=</span> fetchPromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main data'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// now call `fetch` again to retrieve new data</span>\n  <span class=\"token comment\">// based on the response data, which returns</span>\n  <span class=\"token comment\">// a promise</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\ninnerFetchPromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'inner data'</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// an empty fulfilled promise is returned</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>And of course that last call to <code class=\"language-text\">innerFetchPromise.then()</code> would also return a promise. We just didn’t need to consume it.</p>\n<h3 id=\"returning-values\" style=\"position:relative;\"><a href=\"#returning-values\" aria-label=\"returning values permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Returning values</h3>\n<p>Another key aspect of promise chaining is the ability pass data from one promise onto the next. When an unsettled promise is created and the async operation is successful, typically a value (such as the XHR response) is passed to <code class=\"language-text\">resolve()</code> by the executor to fulfill the promise. Well, value passing doesn’t stop there. Promise reactions can continue to pass along values by returning them.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Create immediately fulfilled promise</span>\n<span class=\"token comment\">// that returns 'Ben'</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ben'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">firstName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// output: Ben</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>firstName<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>firstName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> A.</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">firstAndMiddle</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// output: Ben A.</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>firstAndMiddle<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>firstAndMiddle<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> Ilegbodu</span><span class=\"token template-punctuation string\">`</span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fullName</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// output: Ben A. Ilegbodu</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Notice the use of <a href=\"/blog/learning-es6-template-literals-tagged-templates/#template-literal-interpolation\">ES6 string interpolation</a>! Of course this is a very contrived example, but passing values can be useful if you need to take the result of a settled promise, process that result and create a new promise from it. If the processing can potentially throw errors, you’ll be able to easily catch those errors along with any other errors happening in the promise chain. You can jump ahead to <a href=\"#error-handling\">Error handling</a> if you’re interested.</p>\n<p>You’re more likely to want to return a <code class=\"language-text\">Promise</code> (or <code class=\"language-text\">thenable</code>) than actual values. More than likely you could do all of your value processing in a single <code class=\"language-text\">then()</code> reaction. But if you wanted to make sequential async operations (like XHR requests that depend on the response of a previous request), after getting the response of the first operation, you would kick off the next operation based on data from the first and return the second operation’s <code class=\"language-text\">Promise</code>. We saw an example of this earlier:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'main data'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// now call `fetch` again to retrieve new data</span>\n    <span class=\"token comment\">// based on the response data, which returns</span>\n    <span class=\"token comment\">// a new promise</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'inner data'</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Like we discussed in the section on <a href=\"#callbacks\">Callbacks</a>, the callback version of this code is the makings of <em>callback hell</em> because the call to the second <code class=\"language-text\">fetch</code> would be in the callback handler of the first. Promises nicely flatten this out with chaining. They also provide a unified location to handle errors.</p>\n<h3 id=\"error-handling\" style=\"position:relative;\"><a href=\"#error-handling\" aria-label=\"error handling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Error handling</h3>\n<p>The <code class=\"language-text\">catch()</code> reaction is the way you handle errors with promises. We learned all about <code class=\"language-text\">catch()</code> when we learned about <a href=\"#claiming-a-promise\">claiming promises</a>. Promise chaining now allows you to catch any errors that may occur in a previous <code class=\"language-text\">then()</code> or <code class=\"language-text\">catch()</code> reaction.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Create immediately fulfilled, but</span>\n<span class=\"token comment\">// empty promise</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// throw an `Error` which should be</span>\n    <span class=\"token comment\">// caught by `catch()`</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'oh no!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// output: 'oh no!' error with call</span>\n    <span class=\"token comment\">// stack info</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This sort of thing just wasn’t feasible with callbacks unless you explicitly added a <code class=\"language-text\">try-catch</code> inside the callback. But what if your rejection reaction itself throws an error? Well you can <code class=\"language-text\">catch()</code> that too!</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Create immediately fulfilled, but</span>\n<span class=\"token comment\">// empty promise</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// throw an `Error` which should be</span>\n    <span class=\"token comment\">// caught by `catch()`</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'oh no!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// output: 'oh no!' error with call</span>\n    <span class=\"token comment\">// stack info</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// throw another `Error` within this</span>\n    <span class=\"token comment\">// error handler, which can be caught</span>\n    <span class=\"token comment\">// by a follow-up error handler</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'again?!?!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// output: 'again?!?!' error</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Interestingly enough, if you decide to return a value in your rejection reaction instead of throwing an <code class=\"language-text\">Error</code>, it becomes a fulfillment value for the next promise. This allows you to specify default values to use in case of failure without having to break chaining.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/bad-data.json'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// There was an error retrieving data</span>\n    <span class=\"token comment\">// so just return default data</span>\n    <span class=\"token keyword\">return</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Ben Ilegbodu'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// at this point we should always have</span>\n    <span class=\"token comment\">// valid data regardless of if the `fetch`</span>\n    <span class=\"token comment\">// was successful</span>\n    <span class=\"token comment\">// output: {name: 'Ben Ilegbodu'}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Pretty helpful, huh? But wait, there’s more! The <code class=\"language-text\">catch()</code> does not need to immediately follow the promise that caused the error. Errors are passed down the promise chain until a <code class=\"language-text\">catch()</code> reaction is found. If no reject reaction is found, the error fails silently.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Create immediately rejected and empty</span>\n<span class=\"token comment\">// promise</span>\nPromise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FAIL!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// because the promise is rejected,</span>\n    <span class=\"token comment\">// this fulfillment reaction is never called</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// neither is this one</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// instead this reject reaction is called</span>\n    <span class=\"token comment\">// to handle the rejection that happened further</span>\n    <span class=\"token comment\">// up the chain</span>\n    <span class=\"token comment\">// output: 'FAIL!' error</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Even more helpful! If you stick a <code class=\"language-text\">catch()</code> at the end of your promise chain it’ll always get called no matter where an error occurs. Even if all the <code class=\"language-text\">catch()</code> does is log the error and rethrow, it’s a good practice to perform.</p>\n<h2 id=\"promise-composition\" style=\"position:relative;\"><a href=\"#promise-composition\" aria-label=\"promise composition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Promise composition</h2>\n<p>Up until this point, we have composed promises using sequential chaining. The next promise doesn’t get handled until the previous promise is settled (either fulfilled or rejected). However, there are times when you will want to track multiple async operations at the same time in order to determine what to do next.</p>\n<p>ECMAScript 6 provides additional ways of composing promises via the <code class=\"language-text\">Promise.all</code> and <code class=\"language-text\">Promise.race</code> helpers.</p>\n<h3 id=\"code-classlanguage-textpromiseallcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textpromiseallcode\" aria-label=\"code classlanguage textpromiseallcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">Promise.all</code></h3>\n<p>Let’s say you have multiple async requests you want to fire off in <em>parallel</em> and then once they are done you want to use their results to do some additional processing. In the callback world you would have to maintain a variable that keeps track of which requests have returned and which haven’t. You will also need a data structure that would contain the results (and potentially in the order in which the requests were called). While this is doable with callbacks, it’s unnecessarily complex and error-prone, especially when you also need to do error handling.</p>\n<p>The <code class=\"language-text\">Promise.all</code> method makes this significantly easier. It takes an array of promises as a parameter and returns a <code class=\"language-text\">Promise</code> that will be fulfilled with an array of response values only when <em>all</em> of the promises are fulfilled.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Return a promise that is only fulfilled once</span>\n<span class=\"token comment\">// all of the url fetch requests are fulfilled</span>\n<span class=\"token comment\">// via Promise.all</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">fetchAll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>urls</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Use rest parameter to aggregate URLs</span>\n  <span class=\"token comment\">// into an array</span>\n\n  <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// map the array of urls into an array</span>\n    <span class=\"token comment\">// of `fetch` promises</span>\n    urls<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>fetch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Make an XHR request for each URL and</span>\n<span class=\"token comment\">// process the results once they've *all*</span>\n<span class=\"token comment\">// completed</span>\n<span class=\"token function\">fetchAll</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/json/data2.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/json/data3.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/json/data4.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/json/data5.json'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">responses</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// `responses` is the array of response</span>\n  <span class=\"token comment\">// data</span>\n\n  <span class=\"token comment\">// output: 5</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>responses<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// more processing of results</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Much easier, huh? Much more readable too. The example also leverages <a href=\"/blog/learning-es6-parameter-handling/#rest-parameters\">rest parameters</a>. I like to think of it as somewhat analogous to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">Array.prototype.every</code></a>, which returns <code class=\"language-text\">true</code> (success) if all of the elements of the array pass the test implemented in the callback.</p>\n<p>If any of the promises are rejected (i.e. fail), then the aggregator <code class=\"language-text\">Promise</code> from <code class=\"language-text\">Promise.all</code> also is rejected. You can use the <code class=\"language-text\">catch()</code> reaction to catch these failures.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Make an XHR request for each URL and</span>\n<span class=\"token comment\">// process the results once they've *all*</span>\n<span class=\"token comment\">// completed</span>\n<span class=\"token function\">fetchAll</span><span class=\"token punctuation\">(</span>\n  <span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/json/data2.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/json/data3.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/json/data4.json'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/json/data5.json'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">responses</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// `responses` is the array of response</span>\n    <span class=\"token comment\">// data</span>\n\n    <span class=\"token comment\">// output: 5</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>responses<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// more processing of results</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// one or more of the requests failed</span>\n    <span class=\"token comment\">// or there was an error in `then()`</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Imagine trying to replicate this level of error handling with callbacks! It’s worth mentioning that all of the promises ultimately settle even if one of them settles in a rejected state while some are still pending. They won’t get cancelled. You should also know that <code class=\"language-text\">Promise.all</code> also accepts non-<code class=\"language-text\">Promise</code> objects. Any <code class=\"language-text\">thenable</code> or non-<code class=\"language-text\">Promise</code> objects are auto-resolved using <code class=\"language-text\">Promise.resolve</code>.</p>\n<h3 id=\"code-classlanguage-textpromiseracecode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textpromiseracecode\" aria-label=\"code classlanguage textpromiseracecode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">Promise.race</code></h3>\n<p>I find <code class=\"language-text\">Promise.race</code> to be a little less useful than <code class=\"language-text\">Promise.all</code>. It operates on an array of <code class=\"language-text\">Promise</code> objects and returns a promise as well. The difference is that the resultant promise settles based on the first settlement of the array of promises. It’s a race! If the first promise to settle in the array of promises is fulfilled (aka a success), then the resultant promise will be fulfilled. However, if the first settled promise is rejected (aka a failure), then the resultant promise will be rejected as well.</p>\n<p>How it works is a bit weird, and best explained with a use-case. The best one I could find for <code class=\"language-text\">Promise.race</code> is timing out an async operation. Let’s say you want to make a promise-based <code class=\"language-text\">fetch</code>, but that request could take a long time and you want to time out after 5 seconds if the request has yet to return a response. Using <code class=\"language-text\">Promise.race</code> we can combine our promise-based <code class=\"language-text\">fetch</code> with our promise-based <a href=\"#tldr\"><code class=\"language-text\">wait</code></a> from earlier. If the <code class=\"language-text\">wait</code> <em>wins</em> the “race,” then a timeout has occurred and we can handle the error appropriately.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// Extend the promise-based `wait` by throwing</span>\n<span class=\"token comment\">// an Error if the delay is successful</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">delay <span class=\"token operator\">=</span> <span class=\"token number\">3000</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">wait</span><span class=\"token punctuation\">(</span>delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Timed out!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Return a promise that will be fulfilled if</span>\n<span class=\"token comment\">// the fetch is fulfilled before the timeout</span>\n<span class=\"token comment\">// is rejected.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">fetchWithTimeout</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token punctuation\">,</span> delay <span class=\"token operator\">=</span> <span class=\"token number\">3000</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// construct an array to pass to `Promise.race`</span>\n  <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">race</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">timeout</span><span class=\"token punctuation\">(</span>delay<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Make an XHR request for the URL that has to</span>\n<span class=\"token comment\">// return a response *before* the 5 ms timeout</span>\n<span class=\"token comment\">// happens</span>\n<span class=\"token function\">fetchWithTimeout</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/json/data.json'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// successful response before the 5 ms timeout</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'successful response'</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Either the timeout occurred or some other error.</span>\n    <span class=\"token comment\">// Would need to check the method or use a custom</span>\n    <span class=\"token comment\">// `Error` subclass in `timeout`</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'request error'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>At first, it may seem weird to throw an <code class=\"language-text\">Error</code> in <code class=\"language-text\">timeout</code> when the <code class=\"language-text\">delay</code> is successful, but it makes sense. We <em>want</em> it to be an error if the timeout actually happens. That way we can distinguish success from failure in the “race”. When <code class=\"language-text\">timeout</code> settles, it will be a rejection. When <code class=\"language-text\">fetch</code> settles, it will be a fulfillment. Therefore, whichever one settles first, will win the “race” and we can react appropriately. The <code class=\"language-text\">then</code> reaction will retrieve the success response and the <code class=\"language-text\">catch</code> reaction will handle the timeout.</p>\n<p>As mentioned in the comment, if you really wanted <code class=\"language-text\">timeout</code> to be useful it would return a custom <code class=\"language-text\">Error</code> object so that callers could just type check the <code class=\"language-text\">Error</code> object they receive instead of having to compare error messages. This is because if the <code class=\"language-text\">fetch</code> fails for some reason, it will also go to the <code class=\"language-text\">catch</code> reaction.</p>\n<p><code class=\"language-text\">Promise.race</code> can work with an array of any size, but I can’t really think of a realistic use case where you’d want to fire off multiple async operations, only caring about the first one that returns. But I’m sure there is one.</p>\n<h2 id=\"inheriting-from-code-classlanguage-textpromisecode\" style=\"position:relative;\"><a href=\"#inheriting-from-code-classlanguage-textpromisecode\" aria-label=\"inheriting from code classlanguage textpromisecode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inheriting from <code class=\"language-text\">Promise</code></h2>\n<p>Just like with other built-in types, the <code class=\"language-text\">Promise</code> class can be subclassed to create your own more specific promise objects. Let’s say you don’t like the names <code class=\"language-text\">then()</code> and <code class=\"language-text\">catch()</code> and want to use <code class=\"language-text\">done()</code> and <code class=\"language-text\">fail()</code> instead (to be more like jQuery). You could subclass <code class=\"language-text\">Promise</code> to add in these methods.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">JPromise</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Promise</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// use the default constructor. no need to</span>\n  <span class=\"token comment\">// override it</span>\n\n  <span class=\"token comment\">// callback registered via `done` will only</span>\n  <span class=\"token comment\">// be called when the `Promise` is fulfilled</span>\n  <span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// intentionally omitting the `reject` callback</span>\n    <span class=\"token comment\">// that's also passed to `then`</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// `fail` is just a name wrapper around `catch`</span>\n  <span class=\"token function\">fail</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">reject</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>reject<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nJPromise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ben Ilegbodu'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">done</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'using done instead of then!'</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FAIL for fun!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">fail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sad face'</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>This example shows ES6 classes which we haven’t discussed yet, but if you’ve used classes in any other programming language, it should make sense to you. We’ll be covering them in greater detail soon.</p>\n<p>You may have also noticed the use of <code class=\"language-text\">JPromise.resolve</code> instead of just <code class=\"language-text\">Promise.resolve</code> to create the promise. <code class=\"language-text\">resolve</code> and <code class=\"language-text\">reject</code> are also inherited so when we call them on <code class=\"language-text\">JPromise</code>, we get back a <code class=\"language-text\">JPromise</code> object instead of a generic <code class=\"language-text\">Promise</code> object.</p>\n<h2 id=\"wrapping-things-up\" style=\"position:relative;\"><a href=\"#wrapping-things-up\" aria-label=\"wrapping things up permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Wrapping things up</h2>\n<p>We’re entering the home stretch now!</p>\n<p>While the <code class=\"language-text\">Promise</code> API based on the Promises/A+ standard is crazy powerful, it’s still lacking some useful functionality that exist in some of our existing promise libraries.</p>\n<p>The first omission is the ability to cancel a <code class=\"language-text\">Promise</code>. This could come in handy when using <code class=\"language-text\">Promise.all</code> or <code class=\"language-text\">Promise.race</code>. If one promise’s completion causes the result of others to no longer matter, it’d be nice to be able to cancel them. The <a href=\"https://github.com/promises-aplus/cancellation-spec\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cancellation spec</a> is already under development for Promises/A+.</p>\n<p>The second omission is the ability to query the progress of a <code class=\"language-text\">Promise</code>. Imagine making a <code class=\"language-text\">fetch</code> call of a 100MB file. Being a able to display a progress indicator would be pretty helpful. Thankfully, the <a href=\"https://github.com/promises-aplus/progress-spec\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">progress spec</a> too is under development for Promises/A+.</p>\n<p>Promises are good for async operations that happen one time and then they’re done. You shouldn’t use promises for recurring events (such as clicks, key presses, etc.). If you want an alternative to normal event handling for recurring events, try out <a href=\"http://reactive-extensions.github.io/RxJS/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">reactive programming in JavaScript</a>.</p>\n<h2 id=\"javascript-engine-support\" style=\"position:relative;\"><a href=\"#javascript-engine-support\" aria-label=\"javascript engine support permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JavaScript engine support</h2>\n<p>As of September 27, 2015, according to the <a href=\"http://kangax.github.io/compat-table/es6/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ECMAScript 6 Compatibility table</a> all major JavaScript engines (transpilers, browsers and servers) support the <code class=\"language-text\">Promise</code> API. Some don’t support 100% of the functionality, but the missing pieces most likely won’t be features you’ll be leveraging. The most notable is that Traceur is missing support for generic iterables with <code class=\"language-text\">Promise.all</code> and <code class=\"language-text\">Promise.race</code>.</p>\n<p>If you need support for <code class=\"language-text\">Promise</code> in an older browser, however, check out the <a href=\"https://github.com/stefanpenner/es6-promise\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">es6-promise</code></a> polyfill or just use <a href=\"https://github.com/zloirock/core-js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">core-js</code></a> to get all of the ES6+ polyfills.</p>\n<h2 id=\"additional-resources\" style=\"position:relative;\"><a href=\"#additional-resources\" aria-label=\"additional resources permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional resources</h2>\n<p>As always, you can check out the <a href=\"https://learning-es6.benmvp.com/#promises\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>Learning ES6</em> examples page</a> for the <a href=\"https://github.com/benmvp/learning-es6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>Learning ES6</em> Github repo</a> where you will find all of the code used in this article running natively in the browser.</p>\n<p>I’ve got two great web tools for you to play around with ES6 Promises. First there are the <a href=\"http://es6katas.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ES6 Katas</a> that you’ve come to know and love. But there’s also <a href=\"http://bevacqua.github.io/promisees/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Promisees: A Visualization Playground for Promises</a> by <a href=\"https://twitter.com/nzgb\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Nicolas Bevacqua</a>. It’s pretty cool!</p>\n<p>Since promises aren’t new to JavaScript (just the native <code class=\"language-text\">Promise</code> API included with ES6), there are a lot of books and articles covering it. Here’s a smattering:</p>\n<ul>\n<li><a href=\"http://exploringjs.com/es6/ch_promises.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Promises for asynchronous programming</a> in <a href=\"http://exploringjs.com/es6/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>Exploring ES6</em></a> by <a href=\"https://twitter.com/rauschma\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Axel Rauschmayer</a></li>\n<li><a href=\"https://leanpub.com/understandinges6/read#leanpub-auto-promises\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Promises</a> in <a href=\"https://leanpub.com/understandinges6/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>Understanding ECMAScript 6</em></a> by <a href=\"https://twitter.com/slicknet\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Nicholas C. Zakas</a></li>\n<li><a href=\"http://www.html5rocks.com/en/tutorials/es6/promises/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JavaScript Promises</a> by <a href=\"https://twitter.com/jaffathecake\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jake Archibald</a></li>\n<li><a href=\"https://github.com/kriskowal/q/wiki/Coming-from-jQuery\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Coming from jQuery</a> in <a href=\"https://github.com/kriskowal/q\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">q</a> by <a href=\"https://twitter.com/kriskowal\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Kris Kowal</a></li>\n<li><a href=\"http://exploringjs.com/es6/ch_async.html#ch_async\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Asynchronous Programming</a> in <a href=\"http://exploringjs.com/es6/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><em>Exploring ES6</em></a> by <a href=\"https://twitter.com/rauschma\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Axel Rauschmayer</a></li>\n<li><a href=\"http://taoofcode.net/promise-anti-patterns/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Promise Anti-patterns</a> by <a href=\"http://taoofcode.net/index.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Tao of Code</a></li>\n<li><a href=\"https://github.com/promises-aplus/promises-spec\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Promises/A+ specification</a></li>\n</ul>\n<h2 id=\"coming-up-next\" style=\"position:relative;\"><a href=\"#coming-up-next\" aria-label=\"coming up next permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Coming up next…</h2>\n<p>Wow! That was a meaty one wasn’t it? Up next we’ll take a look at generators in ES6. I’m super excited about generators. They’re something I wanted to learn a while back when they were introduced in C#. Until then…</p>","author":{"@type":"Person","name":"Ben Ilegbodu"},"datePublished":"2015-09-27","publisher":{"@type":"Person","name":"Ben Ilegbodu"},"teaches":"Learning ES6","timeRequired":"PT28M","wordCount":3892}</script><style id="jss-server-side">html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,::after,::before{box-sizing:inherit}b,strong{font-weight:700}body{color:rgba(0,0,0,.87);margin:0;font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;letter-spacing:.01071em;background-color:#fafafa}@media print{body{background-color:#fff}}body::backdrop{background-color:#fafafa}.MuiSvgIcon-root-135{fill:currentColor;width:1em;height:1em;display:inline-block;font-size:1.5rem;transition:fill .2s cubic-bezier(.4,0,.2,1) 0s;flex-shrink:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.MuiSvgIcon-colorPrimary-136{color:#3f51b5}.MuiSvgIcon-colorSecondary-137{color:#1de9b6}.MuiSvgIcon-colorAction-138{color:rgba(0,0,0,.54)}.MuiSvgIcon-colorError-139{color:#f44336}.MuiSvgIcon-colorDisabled-140{color:rgba(0,0,0,.26)}.MuiSvgIcon-fontSizeInherit-141{font-size:inherit}.MuiSvgIcon-fontSizeSmall-142{font-size:1.25rem}.MuiSvgIcon-fontSizeLarge-143{font-size:2.1875rem}.MuiCollapse-container-174{height:0;overflow:hidden;transition:height .3s cubic-bezier(.4,0,.2,1) 0s}.MuiCollapse-entered-175{height:auto;overflow:visible}.MuiCollapse-hidden-176{visibility:hidden}.MuiCollapse-wrapper-177{display:flex}.MuiCollapse-wrapperInner-178{width:100%}.MuiPaper-root-30{color:rgba(0,0,0,.87);transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0s;background-color:#fff}.MuiPaper-rounded-31{border-radius:4px}.MuiPaper-outlined-32{border:1px solid rgba(0,0,0,.12)}.MuiPaper-elevation0-33{box-shadow:none}.MuiPaper-elevation1-34{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.MuiPaper-elevation2-35{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.MuiPaper-elevation3-36{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.MuiPaper-elevation4-37{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.MuiPaper-elevation5-38{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.MuiPaper-elevation6-39{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiPaper-elevation7-40{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.MuiPaper-elevation8-41{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.MuiPaper-elevation9-42{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.MuiPaper-elevation10-43{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.MuiPaper-elevation11-44{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.MuiPaper-elevation12-45{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.MuiPaper-elevation13-46{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.MuiPaper-elevation14-47{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.MuiPaper-elevation15-48{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.MuiPaper-elevation16-49{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.MuiPaper-elevation17-50{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.MuiPaper-elevation18-51{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.MuiPaper-elevation19-52{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.MuiPaper-elevation20-53{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.MuiPaper-elevation21-54{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.MuiPaper-elevation22-55{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.MuiPaper-elevation23-56{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.MuiPaper-elevation24-57{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.MuiButtonBase-root-126{color:inherit;border:0;cursor:pointer;margin:0;display:inline-flex;outline:0;padding:0;position:relative;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;justify-content:center;text-decoration:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.MuiButtonBase-root-126::-moz-focus-inner{border-style:none}.MuiButtonBase-root-126.Mui-disabled{cursor:default;pointer-events:none}@media print{.MuiButtonBase-root-126{-webkit-print-color-adjust:exact;color-adjust:exact}}.MuiIconButton-root-127{flex:0 0 auto;color:rgba(0,0,0,.54);padding:12px;overflow:visible;font-size:1.5rem;text-align:center;transition:background-color 150ms cubic-bezier(.4,0,.2,1) 0s;border-radius:50%}.MuiIconButton-root-127:hover{background-color:rgba(0,0,0,.04)}.MuiIconButton-root-127.Mui-disabled{color:rgba(0,0,0,.26);background-color:transparent}@media (hover:none){.MuiIconButton-root-127:hover{background-color:transparent}}.MuiIconButton-edgeStart-128{margin-left:-12px}.MuiIconButton-sizeSmall-133.MuiIconButton-edgeStart-128{margin-left:-3px}.MuiIconButton-edgeEnd-129{margin-right:-12px}.MuiIconButton-sizeSmall-133.MuiIconButton-edgeEnd-129{margin-right:-3px}.MuiIconButton-colorInherit-130{color:inherit}.MuiIconButton-colorPrimary-131{color:#3f51b5}.MuiIconButton-colorPrimary-131:hover{background-color:rgba(63,81,181,.04)}@media (hover:none){.MuiIconButton-colorPrimary-131:hover{background-color:transparent}}.MuiIconButton-colorSecondary-132{color:#1de9b6}.MuiIconButton-colorSecondary-132:hover{background-color:rgba(29,233,182,.04)}@media (hover:none){.MuiIconButton-colorSecondary-132:hover{background-color:transparent}}.MuiIconButton-sizeSmall-133{padding:3px;font-size:1.125rem}.MuiIconButton-label-134{width:100%;display:flex;align-items:inherit;justify-content:inherit}.MuiAppBar-root-19{width:100%;display:flex;z-index:1100;box-sizing:border-box;flex-shrink:0;flex-direction:column}.MuiAppBar-positionFixed-20{top:0;left:auto;right:0;position:fixed}@media print{.MuiAppBar-positionFixed-20{position:absolute}}.MuiAppBar-positionAbsolute-21{top:0;left:auto;right:0;position:absolute}.MuiAppBar-positionSticky-22{top:0;left:auto;right:0;position:sticky}.MuiAppBar-positionStatic-23{position:static}.MuiAppBar-positionRelative-24{position:relative}.MuiAppBar-colorDefault-25{color:rgba(0,0,0,.87);background-color:#f5f5f5}.MuiAppBar-colorPrimary-26{color:#fff;background-color:#3f51b5}.MuiAppBar-colorSecondary-27{color:rgba(0,0,0,.87);background-color:#1de9b6}.MuiAppBar-colorInherit-28{color:inherit}.MuiAppBar-colorTransparent-29{color:inherit;background-color:transparent}.jss58{margin-top:8px;margin-bottom:8px}@media (min-width:0px){.jss58{margin-left:8px;margin-right:8px}}@media (min-width:600px){.jss58{margin-left:16px;margin-right:16px}}.jss171{max-width:500px;margin-top:16px;margin-left:auto;margin-right:auto;margin-bottom:32px}.jss179{margin-top:8px}.jss196{margin-top:8px}.jss378{color:#fff;margin-top:40px;padding-top:40px;padding-bottom:40px;background-color:#3f51b5}.jss382{padding:0;margin-top:0;margin-bottom:0}.MuiTypography-root-68{margin:0}.MuiTypography-body2-69{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;letter-spacing:.01071em}.MuiTypography-body1-70{font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.5;letter-spacing:.00938em}.MuiTypography-caption-71{font-size:.75rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.66;letter-spacing:.03333em}.MuiTypography-button-72{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.75;letter-spacing:.02857em;text-transform:uppercase}.MuiTypography-h1-73{font-size:6rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:300;line-height:1.167;letter-spacing:-.01562em}.MuiTypography-h2-74{font-size:3.75rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:300;line-height:1.2;letter-spacing:-.00833em}.MuiTypography-h3-75{font-size:3rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.167;letter-spacing:0}.MuiTypography-h4-76{font-size:2.125rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.235;letter-spacing:.00735em}.MuiTypography-h5-77{font-size:1.5rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.334;letter-spacing:0}.MuiTypography-h6-78{font-size:1.25rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}.MuiTypography-subtitle1-79{font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.75;letter-spacing:.00938em}.MuiTypography-subtitle2-80{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.57;letter-spacing:.00714em}.MuiTypography-overline-81{font-size:.75rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:2.66;letter-spacing:.08333em;text-transform:uppercase}.MuiTypography-srOnly-82{width:1px;height:1px;overflow:hidden;position:absolute}.MuiTypography-alignLeft-83{text-align:left}.MuiTypography-alignCenter-84{text-align:center}.MuiTypography-alignRight-85{text-align:right}.MuiTypography-alignJustify-86{text-align:justify}.MuiTypography-noWrap-87{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.MuiTypography-gutterBottom-88{margin-bottom:.35em}.MuiTypography-paragraph-89{margin-bottom:16px}.MuiTypography-colorInherit-90{color:inherit}.MuiTypography-colorPrimary-91{color:#3f51b5}.MuiTypography-colorSecondary-92{color:#1de9b6}.MuiTypography-colorTextPrimary-93{color:rgba(0,0,0,.87)}.MuiTypography-colorTextSecondary-94{color:rgba(0,0,0,.54)}.MuiTypography-colorError-95{color:#f44336}.MuiTypography-displayInline-96{display:inline}.MuiTypography-displayBlock-97{display:block}.MuiButton-root-99{color:rgba(0,0,0,.87);padding:6px 16px;font-size:.875rem;min-width:64px;box-sizing:border-box;transition:background-color 250ms cubic-bezier(.4,0,.2,1) 0s,box-shadow 250ms cubic-bezier(.4,0,.2,1) 0s,border 250ms cubic-bezier(.4,0,.2,1) 0s;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.75;border-radius:4px;letter-spacing:.02857em;text-transform:uppercase}.MuiButton-root-99:hover{text-decoration:none;background-color:rgba(0,0,0,.04)}.MuiButton-root-99.Mui-disabled{color:rgba(0,0,0,.26)}@media (hover:none){.MuiButton-root-99:hover{background-color:transparent}}.MuiButton-root-99:hover.Mui-disabled{background-color:transparent}.MuiButton-label-100{width:100%;display:inherit;align-items:inherit;justify-content:inherit}.MuiButton-text-101{padding:6px 8px}.MuiButton-textPrimary-102{color:#3f51b5}.MuiButton-textPrimary-102:hover{background-color:rgba(63,81,181,.04)}@media (hover:none){.MuiButton-textPrimary-102:hover{background-color:transparent}}.MuiButton-textSecondary-103{color:#1de9b6}.MuiButton-textSecondary-103:hover{background-color:rgba(29,233,182,.04)}@media (hover:none){.MuiButton-textSecondary-103:hover{background-color:transparent}}.MuiButton-outlined-104{border:1px solid rgba(0,0,0,.23);padding:5px 15px}.MuiButton-outlined-104.Mui-disabled{border:1px solid rgba(0,0,0,.12)}.MuiButton-outlinedPrimary-105{color:#3f51b5;border:1px solid rgba(63,81,181,.5)}.MuiButton-outlinedPrimary-105:hover{border:1px solid #3f51b5;background-color:rgba(63,81,181,.04)}@media (hover:none){.MuiButton-outlinedPrimary-105:hover{background-color:transparent}}.MuiButton-outlinedSecondary-106{color:#1de9b6;border:1px solid rgba(29,233,182,.5)}.MuiButton-outlinedSecondary-106:hover{border:1px solid #1de9b6;background-color:rgba(29,233,182,.04)}.MuiButton-outlinedSecondary-106.Mui-disabled{border:1px solid rgba(0,0,0,.26)}@media (hover:none){.MuiButton-outlinedSecondary-106:hover{background-color:transparent}}.MuiButton-contained-107{color:rgba(0,0,0,.87);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);background-color:#e0e0e0}.MuiButton-contained-107:hover{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);background-color:#d5d5d5}.MuiButton-contained-107.Mui-focusVisible{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiButton-contained-107:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.MuiButton-contained-107.Mui-disabled{color:rgba(0,0,0,.26);box-shadow:none;background-color:rgba(0,0,0,.12)}@media (hover:none){.MuiButton-contained-107:hover{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);background-color:#e0e0e0}}.MuiButton-contained-107:hover.Mui-disabled{background-color:rgba(0,0,0,.12)}.MuiButton-containedPrimary-108{color:#fff;background-color:#3f51b5}.MuiButton-containedPrimary-108:hover{background-color:#303f9f}@media (hover:none){.MuiButton-containedPrimary-108:hover{background-color:#3f51b5}}.MuiButton-containedSecondary-109{color:rgba(0,0,0,.87);background-color:#1de9b6}.MuiButton-containedSecondary-109:hover{background-color:#00bfa5}@media (hover:none){.MuiButton-containedSecondary-109:hover{background-color:#1de9b6}}.MuiButton-disableElevation-110{box-shadow:none}.MuiButton-disableElevation-110:hover{box-shadow:none}.MuiButton-disableElevation-110.Mui-focusVisible{box-shadow:none}.MuiButton-disableElevation-110:active{box-shadow:none}.MuiButton-disableElevation-110.Mui-disabled{box-shadow:none}.MuiButton-colorInherit-111{color:inherit;border-color:currentColor}.MuiButton-textSizeSmall-112{padding:4px 5px;font-size:.8125rem}.MuiButton-textSizeLarge-113{padding:8px 11px;font-size:.9375rem}.MuiButton-outlinedSizeSmall-114{padding:3px 9px;font-size:.8125rem}.MuiButton-outlinedSizeLarge-115{padding:7px 21px;font-size:.9375rem}.MuiButton-containedSizeSmall-116{padding:4px 10px;font-size:.8125rem}.MuiButton-containedSizeLarge-117{padding:8px 22px;font-size:.9375rem}.MuiButton-fullWidth-120{width:100%}.MuiButton-startIcon-121{display:inherit;margin-left:-4px;margin-right:8px}.MuiButton-startIcon-121.MuiButton-iconSizeSmall-123{margin-left:-2px}.MuiButton-endIcon-122{display:inherit;margin-left:8px;margin-right:-4px}.MuiButton-endIcon-122.MuiButton-iconSizeSmall-123{margin-right:-2px}.MuiButton-iconSizeSmall-123>:first-child{font-size:18px}.MuiButton-iconSizeMedium-124>:first-child{font-size:20px}.MuiButton-iconSizeLarge-125>:first-child{font-size:22px}.MuiCard-root-366{overflow:hidden}.MuiCardActionArea-root-367{width:100%;display:block;text-align:inherit}.MuiCardActionArea-root-367:hover .MuiCardActionArea-focusHighlight-368{opacity:.04}.MuiCardActionArea-root-367.Mui-focusVisible .MuiCardActionArea-focusHighlight-368{opacity:.12}.MuiCardActionArea-focusHighlight-368{top:0;left:0;right:0;bottom:0;opacity:0;overflow:hidden;position:absolute;transition:opacity 250ms cubic-bezier(.4,0,.2,1) 0s;border-radius:inherit;pointer-events:none;background-color:currentcolor}.MuiCardContent-root-372{padding:16px}.MuiCardContent-root-372:last-child{padding-bottom:24px}.MuiCardMedia-root-369{display:block;background-size:cover;background-repeat:no-repeat;background-position:center}.MuiCardMedia-media-370{width:100%}.MuiCardMedia-img-371{-o-object-fit:cover;object-fit:cover}.MuiContainer-root-156{width:100%;display:block;box-sizing:border-box;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px}@media (min-width:600px){.MuiContainer-root-156{padding-left:24px;padding-right:24px}}.MuiContainer-disableGutters-157{padding-left:0;padding-right:0}@media (min-width:600px){.MuiContainer-fixed-158{max-width:600px}}@media (min-width:960px){.MuiContainer-fixed-158{max-width:960px}}@media (min-width:1280px){.MuiContainer-fixed-158{max-width:1280px}}@media (min-width:1920px){.MuiContainer-fixed-158{max-width:1920px}}@media (min-width:0px){.MuiContainer-maxWidthXs-159{max-width:444px}}@media (min-width:600px){.MuiContainer-maxWidthSm-160{max-width:600px}}@media (min-width:960px){.MuiContainer-maxWidthMd-161{max-width:960px}}@media (min-width:1280px){.MuiContainer-maxWidthLg-162{max-width:1280px}}@media (min-width:1920px){.MuiContainer-maxWidthXl-163{max-width:1920px}}.MuiDivider-root-252{border:none;height:1px;margin:0;flex-shrink:0;background-color:rgba(0,0,0,.12)}.MuiDivider-absolute-253{left:0;width:100%;bottom:0;position:absolute}.MuiDivider-inset-254{margin-left:72px}.MuiDivider-light-255{background-color:rgba(0,0,0,.08)}.MuiDivider-middle-256{margin-left:16px;margin-right:16px}.MuiDivider-vertical-257{width:1px;height:100%}.MuiDivider-flexItem-258{height:auto;align-self:stretch}.MuiDrawer-docked-145{flex:0 0 auto}.MuiDrawer-paper-146{top:0;flex:1 0 auto;height:100%;display:flex;outline:0;z-index:1200;position:fixed;overflow-y:auto;flex-direction:column;-webkit-overflow-scrolling:touch}.MuiDrawer-paperAnchorLeft-147{left:0;right:auto}.MuiDrawer-paperAnchorRight-148{left:auto;right:0}.MuiDrawer-paperAnchorTop-149{top:0;left:0;right:0;bottom:auto;height:auto;max-height:100%}.MuiDrawer-paperAnchorBottom-150{top:auto;left:0;right:0;bottom:0;height:auto;max-height:100%}.MuiDrawer-paperAnchorDockedLeft-151{border-right:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedTop-152{border-bottom:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedRight-153{border-left:1px solid rgba(0,0,0,.12)}.MuiDrawer-paperAnchorDockedBottom-154{border-top:1px solid rgba(0,0,0,.12)}.MuiFab-root-385{color:rgba(0,0,0,.87);width:56px;height:56px;padding:0;font-size:.875rem;min-width:0;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12);box-sizing:border-box;min-height:36px;transition:background-color 250ms cubic-bezier(.4,0,.2,1) 0s,box-shadow 250ms cubic-bezier(.4,0,.2,1) 0s,border 250ms cubic-bezier(.4,0,.2,1) 0s;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.75;border-radius:50%;letter-spacing:.02857em;text-transform:uppercase;background-color:#e0e0e0}.MuiFab-root-385:active{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.MuiFab-root-385:hover{text-decoration:none;background-color:#d5d5d5}.MuiFab-root-385.Mui-focusVisible{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiFab-root-385.Mui-disabled{color:rgba(0,0,0,.26);box-shadow:none;background-color:rgba(0,0,0,.12)}@media (hover:none){.MuiFab-root-385:hover{background-color:#e0e0e0}}.MuiFab-root-385:hover.Mui-disabled{background-color:rgba(0,0,0,.12)}.MuiFab-label-386{width:100%;display:inherit;align-items:inherit;justify-content:inherit}.MuiFab-primary-387{color:#fff;background-color:#3f51b5}.MuiFab-primary-387:hover{background-color:#303f9f}@media (hover:none){.MuiFab-primary-387:hover{background-color:#3f51b5}}.MuiFab-secondary-388{color:rgba(0,0,0,.87);background-color:#1de9b6}.MuiFab-secondary-388:hover{background-color:#00bfa5}@media (hover:none){.MuiFab-secondary-388:hover{background-color:#1de9b6}}.MuiFab-extended-389{width:auto;height:48px;padding:0 16px;min-width:48px;min-height:auto;border-radius:24px}.MuiFab-extended-389.MuiFab-sizeSmall-391{width:auto;height:34px;padding:0 8px;min-width:34px;border-radius:17px}.MuiFab-extended-389.MuiFab-sizeMedium-392{width:auto;height:40px;padding:0 16px;min-width:40px;border-radius:20px}.MuiFab-colorInherit-390{color:inherit}.MuiFab-sizeSmall-391{width:40px;height:40px}.MuiFab-sizeMedium-392{width:48px;height:48px}.MuiInputBase-root-226{color:rgba(0,0,0,.87);cursor:text;display:inline-flex;position:relative;font-size:1rem;box-sizing:border-box;align-items:center;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.1876em;letter-spacing:.00938em}.MuiInputBase-root-226.Mui-disabled{color:rgba(0,0,0,.38);cursor:default}.MuiInputBase-multiline-231{padding:6px 0 7px}.MuiInputBase-multiline-231.MuiInputBase-marginDense-230{padding-top:3px}.MuiInputBase-fullWidth-233{width:100%}.MuiInputBase-input-234{font:inherit;color:currentColor;width:100%;border:0;height:1.1876em;margin:0;display:block;padding:6px 0 7px;min-width:0;background:0 0;box-sizing:content-box;animation-name:mui-auto-fill-cancel;letter-spacing:inherit;animation-duration:10ms;-webkit-tap-highlight-color:transparent}.MuiInputBase-input-234::-webkit-input-placeholder{color:currentColor;opacity:.42;-webkit-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s}.MuiInputBase-input-234::-moz-placeholder{color:currentColor;opacity:.42;-moz-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s}.MuiInputBase-input-234:-ms-input-placeholder{color:currentColor;opacity:.42;-ms-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s}.MuiInputBase-input-234::-ms-input-placeholder{color:currentColor;opacity:.42;-ms-transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s;transition:opacity .2s cubic-bezier(.4,0,.2,1) 0s}.MuiInputBase-input-234:focus{outline:0}.MuiInputBase-input-234:invalid{box-shadow:none}.MuiInputBase-input-234::-webkit-search-decoration{-webkit-appearance:none}.MuiInputBase-input-234.Mui-disabled{opacity:1}.MuiInputBase-input-234:-webkit-autofill{animation-name:mui-auto-fill;animation-duration:5000s}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234::-webkit-input-placeholder{opacity:0!important}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234::-moz-placeholder{opacity:0!important}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:-ms-input-placeholder{opacity:0!important}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234::-ms-input-placeholder{opacity:0!important}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:focus::-webkit-input-placeholder{opacity:.42}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:focus::-moz-placeholder{opacity:.42}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:focus:-ms-input-placeholder{opacity:.42}label[data-shrink=false]+.MuiInputBase-formControl-227 .MuiInputBase-input-234:focus::-ms-input-placeholder{opacity:.42}.MuiInputBase-inputMarginDense-235{padding-top:3px}.MuiInputBase-inputMultiline-236{height:auto;resize:none;padding:0}.MuiInputBase-inputTypeSearch-237{-moz-appearance:textfield;-webkit-appearance:textfield}.MuiFormControl-root-198{border:0;margin:0;display:inline-flex;padding:0;position:relative;min-width:0;flex-direction:column;vertical-align:top}.MuiFormControl-marginNormal-199{margin-top:16px;margin-bottom:8px}.MuiFormControl-marginDense-200{margin-top:8px;margin-bottom:4px}.MuiFormControl-fullWidth-201{width:100%}.MuiFormLabel-root-210{color:rgba(0,0,0,.54);padding:0;font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1;letter-spacing:.00938em}.MuiFormLabel-root-210.Mui-focused{color:#3f51b5}.MuiFormLabel-root-210.Mui-disabled{color:rgba(0,0,0,.38)}.MuiFormLabel-root-210.Mui-error{color:#f44336}.MuiFormLabel-colorSecondary-211.Mui-focused{color:#1de9b6}.MuiFormLabel-asterisk-213.Mui-error{color:#f44336}.MuiGrid-container-262{width:100%;display:flex;flex-wrap:wrap;box-sizing:border-box}.MuiGrid-item-263{margin:0;box-sizing:border-box}.MuiGrid-zeroMinWidth-264{min-width:0}.MuiGrid-direction-xs-column-265{flex-direction:column}.MuiGrid-direction-xs-column-reverse-266{flex-direction:column-reverse}.MuiGrid-direction-xs-row-reverse-267{flex-direction:row-reverse}.MuiGrid-wrap-xs-nowrap-268{flex-wrap:nowrap}.MuiGrid-wrap-xs-wrap-reverse-269{flex-wrap:wrap-reverse}.MuiGrid-align-items-xs-center-270{align-items:center}.MuiGrid-align-items-xs-flex-start-271{align-items:flex-start}.MuiGrid-align-items-xs-flex-end-272{align-items:flex-end}.MuiGrid-align-items-xs-baseline-273{align-items:baseline}.MuiGrid-align-content-xs-center-274{align-content:center}.MuiGrid-align-content-xs-flex-start-275{align-content:flex-start}.MuiGrid-align-content-xs-flex-end-276{align-content:flex-end}.MuiGrid-align-content-xs-space-between-277{align-content:space-between}.MuiGrid-align-content-xs-space-around-278{align-content:space-around}.MuiGrid-justify-xs-center-279{justify-content:center}.MuiGrid-justify-xs-flex-end-280{justify-content:flex-end}.MuiGrid-justify-xs-space-between-281{justify-content:space-between}.MuiGrid-justify-xs-space-around-282{justify-content:space-around}.MuiGrid-justify-xs-space-evenly-283{justify-content:space-evenly}.MuiGrid-spacing-xs-1-284{width:calc(100% + 8px);margin:-4px}.MuiGrid-spacing-xs-1-284>.MuiGrid-item-263{padding:4px}.MuiGrid-spacing-xs-2-285{width:calc(100% + 16px);margin:-8px}.MuiGrid-spacing-xs-2-285>.MuiGrid-item-263{padding:8px}.MuiGrid-spacing-xs-3-286{width:calc(100% + 24px);margin:-12px}.MuiGrid-spacing-xs-3-286>.MuiGrid-item-263{padding:12px}.MuiGrid-spacing-xs-4-287{width:calc(100% + 32px);margin:-16px}.MuiGrid-spacing-xs-4-287>.MuiGrid-item-263{padding:16px}.MuiGrid-spacing-xs-5-288{width:calc(100% + 40px);margin:-20px}.MuiGrid-spacing-xs-5-288>.MuiGrid-item-263{padding:20px}.MuiGrid-spacing-xs-6-289{width:calc(100% + 48px);margin:-24px}.MuiGrid-spacing-xs-6-289>.MuiGrid-item-263{padding:24px}.MuiGrid-spacing-xs-7-290{width:calc(100% + 56px);margin:-28px}.MuiGrid-spacing-xs-7-290>.MuiGrid-item-263{padding:28px}.MuiGrid-spacing-xs-8-291{width:calc(100% + 64px);margin:-32px}.MuiGrid-spacing-xs-8-291>.MuiGrid-item-263{padding:32px}.MuiGrid-spacing-xs-9-292{width:calc(100% + 72px);margin:-36px}.MuiGrid-spacing-xs-9-292>.MuiGrid-item-263{padding:36px}.MuiGrid-spacing-xs-10-293{width:calc(100% + 80px);margin:-40px}.MuiGrid-spacing-xs-10-293>.MuiGrid-item-263{padding:40px}.MuiGrid-grid-xs-auto-294{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-xs-true-295{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-xs-1-296{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-xs-2-297{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-xs-3-298{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-xs-4-299{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-xs-5-300{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-xs-6-301{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-xs-7-302{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-xs-8-303{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-xs-9-304{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-xs-10-305{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-xs-11-306{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-xs-12-307{flex-grow:0;max-width:100%;flex-basis:100%}@media (min-width:600px){.MuiGrid-grid-sm-auto-308{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-sm-true-309{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-sm-1-310{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-sm-2-311{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-sm-3-312{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-sm-4-313{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-sm-5-314{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-sm-6-315{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-sm-7-316{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-sm-8-317{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-sm-9-318{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-sm-10-319{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-sm-11-320{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-sm-12-321{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:960px){.MuiGrid-grid-md-auto-322{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-md-true-323{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-md-1-324{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-md-2-325{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-md-3-326{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-md-4-327{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-md-5-328{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-md-6-329{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-md-7-330{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-md-8-331{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-md-9-332{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-md-10-333{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-md-11-334{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-md-12-335{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:1280px){.MuiGrid-grid-lg-auto-336{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-lg-true-337{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-lg-1-338{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-lg-2-339{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-lg-3-340{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-lg-4-341{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-lg-5-342{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-lg-6-343{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-lg-7-344{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-lg-8-345{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-lg-9-346{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-lg-10-347{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-lg-11-348{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-lg-12-349{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:1920px){.MuiGrid-grid-xl-auto-350{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-xl-true-351{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-xl-1-352{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-xl-2-353{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-xl-3-354{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-xl-4-355{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-xl-5-356{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-xl-6-357{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-xl-7-358{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-xl-8-359{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-xl-9-360{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-xl-10-361{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-xl-11-362{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-xl-12-363{flex-grow:0;max-width:100%;flex-basis:100%}}.MuiInputAdornment-root-241{height:.01em;display:flex;max-height:2em;align-items:center;white-space:nowrap}.MuiInputAdornment-filled-242.MuiInputAdornment-positionStart-243:not(.MuiInputAdornment-hiddenLabel-246){margin-top:16px}.MuiInputAdornment-positionStart-243{margin-right:8px}.MuiInputAdornment-positionEnd-244{margin-left:8px}.MuiInputAdornment-disablePointerEvents-245{pointer-events:none}.MuiInputLabel-root-202{display:block;transform-origin:top left}.MuiInputLabel-formControl-204{top:0;left:0;position:absolute;transform:translate(0,24px) scale(1)}.MuiInputLabel-marginDense-205{transform:translate(0,21px) scale(1)}.MuiInputLabel-shrink-206{transform:translate(0,1.5px) scale(.75);transform-origin:top left}.MuiInputLabel-animated-207{transition:color .2s cubic-bezier(0,0,.2,1) 0s,transform .2s cubic-bezier(0,0,.2,1) 0s}.MuiInputLabel-filled-208{z-index:1;transform:translate(12px,20px) scale(1);pointer-events:none}.MuiInputLabel-filled-208.MuiInputLabel-marginDense-205{transform:translate(12px,17px) scale(1)}.MuiInputLabel-filled-208.MuiInputLabel-shrink-206{transform:translate(12px,10px) scale(.75)}.MuiInputLabel-filled-208.MuiInputLabel-shrink-206.MuiInputLabel-marginDense-205{transform:translate(12px,7px) scale(.75)}.MuiInputLabel-outlined-209{z-index:1;transform:translate(14px,20px) scale(1);pointer-events:none}.MuiInputLabel-outlined-209.MuiInputLabel-marginDense-205{transform:translate(14px,12px) scale(1)}.MuiInputLabel-outlined-209.MuiInputLabel-shrink-206{transform:translate(14px,-6px) scale(.75)}.MuiLink-underlineNone-64{text-decoration:none}.MuiLink-underlineHover-65{text-decoration:none}.MuiLink-underlineHover-65:hover{text-decoration:underline}.MuiLink-underlineAlways-66{text-decoration:underline}.MuiLink-button-67{border:0;cursor:pointer;margin:0;outline:0;padding:0;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.MuiLink-button-67::-moz-focus-inner{border-style:none}.MuiLink-button-67.Mui-focusVisible{outline:auto}.jss248{top:-5px;left:0;right:0;bottom:0;margin:0;padding:0 8px;overflow:hidden;position:absolute;border-style:solid;border-width:1px;border-radius:inherit;pointer-events:none}.jss249{padding:0;text-align:left;transition:width 150ms cubic-bezier(0,0,.2,1) 0s;line-height:11px}.jss250{width:auto;height:11px;display:block;padding:0;font-size:.75em;max-width:.01px;text-align:left;transition:max-width 50ms cubic-bezier(0,0,.2,1) 0s;visibility:hidden}.jss250>span{display:inline-block;padding-left:5px;padding-right:5px}.jss251{max-width:1000px;transition:max-width .1s cubic-bezier(0,0,.2,1) 50ms}.MuiOutlinedInput-root-214{position:relative;border-radius:4px}.MuiOutlinedInput-root-214:hover .MuiOutlinedInput-notchedOutline-220{border-color:rgba(0,0,0,.87)}@media (hover:none){.MuiOutlinedInput-root-214:hover .MuiOutlinedInput-notchedOutline-220{border-color:rgba(0,0,0,.23)}}.MuiOutlinedInput-root-214.Mui-focused .MuiOutlinedInput-notchedOutline-220{border-color:#3f51b5;border-width:2px}.MuiOutlinedInput-root-214.Mui-error .MuiOutlinedInput-notchedOutline-220{border-color:#f44336}.MuiOutlinedInput-root-214.Mui-disabled .MuiOutlinedInput-notchedOutline-220{border-color:rgba(0,0,0,.26)}.MuiOutlinedInput-colorSecondary-215.Mui-focused .MuiOutlinedInput-notchedOutline-220{border-color:#1de9b6}.MuiOutlinedInput-adornedStart-216{padding-left:14px}.MuiOutlinedInput-adornedEnd-217{padding-right:14px}.MuiOutlinedInput-multiline-219{padding:18.5px 14px}.MuiOutlinedInput-multiline-219.MuiOutlinedInput-marginDense-218{padding-top:10.5px;padding-bottom:10.5px}.MuiOutlinedInput-notchedOutline-220{border-color:rgba(0,0,0,.23)}.MuiOutlinedInput-input-221{padding:18.5px 14px}.MuiOutlinedInput-input-221:-webkit-autofill{border-radius:inherit}.MuiOutlinedInput-inputMarginDense-222{padding-top:10.5px;padding-bottom:10.5px}.MuiOutlinedInput-inputMultiline-223{padding:0}.MuiOutlinedInput-inputAdornedStart-224{padding-left:0}.MuiOutlinedInput-inputAdornedEnd-225{padding-right:0}.MuiToolbar-root-59{display:flex;position:relative;align-items:center}.MuiToolbar-gutters-60{padding-left:16px;padding-right:16px}@media (min-width:600px){.MuiToolbar-gutters-60{padding-left:24px;padding-right:24px}}.MuiToolbar-regular-61{min-height:56px}@media (min-width:0px) and (orientation:landscape){.MuiToolbar-regular-61{min-height:48px}}@media (min-width:600px){.MuiToolbar-regular-61{min-height:64px}}.MuiToolbar-dense-62{min-height:48px}.jss12{justify-content:space-between}@media (min-width:768px){.jss12{justify-content:flex-start}}.jss13{width:60px;height:60px;margin-right:8px;border-radius:50%}.jss14{flex:1}@media (min-width:768px){.jss14{flex:unset}}.jss15{flex:1;display:none}@media (min-width:768px){.jss15{display:flex;justify-content:flex-end}}.jss16{margin-left:8px}.jss17{border:1px solid currentcolor;padding:8px}@media (min-width:768px){.jss18{display:none}}.jss380{display:flex;justify-content:center}@media (min-width:960px){.jss380{justify-content:flex-end}}.jss381{list-style:none}.MuiAlert-root-180{display:flex;padding:6px 16px;font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.43;border-radius:4px;letter-spacing:.01071em;background-color:transparent}.MuiAlert-standardSuccess-181{color:#1e4620;background-color:#edf7ed}.MuiAlert-standardSuccess-181 .MuiAlert-icon-193{color:#4caf50}.MuiAlert-standardInfo-182{color:#0d3c61;background-color:#e8f4fd}.MuiAlert-standardInfo-182 .MuiAlert-icon-193{color:#2196f3}.MuiAlert-standardWarning-183{color:#663c00;background-color:#fff4e5}.MuiAlert-standardWarning-183 .MuiAlert-icon-193{color:#ff9800}.MuiAlert-standardError-184{color:#611a15;background-color:#fdecea}.MuiAlert-standardError-184 .MuiAlert-icon-193{color:#f44336}.MuiAlert-outlinedSuccess-185{color:#1e4620;border:1px solid #4caf50}.MuiAlert-outlinedSuccess-185 .MuiAlert-icon-193{color:#4caf50}.MuiAlert-outlinedInfo-186{color:#0d3c61;border:1px solid #2196f3}.MuiAlert-outlinedInfo-186 .MuiAlert-icon-193{color:#2196f3}.MuiAlert-outlinedWarning-187{color:#663c00;border:1px solid #ff9800}.MuiAlert-outlinedWarning-187 .MuiAlert-icon-193{color:#ff9800}.MuiAlert-outlinedError-188{color:#611a15;border:1px solid #f44336}.MuiAlert-outlinedError-188 .MuiAlert-icon-193{color:#f44336}.MuiAlert-filledSuccess-189{color:#fff;font-weight:500;background-color:#4caf50}.MuiAlert-filledInfo-190{color:#fff;font-weight:500;background-color:#2196f3}.MuiAlert-filledWarning-191{color:#fff;font-weight:500;background-color:#ff9800}.MuiAlert-filledError-192{color:#fff;font-weight:500;background-color:#f44336}.MuiAlert-icon-193{display:flex;opacity:.9;padding:7px 0;font-size:22px;margin-right:12px}.MuiAlert-message-194{padding:8px 0}.MuiAlert-action-195{display:flex;align-items:center;margin-left:auto;margin-right:-8px;padding-left:16px}.jss172{padding:16px;text-align:center}.jss173{margin-top:8px}.jss373{display:grid;grid-row-gap:24px;justify-items:center;grid-column-gap:16px;grid-template-rows:auto;grid-template-areas:"links" "info" "subscribe" "finePrint";grid-template-columns:auto}@media (min-width:600px){.jss373{grid-template-rows:1fr auto 1fr;grid-template-areas:"subscribe links" "subscribe info" "subscribe finePrint";grid-template-columns:auto 1fr}}.jss374{grid-area:links;align-self:flex-end}.jss375{grid-area:info}.jss376{grid-area:subscribe;max-width:350px}.jss377{grid-area:finePrint}.jss384{right:16px;bottom:16px;position:fixed}.jss4{background-color:#fafafa}.jss5{top:auto;left:-10000px;width:1px;height:1px;overflow:hidden;position:absolute}.jss7{right:16px;bottom:16px;position:fixed}.jss8{height:82px}.jss9{min-height:100vh;margin-top:16px}.jss169{display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center}.jss170:not(:first-child){margin-left:8px}.jss364{height:266.66667px}.jss365{flex:1;margin-right:16px}.jss166 h2{font-size:1.5rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.334;letter-spacing:0}.jss166 h3{font-size:1.25rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}.jss166 h4{font-size:1.25rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.6;letter-spacing:.0075em}.jss166 h5{font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.75;letter-spacing:.00938em}.jss166 h6{font-size:.875rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:500;line-height:1.57;letter-spacing:.00714em}.jss166 p{margin:0 0 16px 0;font-size:1rem;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.5;letter-spacing:.00938em}.jss166 p>img{width:100%;margin:0 auto;display:block;max-width:800px}.jss166 p>.gatsby-resp-image-wrapper+em{margin:8px 16px;display:block;font-size:.75rem;max-width:800px;text-align:right;font-family:Roboto,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.66;letter-spacing:.03333em}.jss166 ul{padding:0 0 0 24px;list-style:circle}.jss166 li{margin:0 0 8px 0}.jss166 a:not(.anchor){color:#3f51b5}.jss166 blockquote{margin:20px 0 20px 40px;padding:12px;font-style:italic;border-left:5px solid #1de9b6}.jss166 hr{width:50%;border:none;height:1px;margin:32px auto;background-color:rgba(0,0,0,.12)}.jss166 .gatsby-highlight{margin-bottom:24px}.jss166 .gatsby-resp-iframe-wrapper{margin:0 0 24px 16px}.jss166 .twitter-tweet{margin:0 auto 16px auto}.jss166 blockquote p{margin:0}@media (min-width:960px){.jss166 ul{padding:0 0 0 32px}}.jss259{text-align:center}.jss260{width:80px;height:80px;margin:0 auto;border-radius:50%}.jss167{margin-top:16px;margin-bottom:16px}.jss1{margin-bottom:24px}.jss2{margin-top:24px}.jss3{margin-top:16px;margin-bottom:16px}</style><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc4.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxK.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4.woff2"/><style>@font-face{font-family:Roboto;font-style:normal;font-weight:300;src:url(/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(/static/webfonts/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxK.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:500;src:url(/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4.woff2) format("woff2");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:300;src:url(/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc-.woff) format("woff");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:url(/static/webfonts/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxM.woff) format("woff");font-display:swap}@font-face{font-family:Roboto;font-style:normal;font-weight:500;src:url(/static/webfonts/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc-.woff) format("woff");font-display:swap}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="Ben Ilegbodu Blog RSS Feed" href="/blog/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-39892b29b7048a49a6be.js"/><link as="script" rel="preload" href="/styles-2416da4fc4c075b56691.js"/><link as="script" rel="preload" href="/framework-4b86d917a023bb3f8d06.js"/><link as="script" rel="preload" href="/app-5b457b18690bafe5211f.js"/><link as="script" rel="preload" href="/commons-9c3f5f586f099fa6aeed.js"/><link as="script" rel="preload" href="/67b0b73ca5ef5a715ae49b4d20728b3d9c676d49-806d5139e281bb720cc6.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-0d9430f06be996e24ca9.js"/><link as="fetch" rel="preload" href="/page-data/blog/learning-es6-promises/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2495720375.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/307212292.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4260024542.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/520305385.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/58428228.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><section class="MuiBox-root-10 jss11 jss4"><a href="#skip-heading" class="jss5">Skip Main Navigation</a><header class="MuiPaper-root-30 MuiAppBar-root-19 MuiAppBar-positionFixed-20 MuiAppBar-colorPrimary-26 mui-fixed MuiPaper-elevation4-37"><section class="MuiBox-root-10 jss58"><div class="MuiToolbar-root-59 MuiToolbar-regular-61 jss12"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90" aria-label="Go to homepage" href="/"><div class="jss13 gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:60px;height:60px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAG66AABuugHW3rEXAAAE4ElEQVR42m2Ta0xTZxjHWyhbIs6gbm4WOxUVxNoCvdHa0tMLvRePRcqthdIqAi0INYWBMJmKF9RBh9xcRTZQcXiJJhuLmwn7sjg0WeZgbm5xblmyD1uWfViyD0D73zlHzWz0TZ6c2//5nef/vs/DYj1ZBEEwV3GulpW8JIn14/dgr0oT6DdvER8jFar+Gk3eMa9qG8lhs5MAsGxZAjatt2zcyHrhooGbt4oZkUSyjbcuXXhSksn/a49Oi66iwthItTfW73Gh2Wq66RBlv0rrPHlK9gthnZ2drE0ZAuY+Z6sgOVMg2a8RiaYCBh067Jb5ju22hQv1tQvXgg0LQ94KBPSam5SUQ+tJUfaLK1Qo1AkMUCy3q8RSXzmR93vAbER7gTUWpMBDVW5MtewDVeVCR4EV5Wp1A61vzCcSnoNlCx5XJ9y4PlkqzT1BynPbK3QaaISCKJ+3BlpRDvRiKXxaDTpIe7TJqEdhruwLOmfucMfztgmlinmpEGWvNxotk55i1/UMCpTO5UalG9JgMuSDn6VE8vK1WL40GatXpyF1TQaWvrIiQudpTXWsxMTEZ+zKpAzwzTdWbnWVVUa7eyIgjRbs1qphyRZCLpNCJFZiHW8TinIlSOVtWeRtkGL5ytTrdF46Xx9vW67MZ/AimdZhMFhx6Eg4uremAW6VAqfKi9G6owAkBarVERioLIcqkx/NTM/C+rTNRXTeFr4kHijLszFAqXqHS6Ozor4hNN/gD8aKFbk4UebE6UoXWqwmVFPAZrsFzeb8xXdra9F2qMdO5x093pcYB8yREozljCxinVqt/8PpKMRO0hErz1MiZDGiWqOGIJWLzNdXMWEX8hEqd89797YxPROoD8VXyOVyWUajjYGKskRCpUL5kU4m/dtLnXSb3RLzU5W5DXr0BBtxwOeNetQqePS6g7R+osrN3sDjxZ+y3Blkrlqjh/kTV1zGLVVrvqnSEnjLZo5S04GgzYLh1tbYjZMn4TcZf3FJsphpqZCJ2NPT0/HAppZBtr9tghOien/oK3AI8667u802VOsJCmaGV60EvZ8hk2ExaDTALhY10nm1rkCSydHEMJyTk49ho1d/TaSHvWTfx8xzScN4gaOyC+48OZrMBlRTVoVUTyZxOBCs5YG7IgXsl5bIae2S5GUJE5/8mdAbuZPYenDi/wavq+9KcdX1OUsD525VBC/Oe5qvwEn64CMUqDNoYcjJxmspKeAkvRzLEOpRseudB+Gzd0LNnRc2PWXcmJ5n90ZmElhdvZ/1hyMzv4VHv0XNgU9REhiNuYMT8DRfBUnWwKU3wU+NWhGhB6Hajp3ut9E9dBuUMwx8eO/fnjO3r1GMktpg37LHlq88QuTSTxg+/120d+TrxZbjt1Dqj6DQ14PtvjBKXe3U/olgM5RAZa4HWRzE0Pn70aHxucWBsTmMTP5MxUOEz959eOjUVAFrcHxuYXBsNkYFJZzD2UsP4G+/DJm6GI6qbpSUNaNEngM72QC7+zCO9H6O90bv4cTwHXRTMTA2u0gxFs9dfoQzF3/4hwLO4mkM0NDxOYTP3cOe0AcgK4+BLN2PInMRjFYfnBUd6OqfoSzPoI+C0lo6mPyx2ejwhfvROOAg/fEJ9P2JB+g6/SU8jSMw2XdBb65E+/Ep2i61PU9AY8/mMhH7DwkiXhzU3azSAAAAAElFTkSuQmCC" alt="Ben Ilegbodu" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/2b60dd7e58e084c6192b8f4d7c81d91d/183c2/benmvp-logo.png 1x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/847e4/benmvp-logo.png 1.5x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/e94d6/benmvp-logo.png 2x" /><img loading="lazy" width="60" height="60" srcset="/static/2b60dd7e58e084c6192b8f4d7c81d91d/183c2/benmvp-logo.png 1x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/847e4/benmvp-logo.png 1.5x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/e94d6/benmvp-logo.png 2x" src="/static/2b60dd7e58e084c6192b8f4d7c81d91d/183c2/benmvp-logo.png" alt="Ben Ilegbodu" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 jss14 MuiTypography-h5-77 MuiTypography-colorInherit-90" aria-label="Go to homepage" href="/">Ben Ilegbodu</a><nav class="MuiBox-root-10 jss98 jss15" aria-label="main site navigation links"><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111 jss17" tabindex="0" role="button" aria-disabled="false" aria-label="Read Ben&#x27;s blog posts" href="/blog/"><span class="MuiButton-label-100">Blog</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Watch Ben&#x27;s past tech talks" href="/videos/"><span class="MuiButton-label-100">Videos</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Attend one of Ben&#x27;s speaking engagements" href="/speak/"><span class="MuiButton-label-100">Speak</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Develop from one of Ben&#x27;s remote minishop" href="/minishops/"><span class="MuiButton-label-100">Minishops</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Check out some of Ben&#x27;s dev projects" href="/projects/"><span class="MuiButton-label-100">Projects</span></a><a class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-text-101 jss16 MuiButton-colorInherit-111" tabindex="0" role="button" aria-disabled="false" aria-label="Learn more about Ben" href="/about/"><span class="MuiButton-label-100">About</span></a></nav><button class="MuiButtonBase-root-126 MuiIconButton-root-127 jss18 MuiIconButton-colorInherit-130 MuiIconButton-edgeStart-128" tabindex="0" type="button" aria-label="open navigation menu"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button></div></section></header><div class="MuiToolbar-root-59 MuiToolbar-regular-61 jss8 MuiToolbar-gutters-60" id="back-to-top-anchor"></div><div class="MuiContainer-root-156 jss6 jss9 MuiContainer-maxWidthMd-161" id="skip-heading"><main class="MuiBox-root-10 jss164"><header class="MuiBox-root-10 jss165 jss1"><h1 class="MuiTypography-root-68 MuiTypography-h4-76 MuiTypography-gutterBottom-88">Promises</h1><p class="MuiTypography-root-68 MuiTypography-subtitle2-80 MuiTypography-gutterBottom-88">September 27, 2015<!-- --> · <!-- -->28<!-- --> min read</p></header><article class="MuiTypography-root-68 jss166 MuiTypography-body1-70"><p>Like clockwork the <a href="/learning-es6-series/"><em>Learning ES6</em> series</a> continues on, looking at <em>promises</em>. It will be the first feature we’ve looked at in this series that is more than syntactic sugar. But promises aren’t new to JavaScript. They’ve existed for quite some time in helper libraries. ECMAScript 6 now brings native promise support to JavaScript via the <code class="language-text">Promise</code> API. Let’s jump right in!</p>
<h2 id="tldr" style="position:relative;"><a href="#tldr" aria-label="tldr permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>A promise represents the eventual result of an asynchronous operation. Instead of registering a callback in the call to an async function, the function returns a promise. The caller registers callbacks with the promise to receive either a promise’s eventual value from the async operation or the reason why the promise cannot be fulfilled.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Creating a promise wrapper for setTimeout</span>
<span class="token keyword">function</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token parameter">delay <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Using a promise</span>
<span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3 seconds have passed!'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'5 seconds have passed!'</span><span class="token punctuation">)</span>
    x<span class="token operator">++</span> <span class="token comment">// ReferenceError triggers `catch`</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// output: ReferenceError</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// simulate `finally` clause</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'clean up'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Did you notice the use of <a href="/blog/learning-es6-parameter-handling/">default parameters</a> and <a href="/blog/learning-es6-arrow-functions/">arrow functions</a> too? If you’re unfamiliar with those ES6 features, you should check out the articles detailing how they work. Interested in learning more about ES6 promises? Clone the <a href="https://github.com/benmvp/learning-es6" target="_blank" rel="nofollow noopener noreferrer"><em>Learning ES6</em> Github repo</a> and take a look at the <a href="https://learning-es6.benmvp.com/#promises" target="_blank" rel="nofollow noopener noreferrer">promises code examples</a> page showing off the features in greater detail.</p>
<p>Well you’ve come this far. You might as well keep going!</p>
<h2 id="asynchronous-programming-background" style="position:relative;"><a href="#asynchronous-programming-background" aria-label="asynchronous programming background permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Asynchronous programming background</h2>
<p>Because JavaScript originated as a programming language for the web, asynchronous programming has existed in it since its inception. Program execution couldn’t wait for user interactions (such as clicks and key presses) before continuing like you would see in console applications. Asynchronous programming in JavaScript provides mechanisms for an application to be notified when events it cares about have just happened.</p>
<h3 id="event-handlers" style="position:relative;"><a href="#event-handlers" aria-label="event handlers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event handlers</h3>
<p>Event handlers are what I call the first generation of asynchronous programming in JavaScript. You simply assigned a function to an event property and it was called whenever that event happened. Here’s the event handler way of making an XHR request.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">'/json/data.json'</span><span class="token punctuation">,</span>
  request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>

request<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> responseJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>

      <span class="token comment">// do something with daa</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'request failed!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

request<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>This style is so old that it may actually be unfamiliar for some JavaScript developers. Most developers nowadays are used to callbacks.</p>
<h3 id="callbacks" style="position:relative;"><a href="#callbacks" aria-label="callbacks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Callbacks</h3>
<p>JavaScript libraries, like jQuery, aimed to ease development pains by hiding event handlers behind functions that called a specified <em>callback</em> function when the event was trigged. This programming style of using callbacks is also called <em>continuation-passing style</em> (CPS) because the next step (the continuation) is explicitly passed in as a parameter:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>

  request<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data<span class="token punctuation">,</span> error

    <span class="token keyword">if</span> <span class="token punctuation">(</span>reques<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      data <span class="token operator">=</span> request<span class="token punctuation">.</span>responseText
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'request failed!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token operator">:</span> data<span class="token punctuation">,</span> error<span class="token operator">:</span> error <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  request<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">{</span> error<span class="token operator">:</span> e <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">{</span> error<span class="token operator">:</span> e <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">responseObj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>responseObj<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data!'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>responseObj<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>responseObj<span class="token punctuation">.</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The callback pattern, while more convenient to use than event handlers, still had several drawbacks. The first is apparent in the example. The callback function has two ways of handling errors: <code class="language-text">if-else</code> on the returned data and <code class="language-text">try-catch</code> around any operations within the function.</p>
<p>Secondly, callback functions proved to be untenable when developers had callbacks within callback within callbacks. This affectionately became known as <em>callback hell</em>. Let’s say for example after you retrieved <code class="language-text">/json/data.json</code> you needed to make another <code class="language-text">fetch</code> request <em>based</em> on the returned data from the first request:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">responseObj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>responseObj<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>responseObj<span class="token punctuation">.</span>data<span class="token punctuation">)</span>

      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main data'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>

      <span class="token comment">// now call `fetch` again to retrieve new data</span>
      <span class="token comment">// based on the response data</span>
      <span class="token function">fetch</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">responseObjInner</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>responseObjInner<span class="token punctuation">.</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inner data'</span><span class="token punctuation">,</span> responseObjInner<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>responseObjInner<span class="token punctuation">.</span>error<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>responseObj<span class="token punctuation">.</span>error<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>It’s already a mess and we’re only two levels deep without any real implementation!</p>
<p>Attempting to manage multiple active callbacks is also pretty complicated. Imagine you wanted to fire off multiple <code class="language-text">fetch</code> requests simultaneously and then you wanted to process the results when they are <em>all</em> done? Or what if you wanted to time out a <code class="language-text">fetch</code> request after it had run for more than 10 seconds? It’s doable, but challenging with callbacks.</p>
<p>Enter promises.</p>
<h3 id="promises" style="position:relative;"><a href="#promises" aria-label="promises permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Promises</h3>
<p>Promises ushered in the 3rd generation of asynchronous programming. A promise represents the eventual result of an asynchronous operation. Instead of registering a callback in the call to an async function (such as <code class="language-text">fetch</code>), the function returns a promise. The caller then registers callbacks with the <em>promise</em> (not the function) to receive either the promise’s eventual value from the async operation or the reason why the promise could not be fulfilled.</p>
<p>ECMAScript 6 brings native promise support to JavaScript following the <a href="https://github.com/promises-aplus/promises-spec" target="_blank" rel="nofollow noopener noreferrer">Promise/A+</a> standard. Promises have actually existed for quite some time in JavaScript as external libraries. The following libraries also follow the Promise/A+ standard:</p>
<ul>
<li><a href="https://github.com/tildeio/rsvp.js/" target="_blank" rel="nofollow noopener noreferrer">RSVP.js</a> by <a href="https://twitter.com/stefanpenner" target="_blank" rel="nofollow noopener noreferrer">Stefan Penner</a></li>
<li><a href="https://github.com/jakearchibald/es6-promise" target="_blank" rel="nofollow noopener noreferrer">ES6 Promise Polyfill</a> by <a href="https://twitter.com/jaffathecake" target="_blank" rel="nofollow noopener noreferrer">Jake Archibald</a></li>
<li><a href="https://github.com/getify/native-promise-only" target="_blank" rel="nofollow noopener noreferrer">Native Promise Only</a> by <a href="https://twitter.com/getify" target="_blank" rel="nofollow noopener noreferrer">Kyle Simpson</a></li>
<li><a href="https://github.com/kriskowal/q#using-qpromise" target="_blank" rel="nofollow noopener noreferrer">Q.Promise</a> by <a href="https://twitter.com/kriskowal" target="_blank" rel="nofollow noopener noreferrer">Kris Kowal</a></li>
<li><a href="https://github.com/calvinmetcalf/lie" target="_blank" rel="nofollow noopener noreferrer">Lie</a> by <a href="https://twitter.com/CWMma" target="_blank" rel="nofollow noopener noreferrer">Calvin Metcalf</a></li>
<li><a href="https://github.com/paulmillr/es6-shim" target="_blank" rel="nofollow noopener noreferrer">ES6 Shim</a> by <a href="https://twitter.com/paulmillr" target="_blank" rel="nofollow noopener noreferrer">Paul Miller</a></li>
<li><a href="https://github.com/cujojs/when" target="_blank" rel="nofollow noopener noreferrer">when</a> by <a href="http://cujojs.com/" target="_blank" rel="nofollow noopener noreferrer">cujoJS</a></li>
</ul>
<p>The new <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="nofollow noopener noreferrer">Fetch API</a> provides a <code class="language-text">fetch</code> method that is an updated and promise-backed version of <code class="language-text">XMLHttpRequest</code>. In fact, moving forward, all asynchronous APIs will be promise-backed. If we wanted to turn our callback-style <code class="language-text">fetch</code> function from before to be promised-backed, we could create a poor man’s version of the new Fetch API:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// return a Promise object</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>

    request<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// fulfill the promise</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// reject the promise</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'request failed!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main data'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>

    <span class="token comment">// now call `fetch` again to retrieve new data</span>
    <span class="token comment">// based on the response data</span>
    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inner data'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// catching all failures!</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Much nicer to use, eh? Don’t worry if you don’t understand everything going on. We’re going to spend the rest of our time breaking apart this example. You’ll notice that callbacks still exist, but they are attached to the promise and not the function itself. A different promise callback is called depending on the outcome.</p>
<p>The error callback (<code class="language-text">catch()</code>) is particularly convenient for two reasons:</p>
<ol>
<li>It’s a single style of handling errors. Remember the the <code class="language-text">if-else</code> and all the <code class="language-text">try-catch</code> blocks in the callback-style approach? <code class="language-text">try-catch</code> isn’t needed in creating a <code class="language-text">Promise</code> nor in handling one.</li>
<li>You can handle the errors from executing the async request (XHR in this case) or errors introduced by handling the async request (in <code class="language-text">then()</code> callbacks) from a single location (<code class="language-text">catch()</code> callback).</li>
</ol>
<p>Point #2 is one of the big reasons why jQuery’s <a href="http://api.jquery.com/category/deferred-object/" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">Deferred</code> object</a> is not Promise/A+. Instead, errors in handling the async request that are uncaught are bubbled up to <code class="language-text">window.error</code>. However, jQuery 3’s <code class="language-text">Deferred</code> object will be Promise/A+.</p>
<p>By the way, if you’re interested in a polyfill for Fetch API, check out Github’s <a href="https://github.com/github/fetch" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">whatwg-fetch</code></a> library.</p>
<h3 id="reactive-programming" style="position:relative;"><a href="#reactive-programming" aria-label="reactive programming permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reactive programming</h3>
<p>Reactive programming (built on top of functional programming) is positioning itself as the next generation of asynchronous programming. <a href="https://github.com/Reactive-Extensions/RxJS" target="_blank" rel="nofollow noopener noreferrer">Reactive extensions</a> implements reactive programming in JavaScript. From the <code class="language-text">README</code>:</p>
<blockquote>
<p>One question you may ask yourself, is why RxJS? What about Promises? Promises are good for solving asynchronous operations such as querying a service with an XMLHttpRequest, where the expected behavior is one value and then completion. The Reactive Extensions for JavaScript unifies both the world of Promises, callbacks as well as evented data such as DOM Input, Web Workers, Web Sockets. Once we have unified these concepts, this enables rich composition.</p>
</blockquote>
<p>But let’s not get ahead of ourselves here. Let’s stick to learning about promises.</p>
<h2 id="making-a-promise" style="position:relative;"><a href="#making-a-promise" aria-label="making a promise permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Making a promise</h2>
<p>A promise can be in one of the following three states:</p>
<ul>
<li><strong>Unsettled/pending</strong> - the promise’s async operation has yet to compute its result</li>
<li><strong>Settled: fulfilled</strong> - the promise’s async operation has completed successfully and computed a result to return</li>
<li><strong>Settled: rejected</strong> - the promise’s async operation did not complete successfully, most likely due to an error</li>
</ul>
<p>A promise is settled (the async operation has completed) if it is either fulfilled or rejected. A promise can only transition from unsettled to settled <strong>one</strong> time and it remains settled. Attempting to settle an already settled promise does nothing. Here’s a visualization of the (short) lifecycle of a promise from <a href="http://exploringjs.com/es6/ch_promises.html" target="_blank" rel="nofollow noopener noreferrer">Axel Rauschmayer</a>:</p>
<p><img src="https://exploringjs.com/es6/images/promises----promise_states_simple.jpg" alt="lifecyle of a promise"></p>
<p>Let’s take a look again at the <code class="language-text">Promise</code> constructor in our promised-back <code class="language-text">fetch</code> function:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">function</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// return a Promise object</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span>

    request<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// fulfill the promise</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// reject the promise</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'request failed!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The function passed to the <code class="language-text">Promise</code> constructor is called the <em>executor</em>. If the async function’s computation went well, the executor sends the result via <code class="language-text">resolve()</code>. This typically will fulfill the promise. However, if you resolve the promise with another <code class="language-text">Promise</code> (more on this later), the promise may not be fulfilled.</p>
<p>If an error happened or the async operation failed, the executor informs the user of the promise via <code class="language-text">reject()</code>. This always rejects the promise. Like <code class="language-text">throw</code> in plain old JavaScript, it’s suggested that you call <code class="language-text">reject()</code> with an <code class="language-text">Error</code> object. On of the benefits of passing along an <code class="language-text">Error</code> object is that it will capture a stack trace, which makes debugging much easier.</p>
<p>If an error is thrown <em>within</em> the executor, the promise’s <code class="language-text">reject()</code> handler is automatically called.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Error!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>So we’re intentionally throwing an error within the executor, but lets pretend that this error happened while performing the async operation (like making an XHR request). There is an implicit <code class="language-text">try-catch</code> inside of every executor. This means that any errors are caught and passed along to the <code class="language-text">reject()</code> handler. Basically, the example would be equivalent to:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Error!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2 id="claiming-a-promise" style="position:relative;"><a href="#claiming-a-promise" aria-label="claiming a promise permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Claiming a promise</h2>
<p>Consumers of promises are notified of either fulfillment or rejection by what are called <em>reactions</em>. These are callbacks registered with the <code class="language-text">then()</code> method on a <code class="language-text">Promise</code>. From our promised-backed <code class="language-text">fetch</code> earlier:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// handle response data</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// handle errors</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The <code class="language-text">then()</code> method accepts two arguments:</p>
<ol>
<li>The first argument is the function to call when the promise is fulfilled. Any additional data related to the async operation (such as the response from the XHR request) is passed into this fulfillment reaction</li>
<li>The second argument is the function to call when the promise is rejected. The rejection reaction can also be passed additional data. As mentioned, this usually is an <code class="language-text">Error</code> object.</li>
</ol>
<p>If you are only interested in a fulfillment, you can omit the second parameter to <code class="language-text">then()</code>:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// handle response data</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>If you’re only interested in a rejection, you can skip the first parameter to <code class="language-text">then()</code> by passing <code class="language-text">null</code>:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// handle errors</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>Alternatively, you can use the <code class="language-text">catch()</code> method which is more succinct:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// handle errors</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>The convention is to use <code class="language-text">then()</code> exclusively for fulfillments and <code class="language-text">catch()</code> exclusively for errors. This nicely labels the reactions. The advantage of using <code class="language-text">then()</code> and <code class="language-text">catch()</code> over the old-generation event handlers and callbacks is that it’s completely clear whether the code is handling success or failure. Many times with callbacks there is a single callback and within it you have to do an <code class="language-text">if</code> check against any errors.</p>
<p>By the way, if you fail to attach a rejection reaction to a promise and an error does occur, the promise will fail gracefully. The failure will happen silently. The convention is to always attach a rejection reaction to a promise even if all it ends up doing is logging the failure.</p>
<p>One super convenient feature of promises is that there are never any race conditions. It doesn’t matter when you call the <code class="language-text">then()</code> method of a promise. If you’re passed a <code class="language-text">Promise</code> that is already settled and then call <code class="language-text">then()</code>, you will receive the cached settled value immediately. Pretty nice! Speaking of settled promises…</p>
<h2 id="creating-settled-promises" style="position:relative;"><a href="#creating-settled-promises" aria-label="creating settled promises permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating settled promises</h2>
<p>Normally you would create an unsettled promise via the <code class="language-text">Promise</code> constructor. The promise would get settled once the async operation has been successful (fulfilled) or unsuccessful (rejected). These are the examples we’ve just covered. However, you can create “immediately” settled promises in either the fulfilled or rejected state.</p>
<p>Let’s say we wanted to create an “immediately” fulfilled promise:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Promise.resolve() creates a promise</span>
<span class="token comment">// that is "immediately" settled &amp; fulfilled.</span>
<span class="token comment">// You can optionally pass a value</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Ben'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// output: Ben</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The <code class="language-text">Promise.resolve()</code> factory method returns an “immediately” fulfilled promise on which we call its <code class="language-text">then()</code> method to get the passed value. If a rejection reaction were added to this promise, it would never get called because the promise will never be in a rejected state.</p>
<p>One interesting feature with promises is that they are required to <em>always</em> be asynchronous. That’s why I’ve been saying “immediately” fulfilled. Even though there’s no async operation when using <code class="language-text">Promise.resolve</code> the fulfillment reaction is still handled asynchronously because it is added to the execution queue. Any code after the promise will be executed before the <code class="language-text">console.log</code> output. For instance:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Promise.resolve() creates a promise</span>
<span class="token comment">// that is "immediately" settled &amp; fulfilled.</span>
<span class="token comment">// You can optionally pass a value.</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'sin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">problem</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// output: sin</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>problem<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Even though the promise is "immediately"</span>
<span class="token comment">// fulfilled, all promises are required to</span>
<span class="token comment">// be asynchronous. Therefore the fulfillment</span>
<span class="token comment">// reaction is added to the execution queue</span>
<span class="token comment">// and the following line executes first.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this executes before the fulfillment'</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>You can also “immediately” reject promises using the <code class="language-text">Promise.reject()</code> factory method. This works exactly like <code class="language-text">Promise.resolve()</code> except that the promise is created in the rejected state.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Promise.reject() creates a promise that</span>
<span class="token comment">// is "immediately" settled &amp; rejected. You</span>
<span class="token comment">// should pass an `Error` object.</span>
Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Pride!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Similarly, because promises *must* be</span>
<span class="token comment">// asynchronous, this line will execute first</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this executes before the rejection'</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>And just like with <code class="language-text">Promise.resolve()</code>, if a fulfillment reaction (<code class="language-text">then()</code>) were added to this “immediately” rejected promise, that handler would never be called.</p>
<p>What happens when you pass a <code class="language-text">Promise</code> to <code class="language-text">Promise.resolve()</code> or <code class="language-text">Promise.reject()</code>? Nothing. The promise is just returned:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">let</span> fetchPromise <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span>

<span class="token comment">// Fulfilling or rejecting an already existing</span>
<span class="token comment">// promise does nothing. It's just returned</span>
<span class="token comment">// output: true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>fetchPromise<span class="token punctuation">)</span> <span class="token operator">==</span> fetchPromise<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>fetchPromise<span class="token punctuation">)</span> <span class="token operator">==</span> fetchPromise<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Why in the world would you pass a <code class="language-text">Promise</code> object to <code class="language-text">Promise.resolve()</code> or <code class="language-text">Promise.reject()</code>? Well it’ll make sense after your learn about <em>thenables</em>.</p>
<h3 id="thenables" style="position:relative;"><a href="#thenables" aria-label="thenables permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Thenables</h3>
<p>A <code class="language-text">thenable</code> as defined by the Promise API spec is any object that has a <code class="language-text">Promise</code>-style <code class="language-text">then()</code> method. This means that the method accepts two arguments that are functions (<code class="language-text">resolve()</code> and <code class="language-text">reject()</code>). Therefore, a <code class="language-text">Promise</code> is also a <code class="language-text">thenable</code>.</p>
<p>If this were C# or Java, there would be an <code class="language-text">IThenable</code> interface that defined one method called <code class="language-text">then</code> which accepted two lambda functions. The <code class="language-text">Promise</code> class would implement the <code class="language-text">IThenable</code> interface. But because <code class="language-text">IThenable</code> is an interface, any class could implement it. Although JavaScript doesn’t have interfaces, the concept is still the same:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Resolving a `thenable` returns a `Promise`</span>
<span class="token comment">// on which you can add `then()` or `catch()`</span>
<span class="token comment">// reactions</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// A `thenable` is an object that</span>
  <span class="token comment">// has a Promise-style `then` method.</span>
  <span class="token comment">// Using method definition shorthand!</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Ben'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// using property value shorthand!</span>
  <span class="token comment">// output: {name: 'Ben'}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The <code class="language-text">thenable</code> object in this example is just a simple object literal (using <a href="/blog/learning-es6-enhanced-object-literals/#method-definition-shorthand">object method shorthand</a>). It’s not at all like a full-fledged <code class="language-text">Promise</code> object except for the fact that it has a <code class="language-text">then()</code> method. It implements the ”<code class="language-text">IThenable</code>” interface.</p>
<p>And thenables are not limited to object literals. <em>Any</em> object that has a Promise-style <code class="language-text">then()</code> method is a <code class="language-text">thenable</code>, including the jQuery <a href="http://api.jquery.com/deferred.then/" target="_blank" rel="nofollow noopener noreferrer">Deferred object</a>:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">$fetch</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'response'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The return value from <code class="language-text">$.get(url)</code> is a <code class="language-text">thenable</code> (a jQuery-style promise). The example calls <code class="language-text">Promise.resolve()</code> on that return value to create an ES6-style <code class="language-text">Promise</code>. That’s some pretty nice interoperability.</p>
<p>As you might’ve guessed, any <code class="language-text">thenable</code> can also be converted into a rejected <code class="language-text">Promise</code> using <code class="language-text">Promise.reject()</code>. When in doubt about whether or not the object you have is an ES6-style <code class="language-text">Promise</code>, just go ahead and call <code class="language-text">Promise.resolve()</code> or <code class="language-text">Promise.reject()</code> on the object. If the object is already a <code class="language-text">Promise</code>, nothing will happen to it. Otherwise, you’ll be able to convert a <code class="language-text">thenable</code> into a <code class="language-text">Promise</code>.</p>
<p>This allows for chaining of promises to accomplish more complex asynchronous behavior that you could never easily accomplish with callbacks.</p>
<h2 id="chaining-promises" style="position:relative;"><a href="#chaining-promises" aria-label="chaining promises permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Chaining promises</h2>
<p>The <code class="language-text">Promise</code> API functionality we’ve leveraged so far has been great. I would definitely use it over callbacks or event handlers, even if it is only a minor improvement. But promises demonstrate their real power when you leverage their ability to be chained together.</p>
<p>You see, each call to <code class="language-text">then()</code> or <code class="language-text">catch()</code> under the hood actually creates and returns another promise. Remember our example from above?</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main data'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>

    <span class="token comment">// now call `fetch` again to retrieve new data</span>
    <span class="token comment">// based on the response data, which returns</span>
    <span class="token comment">// a promise</span>
    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inner data'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>

    <span class="token comment">// an empty fulfilled promise is returned</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Without chaining, the code would look something like this:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">let</span> fetchPromise <span class="token operator">=</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> innerFetchPromise <span class="token operator">=</span> fetchPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main data'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>

  <span class="token comment">// now call `fetch` again to retrieve new data</span>
  <span class="token comment">// based on the response data, which returns</span>
  <span class="token comment">// a promise</span>
  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

innerFetchPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inner data'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>

  <span class="token comment">// an empty fulfilled promise is returned</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>And of course that last call to <code class="language-text">innerFetchPromise.then()</code> would also return a promise. We just didn’t need to consume it.</p>
<h3 id="returning-values" style="position:relative;"><a href="#returning-values" aria-label="returning values permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Returning values</h3>
<p>Another key aspect of promise chaining is the ability pass data from one promise onto the next. When an unsettled promise is created and the async operation is successful, typically a value (such as the XHR response) is passed to <code class="language-text">resolve()</code> by the executor to fulfill the promise. Well, value passing doesn’t stop there. Promise reactions can continue to pass along values by returning them.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Create immediately fulfilled promise</span>
<span class="token comment">// that returns 'Ben'</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Ben'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">firstName</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// output: Ben</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>firstName<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> A.</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">firstAndMiddle</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// output: Ben A.</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>firstAndMiddle<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstAndMiddle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> Ilegbodu</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fullName</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// output: Ben A. Ilegbodu</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fullName<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Notice the use of <a href="/blog/learning-es6-template-literals-tagged-templates/#template-literal-interpolation">ES6 string interpolation</a>! Of course this is a very contrived example, but passing values can be useful if you need to take the result of a settled promise, process that result and create a new promise from it. If the processing can potentially throw errors, you’ll be able to easily catch those errors along with any other errors happening in the promise chain. You can jump ahead to <a href="#error-handling">Error handling</a> if you’re interested.</p>
<p>You’re more likely to want to return a <code class="language-text">Promise</code> (or <code class="language-text">thenable</code>) than actual values. More than likely you could do all of your value processing in a single <code class="language-text">then()</code> reaction. But if you wanted to make sequential async operations (like XHR requests that depend on the response of a previous request), after getting the response of the first operation, you would kick off the next operation based on data from the first and return the second operation’s <code class="language-text">Promise</code>. We saw an example of this earlier:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main data'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>

    <span class="token comment">// now call `fetch` again to retrieve new data</span>
    <span class="token comment">// based on the response data, which returns</span>
    <span class="token comment">// a new promise</span>
    <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'inner data'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Like we discussed in the section on <a href="#callbacks">Callbacks</a>, the callback version of this code is the makings of <em>callback hell</em> because the call to the second <code class="language-text">fetch</code> would be in the callback handler of the first. Promises nicely flatten this out with chaining. They also provide a unified location to handle errors.</p>
<h3 id="error-handling" style="position:relative;"><a href="#error-handling" aria-label="error handling permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Error handling</h3>
<p>The <code class="language-text">catch()</code> reaction is the way you handle errors with promises. We learned all about <code class="language-text">catch()</code> when we learned about <a href="#claiming-a-promise">claiming promises</a>. Promise chaining now allows you to catch any errors that may occur in a previous <code class="language-text">then()</code> or <code class="language-text">catch()</code> reaction.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Create immediately fulfilled, but</span>
<span class="token comment">// empty promise</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// throw an `Error` which should be</span>
    <span class="token comment">// caught by `catch()`</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'oh no!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// output: 'oh no!' error with call</span>
    <span class="token comment">// stack info</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>This sort of thing just wasn’t feasible with callbacks unless you explicitly added a <code class="language-text">try-catch</code> inside the callback. But what if your rejection reaction itself throws an error? Well you can <code class="language-text">catch()</code> that too!</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Create immediately fulfilled, but</span>
<span class="token comment">// empty promise</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// throw an `Error` which should be</span>
    <span class="token comment">// caught by `catch()`</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'oh no!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// output: 'oh no!' error with call</span>
    <span class="token comment">// stack info</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>

    <span class="token comment">// throw another `Error` within this</span>
    <span class="token comment">// error handler, which can be caught</span>
    <span class="token comment">// by a follow-up error handler</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'again?!?!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// output: 'again?!?!' error</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Interestingly enough, if you decide to return a value in your rejection reaction instead of throwing an <code class="language-text">Error</code>, it becomes a fulfillment value for the next promise. This allows you to specify default values to use in case of failure without having to break chaining.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/json/bad-data.json'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// There was an error retrieving data</span>
    <span class="token comment">// so just return default data</span>
    <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Ben Ilegbodu'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// at this point we should always have</span>
    <span class="token comment">// valid data regardless of if the `fetch`</span>
    <span class="token comment">// was successful</span>
    <span class="token comment">// output: {name: 'Ben Ilegbodu'}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Pretty helpful, huh? But wait, there’s more! The <code class="language-text">catch()</code> does not need to immediately follow the promise that caused the error. Errors are passed down the promise chain until a <code class="language-text">catch()</code> reaction is found. If no reject reaction is found, the error fails silently.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Create immediately rejected and empty</span>
<span class="token comment">// promise</span>
Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'FAIL!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// because the promise is rejected,</span>
    <span class="token comment">// this fulfillment reaction is never called</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// neither is this one</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// instead this reject reaction is called</span>
    <span class="token comment">// to handle the rejection that happened further</span>
    <span class="token comment">// up the chain</span>
    <span class="token comment">// output: 'FAIL!' error</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Even more helpful! If you stick a <code class="language-text">catch()</code> at the end of your promise chain it’ll always get called no matter where an error occurs. Even if all the <code class="language-text">catch()</code> does is log the error and rethrow, it’s a good practice to perform.</p>
<h2 id="promise-composition" style="position:relative;"><a href="#promise-composition" aria-label="promise composition permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Promise composition</h2>
<p>Up until this point, we have composed promises using sequential chaining. The next promise doesn’t get handled until the previous promise is settled (either fulfilled or rejected). However, there are times when you will want to track multiple async operations at the same time in order to determine what to do next.</p>
<p>ECMAScript 6 provides additional ways of composing promises via the <code class="language-text">Promise.all</code> and <code class="language-text">Promise.race</code> helpers.</p>
<h3 id="code-classlanguage-textpromiseallcode" style="position:relative;"><a href="#code-classlanguage-textpromiseallcode" aria-label="code classlanguage textpromiseallcode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">Promise.all</code></h3>
<p>Let’s say you have multiple async requests you want to fire off in <em>parallel</em> and then once they are done you want to use their results to do some additional processing. In the callback world you would have to maintain a variable that keeps track of which requests have returned and which haven’t. You will also need a data structure that would contain the results (and potentially in the order in which the requests were called). While this is doable with callbacks, it’s unnecessarily complex and error-prone, especially when you also need to do error handling.</p>
<p>The <code class="language-text">Promise.all</code> method makes this significantly easier. It takes an array of promises as a parameter and returns a <code class="language-text">Promise</code> that will be fulfilled with an array of response values only when <em>all</em> of the promises are fulfilled.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Return a promise that is only fulfilled once</span>
<span class="token comment">// all of the url fetch requests are fulfilled</span>
<span class="token comment">// via Promise.all</span>
<span class="token keyword">function</span> <span class="token function">fetchAll</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>urls</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Use rest parameter to aggregate URLs</span>
  <span class="token comment">// into an array</span>

  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
    <span class="token comment">// map the array of urls into an array</span>
    <span class="token comment">// of `fetch` promises</span>
    urls<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>fetch<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Make an XHR request for each URL and</span>
<span class="token comment">// process the results once they've *all*</span>
<span class="token comment">// completed</span>
<span class="token function">fetchAll</span><span class="token punctuation">(</span>
  <span class="token string">'/json/data.json'</span><span class="token punctuation">,</span>
  <span class="token string">'/json/data2.json'</span><span class="token punctuation">,</span>
  <span class="token string">'/json/data3.json'</span><span class="token punctuation">,</span>
  <span class="token string">'/json/data4.json'</span><span class="token punctuation">,</span>
  <span class="token string">'/json/data5.json'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">responses</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// `responses` is the array of response</span>
  <span class="token comment">// data</span>

  <span class="token comment">// output: 5</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>responses<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

  <span class="token comment">// more processing of results</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Much easier, huh? Much more readable too. The example also leverages <a href="/blog/learning-es6-parameter-handling/#rest-parameters">rest parameters</a>. I like to think of it as somewhat analogous to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">Array.prototype.every</code></a>, which returns <code class="language-text">true</code> (success) if all of the elements of the array pass the test implemented in the callback.</p>
<p>If any of the promises are rejected (i.e. fail), then the aggregator <code class="language-text">Promise</code> from <code class="language-text">Promise.all</code> also is rejected. You can use the <code class="language-text">catch()</code> reaction to catch these failures.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Make an XHR request for each URL and</span>
<span class="token comment">// process the results once they've *all*</span>
<span class="token comment">// completed</span>
<span class="token function">fetchAll</span><span class="token punctuation">(</span>
  <span class="token string">'/json/data.json'</span><span class="token punctuation">,</span>
  <span class="token string">'/json/data2.json'</span><span class="token punctuation">,</span>
  <span class="token string">'/json/data3.json'</span><span class="token punctuation">,</span>
  <span class="token string">'/json/data4.json'</span><span class="token punctuation">,</span>
  <span class="token string">'/json/data5.json'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">responses</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// `responses` is the array of response</span>
    <span class="token comment">// data</span>

    <span class="token comment">// output: 5</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>responses<span class="token punctuation">.</span>length<span class="token punctuation">)</span>

    <span class="token comment">// more processing of results</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// one or more of the requests failed</span>
    <span class="token comment">// or there was an error in `then()`</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Imagine trying to replicate this level of error handling with callbacks! It’s worth mentioning that all of the promises ultimately settle even if one of them settles in a rejected state while some are still pending. They won’t get cancelled. You should also know that <code class="language-text">Promise.all</code> also accepts non-<code class="language-text">Promise</code> objects. Any <code class="language-text">thenable</code> or non-<code class="language-text">Promise</code> objects are auto-resolved using <code class="language-text">Promise.resolve</code>.</p>
<h3 id="code-classlanguage-textpromiseracecode" style="position:relative;"><a href="#code-classlanguage-textpromiseracecode" aria-label="code classlanguage textpromiseracecode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">Promise.race</code></h3>
<p>I find <code class="language-text">Promise.race</code> to be a little less useful than <code class="language-text">Promise.all</code>. It operates on an array of <code class="language-text">Promise</code> objects and returns a promise as well. The difference is that the resultant promise settles based on the first settlement of the array of promises. It’s a race! If the first promise to settle in the array of promises is fulfilled (aka a success), then the resultant promise will be fulfilled. However, if the first settled promise is rejected (aka a failure), then the resultant promise will be rejected as well.</p>
<p>How it works is a bit weird, and best explained with a use-case. The best one I could find for <code class="language-text">Promise.race</code> is timing out an async operation. Let’s say you want to make a promise-based <code class="language-text">fetch</code>, but that request could take a long time and you want to time out after 5 seconds if the request has yet to return a response. Using <code class="language-text">Promise.race</code> we can combine our promise-based <code class="language-text">fetch</code> with our promise-based <a href="#tldr"><code class="language-text">wait</code></a> from earlier. If the <code class="language-text">wait</code> <em>wins</em> the “race,” then a timeout has occurred and we can handle the error appropriately.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// Extend the promise-based `wait` by throwing</span>
<span class="token comment">// an Error if the delay is successful</span>
<span class="token keyword">function</span> <span class="token function">timeout</span><span class="token punctuation">(</span><span class="token parameter">delay <span class="token operator">=</span> <span class="token number">3000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">wait</span><span class="token punctuation">(</span>delay<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Timed out!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Return a promise that will be fulfilled if</span>
<span class="token comment">// the fetch is fulfilled before the timeout</span>
<span class="token comment">// is rejected.</span>
<span class="token keyword">function</span> <span class="token function">fetchWithTimeout</span><span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">3000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// construct an array to pass to `Promise.race`</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">timeout</span><span class="token punctuation">(</span>delay<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Make an XHR request for the URL that has to</span>
<span class="token comment">// return a response *before* the 5 ms timeout</span>
<span class="token comment">// happens</span>
<span class="token function">fetchWithTimeout</span><span class="token punctuation">(</span><span class="token string">'/json/data.json'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// successful response before the 5 ms timeout</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'successful response'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Either the timeout occurred or some other error.</span>
    <span class="token comment">// Would need to check the method or use a custom</span>
    <span class="token comment">// `Error` subclass in `timeout`</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'request error'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>At first, it may seem weird to throw an <code class="language-text">Error</code> in <code class="language-text">timeout</code> when the <code class="language-text">delay</code> is successful, but it makes sense. We <em>want</em> it to be an error if the timeout actually happens. That way we can distinguish success from failure in the “race”. When <code class="language-text">timeout</code> settles, it will be a rejection. When <code class="language-text">fetch</code> settles, it will be a fulfillment. Therefore, whichever one settles first, will win the “race” and we can react appropriately. The <code class="language-text">then</code> reaction will retrieve the success response and the <code class="language-text">catch</code> reaction will handle the timeout.</p>
<p>As mentioned in the comment, if you really wanted <code class="language-text">timeout</code> to be useful it would return a custom <code class="language-text">Error</code> object so that callers could just type check the <code class="language-text">Error</code> object they receive instead of having to compare error messages. This is because if the <code class="language-text">fetch</code> fails for some reason, it will also go to the <code class="language-text">catch</code> reaction.</p>
<p><code class="language-text">Promise.race</code> can work with an array of any size, but I can’t really think of a realistic use case where you’d want to fire off multiple async operations, only caring about the first one that returns. But I’m sure there is one.</p>
<h2 id="inheriting-from-code-classlanguage-textpromisecode" style="position:relative;"><a href="#inheriting-from-code-classlanguage-textpromisecode" aria-label="inheriting from code classlanguage textpromisecode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inheriting from <code class="language-text">Promise</code></h2>
<p>Just like with other built-in types, the <code class="language-text">Promise</code> class can be subclassed to create your own more specific promise objects. Let’s say you don’t like the names <code class="language-text">then()</code> and <code class="language-text">catch()</code> and want to use <code class="language-text">done()</code> and <code class="language-text">fail()</code> instead (to be more like jQuery). You could subclass <code class="language-text">Promise</code> to add in these methods.</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">JPromise</span> <span class="token keyword">extends</span> <span class="token class-name">Promise</span> <span class="token punctuation">{</span>
  <span class="token comment">// use the default constructor. no need to</span>
  <span class="token comment">// override it</span>

  <span class="token comment">// callback registered via `done` will only</span>
  <span class="token comment">// be called when the `Promise` is fulfilled</span>
  <span class="token function">done</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// intentionally omitting the `reject` callback</span>
    <span class="token comment">// that's also passed to `then`</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// `fail` is just a name wrapper around `catch`</span>
  <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>reject<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

JPromise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Ben Ilegbodu'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'using done instead of then!'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>

    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'FAIL for fun!'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'sad face'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>This example shows ES6 classes which we haven’t discussed yet, but if you’ve used classes in any other programming language, it should make sense to you. We’ll be covering them in greater detail soon.</p>
<p>You may have also noticed the use of <code class="language-text">JPromise.resolve</code> instead of just <code class="language-text">Promise.resolve</code> to create the promise. <code class="language-text">resolve</code> and <code class="language-text">reject</code> are also inherited so when we call them on <code class="language-text">JPromise</code>, we get back a <code class="language-text">JPromise</code> object instead of a generic <code class="language-text">Promise</code> object.</p>
<h2 id="wrapping-things-up" style="position:relative;"><a href="#wrapping-things-up" aria-label="wrapping things up permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wrapping things up</h2>
<p>We’re entering the home stretch now!</p>
<p>While the <code class="language-text">Promise</code> API based on the Promises/A+ standard is crazy powerful, it’s still lacking some useful functionality that exist in some of our existing promise libraries.</p>
<p>The first omission is the ability to cancel a <code class="language-text">Promise</code>. This could come in handy when using <code class="language-text">Promise.all</code> or <code class="language-text">Promise.race</code>. If one promise’s completion causes the result of others to no longer matter, it’d be nice to be able to cancel them. The <a href="https://github.com/promises-aplus/cancellation-spec" target="_blank" rel="nofollow noopener noreferrer">cancellation spec</a> is already under development for Promises/A+.</p>
<p>The second omission is the ability to query the progress of a <code class="language-text">Promise</code>. Imagine making a <code class="language-text">fetch</code> call of a 100MB file. Being a able to display a progress indicator would be pretty helpful. Thankfully, the <a href="https://github.com/promises-aplus/progress-spec" target="_blank" rel="nofollow noopener noreferrer">progress spec</a> too is under development for Promises/A+.</p>
<p>Promises are good for async operations that happen one time and then they’re done. You shouldn’t use promises for recurring events (such as clicks, key presses, etc.). If you want an alternative to normal event handling for recurring events, try out <a href="http://reactive-extensions.github.io/RxJS/" target="_blank" rel="nofollow noopener noreferrer">reactive programming in JavaScript</a>.</p>
<h2 id="javascript-engine-support" style="position:relative;"><a href="#javascript-engine-support" aria-label="javascript engine support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JavaScript engine support</h2>
<p>As of September 27, 2015, according to the <a href="http://kangax.github.io/compat-table/es6/" target="_blank" rel="nofollow noopener noreferrer">ECMAScript 6 Compatibility table</a> all major JavaScript engines (transpilers, browsers and servers) support the <code class="language-text">Promise</code> API. Some don’t support 100% of the functionality, but the missing pieces most likely won’t be features you’ll be leveraging. The most notable is that Traceur is missing support for generic iterables with <code class="language-text">Promise.all</code> and <code class="language-text">Promise.race</code>.</p>
<p>If you need support for <code class="language-text">Promise</code> in an older browser, however, check out the <a href="https://github.com/stefanpenner/es6-promise" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">es6-promise</code></a> polyfill or just use <a href="https://github.com/zloirock/core-js" target="_blank" rel="nofollow noopener noreferrer"><code class="language-text">core-js</code></a> to get all of the ES6+ polyfills.</p>
<h2 id="additional-resources" style="position:relative;"><a href="#additional-resources" aria-label="additional resources permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Additional resources</h2>
<p>As always, you can check out the <a href="https://learning-es6.benmvp.com/#promises" target="_blank" rel="nofollow noopener noreferrer"><em>Learning ES6</em> examples page</a> for the <a href="https://github.com/benmvp/learning-es6" target="_blank" rel="nofollow noopener noreferrer"><em>Learning ES6</em> Github repo</a> where you will find all of the code used in this article running natively in the browser.</p>
<p>I’ve got two great web tools for you to play around with ES6 Promises. First there are the <a href="http://es6katas.org/" target="_blank" rel="nofollow noopener noreferrer">ES6 Katas</a> that you’ve come to know and love. But there’s also <a href="http://bevacqua.github.io/promisees/" target="_blank" rel="nofollow noopener noreferrer">Promisees: A Visualization Playground for Promises</a> by <a href="https://twitter.com/nzgb" target="_blank" rel="nofollow noopener noreferrer">Nicolas Bevacqua</a>. It’s pretty cool!</p>
<p>Since promises aren’t new to JavaScript (just the native <code class="language-text">Promise</code> API included with ES6), there are a lot of books and articles covering it. Here’s a smattering:</p>
<ul>
<li><a href="http://exploringjs.com/es6/ch_promises.html" target="_blank" rel="nofollow noopener noreferrer">Promises for asynchronous programming</a> in <a href="http://exploringjs.com/es6/" target="_blank" rel="nofollow noopener noreferrer"><em>Exploring ES6</em></a> by <a href="https://twitter.com/rauschma" target="_blank" rel="nofollow noopener noreferrer">Axel Rauschmayer</a></li>
<li><a href="https://leanpub.com/understandinges6/read#leanpub-auto-promises" target="_blank" rel="nofollow noopener noreferrer">Promises</a> in <a href="https://leanpub.com/understandinges6/" target="_blank" rel="nofollow noopener noreferrer"><em>Understanding ECMAScript 6</em></a> by <a href="https://twitter.com/slicknet" target="_blank" rel="nofollow noopener noreferrer">Nicholas C. Zakas</a></li>
<li><a href="http://www.html5rocks.com/en/tutorials/es6/promises/" target="_blank" rel="nofollow noopener noreferrer">JavaScript Promises</a> by <a href="https://twitter.com/jaffathecake" target="_blank" rel="nofollow noopener noreferrer">Jake Archibald</a></li>
<li><a href="https://github.com/kriskowal/q/wiki/Coming-from-jQuery" target="_blank" rel="nofollow noopener noreferrer">Coming from jQuery</a> in <a href="https://github.com/kriskowal/q" target="_blank" rel="nofollow noopener noreferrer">q</a> by <a href="https://twitter.com/kriskowal" target="_blank" rel="nofollow noopener noreferrer">Kris Kowal</a></li>
<li><a href="http://exploringjs.com/es6/ch_async.html#ch_async" target="_blank" rel="nofollow noopener noreferrer">Asynchronous Programming</a> in <a href="http://exploringjs.com/es6/" target="_blank" rel="nofollow noopener noreferrer"><em>Exploring ES6</em></a> by <a href="https://twitter.com/rauschma" target="_blank" rel="nofollow noopener noreferrer">Axel Rauschmayer</a></li>
<li><a href="http://taoofcode.net/promise-anti-patterns/" target="_blank" rel="nofollow noopener noreferrer">Promise Anti-patterns</a> by <a href="http://taoofcode.net/index.html" target="_blank" rel="nofollow noopener noreferrer">Tao of Code</a></li>
<li><a href="https://github.com/promises-aplus/promises-spec" target="_blank" rel="nofollow noopener noreferrer">Promises/A+ specification</a></li>
</ul>
<h2 id="coming-up-next" style="position:relative;"><a href="#coming-up-next" aria-label="coming up next permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Coming up next…</h2>
<p>Wow! That was a meaty one wasn’t it? Up next we’ll take a look at generators in ES6. I’m super excited about generators. They’re something I wanted to learn a while back when they were introduced in C#. Until then…</p></article><footer class="MuiBox-root-10 jss168 jss2"><div><div class="jss169"><button aria-label="Share on Twitter" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="Share on Facebook" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg><span class="react-share__ShareCount" url="https://www.benmvp.com/blog/learning-es6-promises/">0</span></button><button aria-label="Save to Pocket" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#EF3F56"></circle><path d="M41.084 29.065l-7.528 7.882a2.104 2.104 0 0 1-1.521.666 2.106 2.106 0 0 1-1.522-.666l-7.528-7.882c-.876-.914-.902-2.43-.065-3.384.84-.955 2.228-.987 3.1-.072l6.015 6.286 6.022-6.286c.88-.918 2.263-.883 3.102.071.841.938.82 2.465-.06 3.383l-.015.002zm6.777-10.976C47.463 16.84 46.361 16 45.14 16H18.905c-1.2 0-2.289.82-2.716 2.044-.125.363-.189.743-.189 1.125v10.539l.112 2.096c.464 4.766 2.73 8.933 6.243 11.838.06.053.125.102.19.153l.04.033c1.882 1.499 3.986 2.514 6.259 3.014a14.662 14.662 0 0 0 6.13.052c.118-.042.235-.065.353-.087.03 0 .065-.022.098-.042a15.395 15.395 0 0 0 6.011-2.945l.039-.045.18-.153c3.502-2.902 5.765-7.072 6.248-11.852L48 29.674v-10.52c0-.366-.041-.728-.161-1.08l.022.015z" fill="white"></path></svg></button><button aria-label="Share on LinkedIn" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#007fb1"></circle><path d="M20.4,44h5.4V26.6h-5.4V44z M23.1,18c-1.7,0-3.1,1.4-3.1,3.1c0,1.7,1.4,3.1,3.1,3.1 c1.7,0,3.1-1.4,3.1-3.1C26.2,19.4,24.8,18,23.1,18z M39.5,26.2c-2.6,0-4.4,1.4-5.1,2.8h-0.1v-2.4h-5.2V44h5.4v-8.6 c0-2.3,0.4-4.5,3.2-4.5c2.8,0,2.8,2.6,2.8,4.6V44H46v-9.5C46,29.8,45,26.2,39.5,26.2z" fill="white"></path></svg></button><button aria-label="Share by email" class="react-share__ShareButton jss170" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg viewBox="0 0 64 64" width="48" height="48"><circle cx="32" cy="32" r="31" fill="#7f7f7f"></circle><path d="M17,22v20h30V22H17z M41.1,25L32,32.1L22.9,25H41.1z M20,39V26.6l12,9.3l12-9.3V39H20z" fill="white"></path></svg></button></div></div><div class="MuiBox-root-10 jss171"><section class="MuiPaper-root-30 jss172 MuiPaper-elevation3-36 MuiPaper-rounded-31"><h1 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-gutterBottom-88">Subscribe to the Newsletter</h1><p class="MuiTypography-root-68 MuiTypography-body1-70 MuiTypography-gutterBottom-88">Get notified about new blog posts, minishops &amp; other goodies</p><div class="MuiCollapse-container-174 MuiCollapse-hidden-176" style="min-height:0px"><div class="MuiCollapse-wrapper-177"><div class="MuiCollapse-wrapperInner-178"><div class="MuiBox-root-10 jss179"><div class="MuiPaper-root-30 MuiAlert-root-180 MuiAlert-standardError-184 MuiPaper-elevation0-33" role="alert"><div class="MuiAlert-icon-193"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeInherit-141" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></svg></div><div class="MuiAlert-message-194"></div><div class="MuiAlert-action-195"><button class="MuiButtonBase-root-126 MuiIconButton-root-127 MuiIconButton-colorInherit-130 MuiIconButton-sizeSmall-133" tabindex="0" type="button" aria-label="Close" title="Close"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeSmall-142" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg></span></button></div></div></div></div></div></div><form class="MuiBox-root-10 jss196" method="post" name="subscribe"><div class="MuiFormControl-root-198 MuiTextField-root-197 MuiFormControl-marginNormal-199 MuiFormControl-fullWidth-201"><label class="MuiFormLabel-root-210 MuiInputLabel-root-202 MuiInputLabel-formControl-204 MuiInputLabel-animated-207 MuiInputLabel-shrink-206 MuiInputLabel-outlined-209 Mui-required Mui-required" data-shrink="true">Email<span aria-hidden="true" class="MuiFormLabel-asterisk-213 MuiInputLabel-asterisk-203"> <!-- -->*</span></label><div class="MuiInputBase-root-226 MuiOutlinedInput-root-214 MuiInputBase-fullWidth-233 MuiInputBase-formControl-227 MuiInputBase-adornedStart-228 MuiOutlinedInput-adornedStart-216"><div class="MuiInputAdornment-root-241 MuiInputAdornment-positionStart-243"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></svg></div><input type="email" aria-invalid="false" required="" value="" class="MuiInputBase-input-234 MuiOutlinedInput-input-221 MuiInputBase-inputAdornedStart-238 MuiOutlinedInput-inputAdornedStart-224"/><fieldset aria-hidden="true" class="jss248 MuiOutlinedInput-notchedOutline-220"><legend class="jss250 jss251"><span>Email<!-- --> *</span></legend></fieldset></div></div><div class="MuiFormControl-root-198 MuiTextField-root-197 MuiFormControl-marginNormal-199 MuiFormControl-fullWidth-201"><label class="MuiFormLabel-root-210 MuiInputLabel-root-202 MuiInputLabel-formControl-204 MuiInputLabel-animated-207 MuiInputLabel-shrink-206 MuiInputLabel-outlined-209 Mui-required Mui-required" data-shrink="true">First Name<span aria-hidden="true" class="MuiFormLabel-asterisk-213 MuiInputLabel-asterisk-203"> <!-- -->*</span></label><div class="MuiInputBase-root-226 MuiOutlinedInput-root-214 MuiInputBase-fullWidth-233 MuiInputBase-formControl-227 MuiInputBase-adornedStart-228 MuiOutlinedInput-adornedStart-216"><div class="MuiInputAdornment-root-241 MuiInputAdornment-positionStart-243"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg></div><input type="text" aria-invalid="false" required="" value="" class="MuiInputBase-input-234 MuiOutlinedInput-input-221 MuiInputBase-inputAdornedStart-238 MuiOutlinedInput-inputAdornedStart-224"/><fieldset aria-hidden="true" class="jss248 MuiOutlinedInput-notchedOutline-220"><legend class="jss250 jss251"><span>First Name<!-- --> *</span></legend></fieldset></div></div><button class="MuiButtonBase-root-126 MuiButton-root-99 MuiButton-contained-107 jss173 MuiButton-containedPrimary-108" tabindex="0" type="submit"><span class="MuiButton-label-100">Subscribe<span class="MuiButton-endIcon-122 MuiButton-iconSizeMedium-124"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg></span></span></button></form></section></div><hr class="MuiDivider-root-252 jss167 MuiDivider-middle-256"/><section class="MuiGrid-root-261 MuiGrid-container-262 MuiGrid-spacing-xs-2-285 MuiGrid-align-items-xs-center-270"><aside class="MuiGrid-root-261 jss259 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-2-311"><a href="https://twitter.com/benmvp" rel="noopener noreferrer" target="_blank"><div class="jss260 gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:80px;height:80px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAG66AABuugHW3rEXAAAE4ElEQVR42m2Ta0xTZxjHWyhbIs6gbm4WOxUVxNoCvdHa0tMLvRePRcqthdIqAi0INYWBMJmKF9RBh9xcRTZQcXiJJhuLmwn7sjg0WeZgbm5xblmyD1uWfViyD0D73zlHzWz0TZ6c2//5nef/vs/DYj1ZBEEwV3GulpW8JIn14/dgr0oT6DdvER8jFar+Gk3eMa9qG8lhs5MAsGxZAjatt2zcyHrhooGbt4oZkUSyjbcuXXhSksn/a49Oi66iwthItTfW73Gh2Wq66RBlv0rrPHlK9gthnZ2drE0ZAuY+Z6sgOVMg2a8RiaYCBh067Jb5ju22hQv1tQvXgg0LQ94KBPSam5SUQ+tJUfaLK1Qo1AkMUCy3q8RSXzmR93vAbER7gTUWpMBDVW5MtewDVeVCR4EV5Wp1A61vzCcSnoNlCx5XJ9y4PlkqzT1BynPbK3QaaISCKJ+3BlpRDvRiKXxaDTpIe7TJqEdhruwLOmfucMfztgmlinmpEGWvNxotk55i1/UMCpTO5UalG9JgMuSDn6VE8vK1WL40GatXpyF1TQaWvrIiQudpTXWsxMTEZ+zKpAzwzTdWbnWVVUa7eyIgjRbs1qphyRZCLpNCJFZiHW8TinIlSOVtWeRtkGL5ytTrdF46Xx9vW67MZ/AimdZhMFhx6Eg4uremAW6VAqfKi9G6owAkBarVERioLIcqkx/NTM/C+rTNRXTeFr4kHijLszFAqXqHS6Ozor4hNN/gD8aKFbk4UebE6UoXWqwmVFPAZrsFzeb8xXdra9F2qMdO5x093pcYB8yREozljCxinVqt/8PpKMRO0hErz1MiZDGiWqOGIJWLzNdXMWEX8hEqd89797YxPROoD8VXyOVyWUajjYGKskRCpUL5kU4m/dtLnXSb3RLzU5W5DXr0BBtxwOeNetQqePS6g7R+osrN3sDjxZ+y3Blkrlqjh/kTV1zGLVVrvqnSEnjLZo5S04GgzYLh1tbYjZMn4TcZf3FJsphpqZCJ2NPT0/HAppZBtr9tghOien/oK3AI8667u802VOsJCmaGV60EvZ8hk2ExaDTALhY10nm1rkCSydHEMJyTk49ho1d/TaSHvWTfx8xzScN4gaOyC+48OZrMBlRTVoVUTyZxOBCs5YG7IgXsl5bIae2S5GUJE5/8mdAbuZPYenDi/wavq+9KcdX1OUsD525VBC/Oe5qvwEn64CMUqDNoYcjJxmspKeAkvRzLEOpRseudB+Gzd0LNnRc2PWXcmJ5n90ZmElhdvZ/1hyMzv4VHv0XNgU9REhiNuYMT8DRfBUnWwKU3wU+NWhGhB6Hajp3ut9E9dBuUMwx8eO/fnjO3r1GMktpg37LHlq88QuTSTxg+/120d+TrxZbjt1Dqj6DQ14PtvjBKXe3U/olgM5RAZa4HWRzE0Pn70aHxucWBsTmMTP5MxUOEz959eOjUVAFrcHxuYXBsNkYFJZzD2UsP4G+/DJm6GI6qbpSUNaNEngM72QC7+zCO9H6O90bv4cTwHXRTMTA2u0gxFs9dfoQzF3/4hwLO4mkM0NDxOYTP3cOe0AcgK4+BLN2PInMRjFYfnBUd6OqfoSzPoI+C0lo6mPyx2ejwhfvROOAg/fEJ9P2JB+g6/SU8jSMw2XdBb65E+/Ep2i61PU9AY8/mMhH7DwkiXhzU3azSAAAAAElFTkSuQmCC" alt="Ben Ilegbodu" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/2b60dd7e58e084c6192b8f4d7c81d91d/829e2/benmvp-logo.png 1x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/e94d6/benmvp-logo.png 1.5x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/af1a8/benmvp-logo.png 2x" /><img loading="lazy" width="80" height="80" srcset="/static/2b60dd7e58e084c6192b8f4d7c81d91d/829e2/benmvp-logo.png 1x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/e94d6/benmvp-logo.png 1.5x,
/static/2b60dd7e58e084c6192b8f4d7c81d91d/af1a8/benmvp-logo.png 2x" src="/static/2b60dd7e58e084c6192b8f4d7c81d91d/829e2/benmvp-logo.png" alt="Ben Ilegbodu" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></aside><article class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-10-319">Hi, I'm <strong>Ben Ilegbodu</strong>. 👋🏾<br /><br />I'm a Christian, husband, and father of 3, with 15+ years of professional experience developing user interfaces for the Web. I'm a Frontend Architect at Stitch Fix, frontend development teacher, Google Developer Expert, and Microsoft MVP. I love helping developers level up their frontend skills.</article></section><hr class="MuiDivider-root-252 jss167 MuiDivider-middle-256"/><p class="MuiTypography-root-68 MuiTypography-h6-78 MuiTypography-alignCenter-84"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorPrimary-91" href="https://twitter.com/search?q=https://www.benmvp.com/blog/learning-es6-promises/" target="_blank" rel="noopener noreferrer">Discuss on Twitter</a> // <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorPrimary-91" href="https://github.com/benmvp/benmvp.com/edit/main/content/posts/learning-es6-promises/index.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a></p></footer><hr class="MuiDivider-root-252 jss3 MuiDivider-middle-256"/><div class="MuiGrid-root-261 MuiGrid-container-262 MuiGrid-spacing-xs-2-285"><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307"><h3 class="MuiTypography-root-68 MuiTypography-h5-77">More from Ben Ilegbodu on <strong>Learning ES6</strong>...</h3></div><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-6-315"><div class="MuiPaper-root-30 MuiCard-root-366 MuiPaper-elevation1-34 MuiPaper-rounded-31" id="post-generators-as-iterators"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 MuiButtonBase-root-126 MuiCardActionArea-root-367 MuiTypography-colorPrimary-91" tabindex="0" role="button" aria-disabled="false" href="/blog/learning-es6-generators-as-iterators/"><img class="MuiCardMedia-root-369 jss364 MuiCardMedia-media-370 MuiCardMedia-img-371" src="/static/93d0cfb5a7cb2fba0ba4606254ef2a37/dee3b/electric-generator.jpg" title="Generators as iterators"/><div class="MuiCardContent-root-372"><h3 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-colorTextPrimary-93 MuiTypography-gutterBottom-88" title="Generators as iterators">Generators as iterators</h3><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-colorTextSecondary-94">I feel like all the articles in the Learning ES6 series have been leading up to generators. They really are the feature most JavaScript…</p></div><span class="MuiCardActionArea-focusHighlight-368"></span></a></div></div><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-6-315"><div class="MuiPaper-root-30 MuiCard-root-366 MuiPaper-elevation1-34 MuiPaper-rounded-31" id="post-classes"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 MuiButtonBase-root-126 MuiCardActionArea-root-367 MuiTypography-colorPrimary-91" tabindex="0" role="button" aria-disabled="false" href="/blog/learning-es6-classes/"><img class="MuiCardMedia-root-369 jss364 MuiCardMedia-media-370 MuiCardMedia-img-371" src="/static/a6d3446fdd397955b3cde0252342a1eb/f836f/oop-scrabble-tiles.jpg" title="Classes"/><div class="MuiCardContent-root-372"><h3 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-colorTextPrimary-93 MuiTypography-gutterBottom-88" title="Classes">Classes</h3><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-colorTextSecondary-94">At the end of our discussion of the new  operator I mentioned that I would next talk about either the new collections or iterators…</p></div><span class="MuiCardActionArea-focusHighlight-368"></span></a></div></div><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-6-315"><div class="MuiPaper-root-30 MuiCard-root-366 MuiPaper-elevation1-34 MuiPaper-rounded-31" id="post-template-literals-and-tagged-templates"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 MuiButtonBase-root-126 MuiCardActionArea-root-367 MuiTypography-colorPrimary-91" tabindex="0" role="button" aria-disabled="false" href="/blog/learning-es6-template-literals-tagged-templates/"><img class="MuiCardMedia-root-369 jss364 MuiCardMedia-media-370 MuiCardMedia-img-371" src="/static/ee0b0ae04b8badcf5f7ebf5afef24d86/de22e/backtick.png" title="Template literals &amp; tagged templates"/><div class="MuiCardContent-root-372"><h3 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-colorTextPrimary-93 MuiTypography-gutterBottom-88" title="Template literals &amp; tagged templates">Template literals &amp; tagged templates</h3><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-colorTextSecondary-94">Template literals and tagged templates comprise topic #6 in the Learning ES6 series. If you’re new to the series, we most recently covered…</p></div><span class="MuiCardActionArea-focusHighlight-368"></span></a></div></div><div class="MuiGrid-root-261 MuiGrid-item-263 MuiGrid-grid-xs-12-307 MuiGrid-grid-sm-6-315"><div class="MuiPaper-root-30 MuiCard-root-366 MuiPaper-elevation1-34 MuiPaper-rounded-31" id="post-block-level-scoping-with-let-and-const"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineNone-64 MuiButtonBase-root-126 MuiCardActionArea-root-367 MuiTypography-colorPrimary-91" tabindex="0" role="button" aria-disabled="false" href="/blog/learning-es6-block-level-scoping-let-const/"><img class="MuiCardMedia-root-369 jss364 MuiCardMedia-media-370 MuiCardMedia-img-371" src="/static/49aa1ab79afb4379a1dbb1b942d70809/497c6/block-scope.png" title="Block-level scoping with let and const"/><div class="MuiCardContent-root-372"><h3 class="MuiTypography-root-68 MuiTypography-h5-77 MuiTypography-colorTextPrimary-93 MuiTypography-gutterBottom-88" title="Block-level scoping with let and const">Block-level scoping with let and const</h3><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-colorTextSecondary-94">Coming off the heels of discussing arrow functions, let’s continue the Learning ES6 series talking about block-level scoping in ECMAScript…</p></div><span class="MuiCardActionArea-focusHighlight-368"></span></a></div></div></div></main></div><footer class="MuiBox-root-10 jss378"><div class="MuiContainer-root-156 jss373 MuiContainer-maxWidthMd-161"><p class="MuiTypography-root-68 jss374 MuiTypography-body1-70 MuiTypography-alignCenter-84"><a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90" href="/learning-es6-series/">Learning ES6</a> | <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90" href="/ama/">AMA</a> | <a href="/blog/rss.xml" class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90">RSS</a></p><div class="MuiBox-root-10 jss379 jss375"><h4 class="MuiTypography-root-68 MuiTypography-h4-76">Ben Ilegbodu</h4><ul class="MuiBox-root-10 jss382 jss380"><li class="jss381"><a href="https://twitter.com/benmvp" target="_blank" rel="noopener noreferrer" title="Follow Ben on Twitter"><button class="MuiButtonBase-root-126 MuiIconButton-root-127 MuiIconButton-colorSecondary-132" tabindex="0" type="button" aria-label="Ben&#x27;s Twitter profile"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeLarge-143" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"></path></svg></span></button></a></li><li class="jss381"><a href="https://github.com/benmvp" target="_blank" rel="noopener noreferrer" title="Visit Ben&#x27;s Github profile"><button class="MuiButtonBase-root-126 MuiIconButton-root-127 MuiIconButton-colorSecondary-132" tabindex="0" type="button" aria-label="Ben&#x27;s Github profile"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeLarge-143" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3"></path></svg></span></button></a></li><li class="jss381"><a href="https://linkedin.com/in/benmvp" target="_blank" rel="noopener noreferrer" title="Visit Ben&#x27;s LinkedIn resume"><button class="MuiButtonBase-root-126 MuiIconButton-root-127 MuiIconButton-colorSecondary-132" tabindex="0" type="button" aria-label="Ben&#x27;s LinkedIn profile"><span class="MuiIconButton-label-134"><svg class="MuiSvgIcon-root-135 MuiSvgIcon-fontSizeLarge-143" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path></svg></span></button></a></li></ul></div><div class="MuiBox-root-10 jss383 jss377"><p class="MuiTypography-root-68 MuiTypography-body2-69 MuiTypography-gutterBottom-88 MuiTypography-alignCenter-84">© 2015 — <!-- -->2023<!-- -->, Ben Ilegbodu. All rights reserved.<!-- --> <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineHover-65 MuiTypography-colorInherit-90" href="https://www.biblegateway.com/passage/?search=2%20cor%205%3A17&amp;version=NLT;NTV" target="_blank" rel="noopener noreferrer">2 Cor 5:17</a></p><p class="MuiTypography-root-68 MuiTypography-caption-71 MuiTypography-alignCenter-84">Built using<!-- --> <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineAlways-66 MuiTypography-colorInherit-90" href="https://www.gatsbyjs.org" target="_blank" rel="noopener noreferrer">Gatsby</a> <!-- -->and deployed to<!-- --> <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineAlways-66 MuiTypography-colorInherit-90" href="https://vercel.com/" target="_blank" rel="noopener noreferrer">Vercel</a>. The source code is hosted on<!-- --> <a class="MuiTypography-root-68 MuiLink-root-63 MuiLink-underlineAlways-66 MuiTypography-colorInherit-90" href="https://github.com/benmvp/benmvp.com" target="_blank" rel="noopener noreferrer">Github</a>.</p></div></div></footer><div role="presentation" class="jss384" style="transform:scale(0);visibility:hidden"><button class="MuiButtonBase-root-126 MuiFab-root-385 MuiFab-sizeSmall-391 MuiFab-secondary-388" tabindex="0" type="button" aria-label="scroll back to top"><span class="MuiFab-label-386"><svg class="MuiSvgIcon-root-135" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path></svg></span></button></div></section></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-65375615-1"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'UA-65375615-1'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = false;

    var options = {
      send_page_view: false
    };
    if (false) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'UA-65375615-1', options);
  </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/learning-es6-promises/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-fb52633655618c0bf540.js"],"app":["/app-5b457b18690bafe5211f.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-becfe473c82be5d1c6a7.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-0f7796a8b5ba6cee03f6.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-29ec3728c308750a9bce.js"],"component---src-pages-minishops-tsx":["/component---src-pages-minishops-tsx-df52f9bee604be925646.js"],"component---src-pages-projects-tsx":["/component---src-pages-projects-tsx-02ee2353c396083db7f2.js"],"component---src-pages-speak-tsx":["/component---src-pages-speak-tsx-40de7c3260dadc1e5d8f.js"],"component---src-pages-subscribe-tsx":["/component---src-pages-subscribe-tsx-4f25b1aff3f33083bdb7.js"],"component---src-pages-videos-tsx":["/component---src-pages-videos-tsx-2fab118aeaa5363826cc.js"],"component---src-templates-minishop-tsx":["/component---src-templates-minishop-tsx-463c3a03e5b835a50b90.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-8f5dab85dd598f7e2a44.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-0d9430f06be996e24ca9.js"]};/*]]>*/</script><script src="/polyfill-fb52633655618c0bf540.js" nomodule=""></script><script src="/component---src-templates-post-tsx-0d9430f06be996e24ca9.js" async=""></script><script src="/67b0b73ca5ef5a715ae49b4d20728b3d9c676d49-806d5139e281bb720cc6.js" async=""></script><script src="/commons-9c3f5f586f099fa6aeed.js" async=""></script><script src="/app-5b457b18690bafe5211f.js" async=""></script><script src="/framework-4b86d917a023bb3f8d06.js" async=""></script><script src="/styles-2416da4fc4c075b56691.js" async=""></script><script src="/webpack-runtime-39892b29b7048a49a6be.js" async=""></script></body></html>